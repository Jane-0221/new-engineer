ARM GAS  C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s 			page 1


   1              		.cpu cortex-m7
   2              		.arch armv7e-m
   3              		.fpu fpv5-d16
   4              		.eabi_attribute 28, 1
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 6
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.file	"stm32h7xx_hal_pcd_ex.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.file 1 "Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c"
  19              		.section	.text.HAL_PCDEx_SetTxFiFo,"ax",%progbits
  20              		.align	1
  21              		.global	HAL_PCDEx_SetTxFiFo
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	HAL_PCDEx_SetTxFiFo:
  27              	.LFB144:
   1:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** /**
   2:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   ******************************************************************************
   3:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @file    stm32h7xx_hal_pcd_ex.c
   4:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @author  MCD Application Team
   5:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @brief   PCD Extended HAL module driver.
   6:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   *          This file provides firmware functions to manage the following
   7:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   *          functionalities of the USB Peripheral Controller:
   8:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   *           + Extended features functions
   9:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   *
  10:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   ******************************************************************************
  11:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @attention
  12:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   *
  13:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * Copyright (c) 2017 STMicroelectronics.
  14:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * All rights reserved.
  15:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   *
  16:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * This software is licensed under terms that can be found in the LICENSE file
  17:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * in the root directory of this software component.
  18:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * If no LICENSE file comes with this software, it is provided AS-IS.
  19:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   *
  20:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   ******************************************************************************
  21:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   */
  22:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
  23:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** /* Includes ------------------------------------------------------------------*/
  24:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** #include "stm32h7xx_hal.h"
  25:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
  26:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** /** @addtogroup STM32H7xx_HAL_Driver
  27:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @{
  28:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   */
  29:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
  30:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** /** @defgroup PCDEx PCDEx
  31:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @brief PCD Extended HAL module driver
ARM GAS  C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s 			page 2


  32:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @{
  33:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   */
  34:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
  35:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** #ifdef HAL_PCD_MODULE_ENABLED
  36:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
  37:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** #if defined (USB_OTG_FS) || defined (USB_OTG_HS)
  38:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** /* Private types -------------------------------------------------------------*/
  39:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** /* Private variables ---------------------------------------------------------*/
  40:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** /* Private constants ---------------------------------------------------------*/
  41:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** /* Private macros ------------------------------------------------------------*/
  42:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** /* Private functions ---------------------------------------------------------*/
  43:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** /* Exported functions --------------------------------------------------------*/
  44:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
  45:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** /** @defgroup PCDEx_Exported_Functions PCDEx Exported Functions
  46:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @{
  47:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   */
  48:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
  49:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** /** @defgroup PCDEx_Exported_Functions_Group1 Peripheral Control functions
  50:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @brief    PCDEx control functions
  51:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   *
  52:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** @verbatim
  53:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****  ===============================================================================
  54:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****                  ##### Extended features functions #####
  55:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****  ===============================================================================
  56:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     [..]  This section provides functions allowing to:
  57:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****       (+) Update FIFO configuration
  58:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
  59:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** @endverbatim
  60:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @{
  61:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   */
  62:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** #if defined (USB_OTG_FS) || defined (USB_OTG_HS)
  63:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** /**
  64:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @brief  Set Tx FIFO
  65:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @param  hpcd PCD handle
  66:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @param  fifo The number of Tx fifo
  67:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @param  size Fifo size
  68:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @retval HAL status
  69:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   */
  70:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** HAL_StatusTypeDef HAL_PCDEx_SetTxFiFo(PCD_HandleTypeDef *hpcd, uint8_t fifo, uint16_t size)
  71:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** {
  28              		.loc 1 71 1
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 16
  31              		@ frame_needed = 1, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  33 0000 80B4     		push	{r7}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 4
  36              		.cfi_offset 7, -4
  37 0002 85B0     		sub	sp, sp, #20
  38              	.LCFI1:
  39              		.cfi_def_cfa_offset 24
  40 0004 00AF     		add	r7, sp, #0
  41              	.LCFI2:
  42              		.cfi_def_cfa_register 7
  43 0006 7860     		str	r0, [r7, #4]
  44 0008 0B46     		mov	r3, r1
ARM GAS  C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s 			page 3


  45 000a FB70     		strb	r3, [r7, #3]
  46 000c 1346     		mov	r3, r2	@ movhi
  47 000e 3B80     		strh	r3, [r7]	@ movhi
  72:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   uint8_t i;
  73:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   uint32_t Tx_Offset;
  74:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
  75:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   /*  TXn min size = 16 words. (n  : Transmit FIFO index)
  76:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****       When a TxFIFO is not used, the Configuration should be as follows:
  77:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****           case 1 :  n > m    and Txn is not used    (n,m  : Transmit FIFO indexes)
  78:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****          --> Txm can use the space allocated for Txn.
  79:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****          case2  :  n < m    and Txn is not used    (n,m  : Transmit FIFO indexes)
  80:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****          --> Txn should be configured with the minimum space of 16 words
  81:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****      The FIFO is used optimally when used TxFIFOs are allocated in the top
  82:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****          of the FIFO.Ex: use EP1 and EP2 as IN instead of EP1 and EP3 as IN ones.
  83:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****      When DMA is used 3n * FIFO locations should be reserved for internal DMA registers */
  84:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
  85:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   Tx_Offset = hpcd->Instance->GRXFSIZ;
  48              		.loc 1 85 19
  49 0010 7B68     		ldr	r3, [r7, #4]
  50 0012 1B68     		ldr	r3, [r3]
  51              		.loc 1 85 13
  52 0014 5B6A     		ldr	r3, [r3, #36]
  53 0016 BB60     		str	r3, [r7, #8]
  86:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
  87:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   if (fifo == 0U)
  54              		.loc 1 87 6
  55 0018 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
  56 001a 002B     		cmp	r3, #0
  57 001c 07D1     		bne	.L2
  88:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   {
  89:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     hpcd->Instance->DIEPTXF0_HNPTXFSIZ = ((uint32_t)size << 16) | Tx_Offset;
  58              		.loc 1 89 43
  59 001e 3B88     		ldrh	r3, [r7]
  60              		.loc 1 89 58
  61 0020 1904     		lsls	r1, r3, #16
  62              		.loc 1 89 9
  63 0022 7B68     		ldr	r3, [r7, #4]
  64 0024 1B68     		ldr	r3, [r3]
  65              		.loc 1 89 65
  66 0026 BA68     		ldr	r2, [r7, #8]
  67 0028 0A43     		orrs	r2, r2, r1
  68              		.loc 1 89 40
  69 002a 9A62     		str	r2, [r3, #40]
  70 002c 28E0     		b	.L3
  71              	.L2:
  90:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   }
  91:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   else
  92:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   {
  93:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     Tx_Offset += (hpcd->Instance->DIEPTXF0_HNPTXFSIZ) >> 16;
  72              		.loc 1 93 23
  73 002e 7B68     		ldr	r3, [r7, #4]
  74 0030 1B68     		ldr	r3, [r3]
  75              		.loc 1 93 33
  76 0032 9B6A     		ldr	r3, [r3, #40]
  77              		.loc 1 93 55
  78 0034 1B0C     		lsrs	r3, r3, #16
  79              		.loc 1 93 15
ARM GAS  C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s 			page 4


  80 0036 BA68     		ldr	r2, [r7, #8]
  81 0038 1344     		add	r3, r3, r2
  82 003a BB60     		str	r3, [r7, #8]
  94:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     for (i = 0U; i < (fifo - 1U); i++)
  83              		.loc 1 94 12
  84 003c 0023     		movs	r3, #0
  85 003e FB73     		strb	r3, [r7, #15]
  86              		.loc 1 94 5
  87 0040 0DE0     		b	.L4
  88              	.L5:
  95:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     {
  96:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****       Tx_Offset += (hpcd->Instance->DIEPTXF[i] >> 16);
  89              		.loc 1 96 25
  90 0042 7B68     		ldr	r3, [r7, #4]
  91 0044 1A68     		ldr	r2, [r3]
  92              		.loc 1 96 44
  93 0046 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
  94 0048 4033     		adds	r3, r3, #64
  95 004a 9B00     		lsls	r3, r3, #2
  96 004c 1344     		add	r3, r3, r2
  97 004e 5B68     		ldr	r3, [r3, #4]
  98              		.loc 1 96 48
  99 0050 1B0C     		lsrs	r3, r3, #16
 100              		.loc 1 96 17
 101 0052 BA68     		ldr	r2, [r7, #8]
 102 0054 1344     		add	r3, r3, r2
 103 0056 BB60     		str	r3, [r7, #8]
  94:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     for (i = 0U; i < (fifo - 1U); i++)
 104              		.loc 1 94 36 discriminator 3
 105 0058 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 106 005a 0133     		adds	r3, r3, #1
 107 005c FB73     		strb	r3, [r7, #15]
 108              	.L4:
  94:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     for (i = 0U; i < (fifo - 1U); i++)
 109              		.loc 1 94 20 discriminator 1
 110 005e FA7B     		ldrb	r2, [r7, #15]	@ zero_extendqisi2
  94:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     for (i = 0U; i < (fifo - 1U); i++)
 111              		.loc 1 94 28 discriminator 1
 112 0060 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 113 0062 013B     		subs	r3, r3, #1
  94:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     for (i = 0U; i < (fifo - 1U); i++)
 114              		.loc 1 94 20 discriminator 1
 115 0064 9A42     		cmp	r2, r3
 116 0066 ECD3     		bcc	.L5
  97:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     }
  98:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
  99:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     /* Multiply Tx_Size by 2 to get higher performance */
 100:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     hpcd->Instance->DIEPTXF[fifo - 1U] = ((uint32_t)size << 16) | Tx_Offset;
 117              		.loc 1 100 43
 118 0068 3B88     		ldrh	r3, [r7]
 119              		.loc 1 100 58
 120 006a 1804     		lsls	r0, r3, #16
 121              		.loc 1 100 9
 122 006c 7B68     		ldr	r3, [r7, #4]
 123 006e 1968     		ldr	r1, [r3]
 124              		.loc 1 100 34
 125 0070 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
ARM GAS  C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s 			page 5


 126 0072 013B     		subs	r3, r3, #1
 127              		.loc 1 100 65
 128 0074 BA68     		ldr	r2, [r7, #8]
 129 0076 0243     		orrs	r2, r2, r0
 130              		.loc 1 100 40
 131 0078 4033     		adds	r3, r3, #64
 132 007a 9B00     		lsls	r3, r3, #2
 133 007c 0B44     		add	r3, r3, r1
 134 007e 5A60     		str	r2, [r3, #4]
 135              	.L3:
 101:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   }
 102:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 103:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   return HAL_OK;
 136              		.loc 1 103 10
 137 0080 0023     		movs	r3, #0
 104:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** }
 138              		.loc 1 104 1
 139 0082 1846     		mov	r0, r3
 140 0084 1437     		adds	r7, r7, #20
 141              	.LCFI3:
 142              		.cfi_def_cfa_offset 4
 143 0086 BD46     		mov	sp, r7
 144              	.LCFI4:
 145              		.cfi_def_cfa_register 13
 146              		@ sp needed
 147 0088 5DF8047B 		ldr	r7, [sp], #4
 148              	.LCFI5:
 149              		.cfi_restore 7
 150              		.cfi_def_cfa_offset 0
 151 008c 7047     		bx	lr
 152              		.cfi_endproc
 153              	.LFE144:
 155              		.section	.text.HAL_PCDEx_SetRxFiFo,"ax",%progbits
 156              		.align	1
 157              		.global	HAL_PCDEx_SetRxFiFo
 158              		.syntax unified
 159              		.thumb
 160              		.thumb_func
 162              	HAL_PCDEx_SetRxFiFo:
 163              	.LFB145:
 105:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 106:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** /**
 107:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @brief  Set Rx FIFO
 108:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @param  hpcd PCD handle
 109:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @param  size Size of Rx fifo
 110:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @retval HAL status
 111:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   */
 112:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** HAL_StatusTypeDef HAL_PCDEx_SetRxFiFo(PCD_HandleTypeDef *hpcd, uint16_t size)
 113:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** {
 164              		.loc 1 113 1
 165              		.cfi_startproc
 166              		@ args = 0, pretend = 0, frame = 8
 167              		@ frame_needed = 1, uses_anonymous_args = 0
 168              		@ link register save eliminated.
 169 0000 80B4     		push	{r7}
 170              	.LCFI6:
 171              		.cfi_def_cfa_offset 4
ARM GAS  C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s 			page 6


 172              		.cfi_offset 7, -4
 173 0002 83B0     		sub	sp, sp, #12
 174              	.LCFI7:
 175              		.cfi_def_cfa_offset 16
 176 0004 00AF     		add	r7, sp, #0
 177              	.LCFI8:
 178              		.cfi_def_cfa_register 7
 179 0006 7860     		str	r0, [r7, #4]
 180 0008 0B46     		mov	r3, r1
 181 000a 7B80     		strh	r3, [r7, #2]	@ movhi
 114:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   hpcd->Instance->GRXFSIZ = size;
 182              		.loc 1 114 7
 183 000c 7B68     		ldr	r3, [r7, #4]
 184 000e 1B68     		ldr	r3, [r3]
 185              		.loc 1 114 27
 186 0010 7A88     		ldrh	r2, [r7, #2]
 187 0012 5A62     		str	r2, [r3, #36]
 115:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 116:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   return HAL_OK;
 188              		.loc 1 116 10
 189 0014 0023     		movs	r3, #0
 117:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** }
 190              		.loc 1 117 1
 191 0016 1846     		mov	r0, r3
 192 0018 0C37     		adds	r7, r7, #12
 193              	.LCFI9:
 194              		.cfi_def_cfa_offset 4
 195 001a BD46     		mov	sp, r7
 196              	.LCFI10:
 197              		.cfi_def_cfa_register 13
 198              		@ sp needed
 199 001c 5DF8047B 		ldr	r7, [sp], #4
 200              	.LCFI11:
 201              		.cfi_restore 7
 202              		.cfi_def_cfa_offset 0
 203 0020 7047     		bx	lr
 204              		.cfi_endproc
 205              	.LFE145:
 207              		.section	.text.HAL_PCDEx_ActivateLPM,"ax",%progbits
 208              		.align	1
 209              		.global	HAL_PCDEx_ActivateLPM
 210              		.syntax unified
 211              		.thumb
 212              		.thumb_func
 214              	HAL_PCDEx_ActivateLPM:
 215              	.LFB146:
 118:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 119:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** /**
 120:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @brief  Activate LPM feature.
 121:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @param  hpcd PCD handle
 122:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @retval HAL status
 123:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   */
 124:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** HAL_StatusTypeDef HAL_PCDEx_ActivateLPM(PCD_HandleTypeDef *hpcd)
 125:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** {
 216              		.loc 1 125 1
 217              		.cfi_startproc
 218              		@ args = 0, pretend = 0, frame = 16
ARM GAS  C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s 			page 7


 219              		@ frame_needed = 1, uses_anonymous_args = 0
 220              		@ link register save eliminated.
 221 0000 80B4     		push	{r7}
 222              	.LCFI12:
 223              		.cfi_def_cfa_offset 4
 224              		.cfi_offset 7, -4
 225 0002 85B0     		sub	sp, sp, #20
 226              	.LCFI13:
 227              		.cfi_def_cfa_offset 24
 228 0004 00AF     		add	r7, sp, #0
 229              	.LCFI14:
 230              		.cfi_def_cfa_register 7
 231 0006 7860     		str	r0, [r7, #4]
 126:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   USB_OTG_GlobalTypeDef *USBx = hpcd->Instance;
 232              		.loc 1 126 26
 233 0008 7B68     		ldr	r3, [r7, #4]
 234 000a 1B68     		ldr	r3, [r3]
 235 000c FB60     		str	r3, [r7, #12]
 127:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 128:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   hpcd->lpm_active = 1U;
 236              		.loc 1 128 20
 237 000e 7B68     		ldr	r3, [r7, #4]
 238 0010 0122     		movs	r2, #1
 239 0012 C3F8D824 		str	r2, [r3, #1240]
 129:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   hpcd->LPM_State = LPM_L0;
 240              		.loc 1 129 19
 241 0016 7B68     		ldr	r3, [r7, #4]
 242 0018 0022     		movs	r2, #0
 243 001a 83F8CC24 		strb	r2, [r3, #1228]
 130:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   USBx->GINTMSK |= USB_OTG_GINTMSK_LPMINTM;
 244              		.loc 1 130 7
 245 001e FB68     		ldr	r3, [r7, #12]
 246 0020 9B69     		ldr	r3, [r3, #24]
 247              		.loc 1 130 17
 248 0022 43F00062 		orr	r2, r3, #134217728
 249 0026 FB68     		ldr	r3, [r7, #12]
 250 0028 9A61     		str	r2, [r3, #24]
 131:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   USBx->GLPMCFG |= (USB_OTG_GLPMCFG_LPMEN | USB_OTG_GLPMCFG_LPMACK | USB_OTG_GLPMCFG_ENBESL);
 251              		.loc 1 131 7
 252 002a FB68     		ldr	r3, [r7, #12]
 253 002c 5A6D     		ldr	r2, [r3, #84]
 254              		.loc 1 131 17
 255 002e 054B     		ldr	r3, .L11
 256 0030 1343     		orrs	r3, r3, r2
 257 0032 FA68     		ldr	r2, [r7, #12]
 258 0034 5365     		str	r3, [r2, #84]
 132:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 133:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   return HAL_OK;
 259              		.loc 1 133 10
 260 0036 0023     		movs	r3, #0
 134:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** }
 261              		.loc 1 134 1
 262 0038 1846     		mov	r0, r3
 263 003a 1437     		adds	r7, r7, #20
 264              	.LCFI15:
 265              		.cfi_def_cfa_offset 4
 266 003c BD46     		mov	sp, r7
ARM GAS  C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s 			page 8


 267              	.LCFI16:
 268              		.cfi_def_cfa_register 13
 269              		@ sp needed
 270 003e 5DF8047B 		ldr	r7, [sp], #4
 271              	.LCFI17:
 272              		.cfi_restore 7
 273              		.cfi_def_cfa_offset 0
 274 0042 7047     		bx	lr
 275              	.L12:
 276              		.align	2
 277              	.L11:
 278 0044 03000010 		.word	268435459
 279              		.cfi_endproc
 280              	.LFE146:
 282              		.section	.text.HAL_PCDEx_DeActivateLPM,"ax",%progbits
 283              		.align	1
 284              		.global	HAL_PCDEx_DeActivateLPM
 285              		.syntax unified
 286              		.thumb
 287              		.thumb_func
 289              	HAL_PCDEx_DeActivateLPM:
 290              	.LFB147:
 135:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 136:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** /**
 137:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @brief  Deactivate LPM feature.
 138:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @param  hpcd PCD handle
 139:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @retval HAL status
 140:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   */
 141:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** HAL_StatusTypeDef HAL_PCDEx_DeActivateLPM(PCD_HandleTypeDef *hpcd)
 142:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** {
 291              		.loc 1 142 1
 292              		.cfi_startproc
 293              		@ args = 0, pretend = 0, frame = 16
 294              		@ frame_needed = 1, uses_anonymous_args = 0
 295              		@ link register save eliminated.
 296 0000 80B4     		push	{r7}
 297              	.LCFI18:
 298              		.cfi_def_cfa_offset 4
 299              		.cfi_offset 7, -4
 300 0002 85B0     		sub	sp, sp, #20
 301              	.LCFI19:
 302              		.cfi_def_cfa_offset 24
 303 0004 00AF     		add	r7, sp, #0
 304              	.LCFI20:
 305              		.cfi_def_cfa_register 7
 306 0006 7860     		str	r0, [r7, #4]
 143:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   USB_OTG_GlobalTypeDef *USBx = hpcd->Instance;
 307              		.loc 1 143 26
 308 0008 7B68     		ldr	r3, [r7, #4]
 309 000a 1B68     		ldr	r3, [r3]
 310 000c FB60     		str	r3, [r7, #12]
 144:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 145:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   hpcd->lpm_active = 0U;
 311              		.loc 1 145 20
 312 000e 7B68     		ldr	r3, [r7, #4]
 313 0010 0022     		movs	r2, #0
 314 0012 C3F8D824 		str	r2, [r3, #1240]
ARM GAS  C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s 			page 9


 146:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   USBx->GINTMSK &= ~USB_OTG_GINTMSK_LPMINTM;
 315              		.loc 1 146 7
 316 0016 FB68     		ldr	r3, [r7, #12]
 317 0018 9B69     		ldr	r3, [r3, #24]
 318              		.loc 1 146 17
 319 001a 23F00062 		bic	r2, r3, #134217728
 320 001e FB68     		ldr	r3, [r7, #12]
 321 0020 9A61     		str	r2, [r3, #24]
 147:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   USBx->GLPMCFG &= ~(USB_OTG_GLPMCFG_LPMEN | USB_OTG_GLPMCFG_LPMACK | USB_OTG_GLPMCFG_ENBESL);
 322              		.loc 1 147 7
 323 0022 FB68     		ldr	r3, [r7, #12]
 324 0024 5A6D     		ldr	r2, [r3, #84]
 325              		.loc 1 147 17
 326 0026 054B     		ldr	r3, .L15
 327 0028 1340     		ands	r3, r3, r2
 328 002a FA68     		ldr	r2, [r7, #12]
 329 002c 5365     		str	r3, [r2, #84]
 148:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 149:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   return HAL_OK;
 330              		.loc 1 149 10
 331 002e 0023     		movs	r3, #0
 150:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** }
 332              		.loc 1 150 1
 333 0030 1846     		mov	r0, r3
 334 0032 1437     		adds	r7, r7, #20
 335              	.LCFI21:
 336              		.cfi_def_cfa_offset 4
 337 0034 BD46     		mov	sp, r7
 338              	.LCFI22:
 339              		.cfi_def_cfa_register 13
 340              		@ sp needed
 341 0036 5DF8047B 		ldr	r7, [sp], #4
 342              	.LCFI23:
 343              		.cfi_restore 7
 344              		.cfi_def_cfa_offset 0
 345 003a 7047     		bx	lr
 346              	.L16:
 347              		.align	2
 348              	.L15:
 349 003c FCFFFFEF 		.word	-268435460
 350              		.cfi_endproc
 351              	.LFE147:
 353              		.section	.text.HAL_PCDEx_BCD_VBUSDetect,"ax",%progbits
 354              		.align	1
 355              		.global	HAL_PCDEx_BCD_VBUSDetect
 356              		.syntax unified
 357              		.thumb
 358              		.thumb_func
 360              	HAL_PCDEx_BCD_VBUSDetect:
 361              	.LFB148:
 151:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 152:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 153:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** /**
 154:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @brief  Handle BatteryCharging Process.
 155:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @param  hpcd PCD handle
 156:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @retval HAL status
 157:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   */
ARM GAS  C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s 			page 10


 158:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** void HAL_PCDEx_BCD_VBUSDetect(PCD_HandleTypeDef *hpcd)
 159:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** {
 362              		.loc 1 159 1
 363              		.cfi_startproc
 364              		@ args = 0, pretend = 0, frame = 16
 365              		@ frame_needed = 1, uses_anonymous_args = 0
 366 0000 80B5     		push	{r7, lr}
 367              	.LCFI24:
 368              		.cfi_def_cfa_offset 8
 369              		.cfi_offset 7, -8
 370              		.cfi_offset 14, -4
 371 0002 84B0     		sub	sp, sp, #16
 372              	.LCFI25:
 373              		.cfi_def_cfa_offset 24
 374 0004 00AF     		add	r7, sp, #0
 375              	.LCFI26:
 376              		.cfi_def_cfa_register 7
 377 0006 7860     		str	r0, [r7, #4]
 160:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   USB_OTG_GlobalTypeDef *USBx = hpcd->Instance;
 378              		.loc 1 160 26
 379 0008 7B68     		ldr	r3, [r7, #4]
 380 000a 1B68     		ldr	r3, [r3]
 381 000c FB60     		str	r3, [r7, #12]
 161:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   uint32_t tickstart = HAL_GetTick();
 382              		.loc 1 161 24
 383 000e FFF7FEFF 		bl	HAL_GetTick
 384 0012 B860     		str	r0, [r7, #8]
 162:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 163:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   /* Enable DCD : Data Contact Detect */
 164:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   USBx->GCCFG |= USB_OTG_GCCFG_DCDEN;
 385              		.loc 1 164 7
 386 0014 FB68     		ldr	r3, [r7, #12]
 387 0016 9B6B     		ldr	r3, [r3, #56]
 388              		.loc 1 164 15
 389 0018 43F48022 		orr	r2, r3, #262144
 390 001c FB68     		ldr	r3, [r7, #12]
 391 001e 9A63     		str	r2, [r3, #56]
 165:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 166:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   /* Wait for Min DCD Timeout */
 167:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   HAL_Delay(300U);
 392              		.loc 1 167 3
 393 0020 4FF49670 		mov	r0, #300
 394 0024 FFF7FEFF 		bl	HAL_Delay
 168:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 169:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   /* Check Detect flag */
 170:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   if ((USBx->GCCFG & USB_OTG_GCCFG_DCDET) == USB_OTG_GCCFG_DCDET)
 395              		.loc 1 170 12
 396 0028 FB68     		ldr	r3, [r7, #12]
 397 002a 9B6B     		ldr	r3, [r3, #56]
 398              		.loc 1 170 20
 399 002c 03F00103 		and	r3, r3, #1
 400              		.loc 1 170 6
 401 0030 012B     		cmp	r3, #1
 402 0032 03D1     		bne	.L18
 171:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   {
 172:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** #if (USE_HAL_PCD_REGISTER_CALLBACKS == 1U)
 173:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     hpcd->BCDCallback(hpcd, PCD_BCD_CONTACT_DETECTION);
ARM GAS  C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s 			page 11


 174:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** #else
 175:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     HAL_PCDEx_BCD_Callback(hpcd, PCD_BCD_CONTACT_DETECTION);
 403              		.loc 1 175 5
 404 0034 FE21     		movs	r1, #254
 405 0036 7868     		ldr	r0, [r7, #4]
 406 0038 FFF7FEFF 		bl	HAL_PCDEx_BCD_Callback
 407              	.L18:
 176:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** #endif /* USE_HAL_PCD_REGISTER_CALLBACKS */
 177:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   }
 178:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 179:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   /* Primary detection: checks if connected to Standard Downstream Port
 180:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   (without charging capability) */
 181:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   USBx->GCCFG &= ~USB_OTG_GCCFG_DCDEN;
 408              		.loc 1 181 7
 409 003c FB68     		ldr	r3, [r7, #12]
 410 003e 9B6B     		ldr	r3, [r3, #56]
 411              		.loc 1 181 15
 412 0040 23F48022 		bic	r2, r3, #262144
 413 0044 FB68     		ldr	r3, [r7, #12]
 414 0046 9A63     		str	r2, [r3, #56]
 182:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   HAL_Delay(50U);
 415              		.loc 1 182 3
 416 0048 3220     		movs	r0, #50
 417 004a FFF7FEFF 		bl	HAL_Delay
 183:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   USBx->GCCFG |= USB_OTG_GCCFG_PDEN;
 418              		.loc 1 183 7
 419 004e FB68     		ldr	r3, [r7, #12]
 420 0050 9B6B     		ldr	r3, [r3, #56]
 421              		.loc 1 183 15
 422 0052 43F40022 		orr	r2, r3, #524288
 423 0056 FB68     		ldr	r3, [r7, #12]
 424 0058 9A63     		str	r2, [r3, #56]
 184:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   HAL_Delay(50U);
 425              		.loc 1 184 3
 426 005a 3220     		movs	r0, #50
 427 005c FFF7FEFF 		bl	HAL_Delay
 185:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 186:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   if ((USBx->GCCFG & USB_OTG_GCCFG_PDET) == 0U)
 428              		.loc 1 186 12
 429 0060 FB68     		ldr	r3, [r7, #12]
 430 0062 9B6B     		ldr	r3, [r3, #56]
 431              		.loc 1 186 20
 432 0064 03F00203 		and	r3, r3, #2
 433              		.loc 1 186 6
 434 0068 002B     		cmp	r3, #0
 435 006a 04D1     		bne	.L19
 187:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   {
 188:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     /* Case of Standard Downstream Port */
 189:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** #if (USE_HAL_PCD_REGISTER_CALLBACKS == 1U)
 190:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     hpcd->BCDCallback(hpcd, PCD_BCD_STD_DOWNSTREAM_PORT);
 191:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** #else
 192:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     HAL_PCDEx_BCD_Callback(hpcd, PCD_BCD_STD_DOWNSTREAM_PORT);
 436              		.loc 1 192 5
 437 006c FD21     		movs	r1, #253
 438 006e 7868     		ldr	r0, [r7, #4]
 439 0070 FFF7FEFF 		bl	HAL_PCDEx_BCD_Callback
 440 0074 20E0     		b	.L20
ARM GAS  C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s 			page 12


 441              	.L19:
 193:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** #endif /* USE_HAL_PCD_REGISTER_CALLBACKS */
 194:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   }
 195:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   else
 196:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   {
 197:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     /* start secondary detection to check connection to Charging Downstream
 198:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     Port or Dedicated Charging Port */
 199:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     USBx->GCCFG &= ~(USB_OTG_GCCFG_PDEN);
 442              		.loc 1 199 9
 443 0076 FB68     		ldr	r3, [r7, #12]
 444 0078 9B6B     		ldr	r3, [r3, #56]
 445              		.loc 1 199 17
 446 007a 23F40022 		bic	r2, r3, #524288
 447 007e FB68     		ldr	r3, [r7, #12]
 448 0080 9A63     		str	r2, [r3, #56]
 200:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     HAL_Delay(50U);
 449              		.loc 1 200 5
 450 0082 3220     		movs	r0, #50
 451 0084 FFF7FEFF 		bl	HAL_Delay
 201:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     USBx->GCCFG |= USB_OTG_GCCFG_SDEN;
 452              		.loc 1 201 9
 453 0088 FB68     		ldr	r3, [r7, #12]
 454 008a 9B6B     		ldr	r3, [r3, #56]
 455              		.loc 1 201 17
 456 008c 43F48012 		orr	r2, r3, #1048576
 457 0090 FB68     		ldr	r3, [r7, #12]
 458 0092 9A63     		str	r2, [r3, #56]
 202:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     HAL_Delay(50U);
 459              		.loc 1 202 5
 460 0094 3220     		movs	r0, #50
 461 0096 FFF7FEFF 		bl	HAL_Delay
 203:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 204:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     if ((USBx->GCCFG & USB_OTG_GCCFG_SDET) == USB_OTG_GCCFG_SDET)
 462              		.loc 1 204 14
 463 009a FB68     		ldr	r3, [r7, #12]
 464 009c 9B6B     		ldr	r3, [r3, #56]
 465              		.loc 1 204 22
 466 009e 03F00403 		and	r3, r3, #4
 467              		.loc 1 204 8
 468 00a2 042B     		cmp	r3, #4
 469 00a4 04D1     		bne	.L21
 205:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     {
 206:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****       /* case Dedicated Charging Port  */
 207:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** #if (USE_HAL_PCD_REGISTER_CALLBACKS == 1U)
 208:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****       hpcd->BCDCallback(hpcd, PCD_BCD_DEDICATED_CHARGING_PORT);
 209:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** #else
 210:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****       HAL_PCDEx_BCD_Callback(hpcd, PCD_BCD_DEDICATED_CHARGING_PORT);
 470              		.loc 1 210 7
 471 00a6 FB21     		movs	r1, #251
 472 00a8 7868     		ldr	r0, [r7, #4]
 473 00aa FFF7FEFF 		bl	HAL_PCDEx_BCD_Callback
 474 00ae 03E0     		b	.L20
 475              	.L21:
 211:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** #endif /* USE_HAL_PCD_REGISTER_CALLBACKS */
 212:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     }
 213:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     else
 214:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     {
ARM GAS  C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s 			page 13


 215:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****       /* case Charging Downstream Port */
 216:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** #if (USE_HAL_PCD_REGISTER_CALLBACKS == 1U)
 217:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****       hpcd->BCDCallback(hpcd, PCD_BCD_CHARGING_DOWNSTREAM_PORT);
 218:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** #else
 219:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****       HAL_PCDEx_BCD_Callback(hpcd, PCD_BCD_CHARGING_DOWNSTREAM_PORT);
 476              		.loc 1 219 7
 477 00b0 FC21     		movs	r1, #252
 478 00b2 7868     		ldr	r0, [r7, #4]
 479 00b4 FFF7FEFF 		bl	HAL_PCDEx_BCD_Callback
 480              	.L20:
 220:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** #endif /* USE_HAL_PCD_REGISTER_CALLBACKS */
 221:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     }
 222:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   }
 223:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 224:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   /* Battery Charging capability discovery finished */
 225:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   (void)HAL_PCDEx_DeActivateBCD(hpcd);
 481              		.loc 1 225 9
 482 00b8 7868     		ldr	r0, [r7, #4]
 483 00ba FFF7FEFF 		bl	HAL_PCDEx_DeActivateBCD
 226:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 227:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   /* Check for the Timeout, else start USB Device */
 228:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   if ((HAL_GetTick() - tickstart) > 1000U)
 484              		.loc 1 228 8
 485 00be FFF7FEFF 		bl	HAL_GetTick
 486 00c2 0246     		mov	r2, r0
 487              		.loc 1 228 22 discriminator 1
 488 00c4 BB68     		ldr	r3, [r7, #8]
 489 00c6 D31A     		subs	r3, r2, r3
 490              		.loc 1 228 6 discriminator 1
 491 00c8 B3F57A7F 		cmp	r3, #1000
 492 00cc 04D9     		bls	.L22
 229:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   {
 230:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** #if (USE_HAL_PCD_REGISTER_CALLBACKS == 1U)
 231:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     hpcd->BCDCallback(hpcd, PCD_BCD_ERROR);
 232:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** #else
 233:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     HAL_PCDEx_BCD_Callback(hpcd, PCD_BCD_ERROR);
 493              		.loc 1 233 5
 494 00ce FF21     		movs	r1, #255
 495 00d0 7868     		ldr	r0, [r7, #4]
 496 00d2 FFF7FEFF 		bl	HAL_PCDEx_BCD_Callback
 234:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** #endif /* USE_HAL_PCD_REGISTER_CALLBACKS */
 235:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   }
 236:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   else
 237:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   {
 238:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** #if (USE_HAL_PCD_REGISTER_CALLBACKS == 1U)
 239:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     hpcd->BCDCallback(hpcd, PCD_BCD_DISCOVERY_COMPLETED);
 240:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** #else
 241:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****     HAL_PCDEx_BCD_Callback(hpcd, PCD_BCD_DISCOVERY_COMPLETED);
 242:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** #endif /* USE_HAL_PCD_REGISTER_CALLBACKS */
 243:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   }
 244:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** }
 497              		.loc 1 244 1
 498 00d6 03E0     		b	.L24
 499              	.L22:
 241:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** #endif /* USE_HAL_PCD_REGISTER_CALLBACKS */
 500              		.loc 1 241 5
 501 00d8 0021     		movs	r1, #0
ARM GAS  C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s 			page 14


 502 00da 7868     		ldr	r0, [r7, #4]
 503 00dc FFF7FEFF 		bl	HAL_PCDEx_BCD_Callback
 504              	.L24:
 505              		.loc 1 244 1
 506 00e0 00BF     		nop
 507 00e2 1037     		adds	r7, r7, #16
 508              	.LCFI27:
 509              		.cfi_def_cfa_offset 8
 510 00e4 BD46     		mov	sp, r7
 511              	.LCFI28:
 512              		.cfi_def_cfa_register 13
 513              		@ sp needed
 514 00e6 80BD     		pop	{r7, pc}
 515              		.cfi_endproc
 516              	.LFE148:
 518              		.section	.text.HAL_PCDEx_ActivateBCD,"ax",%progbits
 519              		.align	1
 520              		.global	HAL_PCDEx_ActivateBCD
 521              		.syntax unified
 522              		.thumb
 523              		.thumb_func
 525              	HAL_PCDEx_ActivateBCD:
 526              	.LFB149:
 245:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 246:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** /**
 247:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @brief  Activate BatteryCharging feature.
 248:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @param  hpcd PCD handle
 249:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @retval HAL status
 250:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   */
 251:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** HAL_StatusTypeDef HAL_PCDEx_ActivateBCD(PCD_HandleTypeDef *hpcd)
 252:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** {
 527              		.loc 1 252 1
 528              		.cfi_startproc
 529              		@ args = 0, pretend = 0, frame = 16
 530              		@ frame_needed = 1, uses_anonymous_args = 0
 531              		@ link register save eliminated.
 532 0000 80B4     		push	{r7}
 533              	.LCFI29:
 534              		.cfi_def_cfa_offset 4
 535              		.cfi_offset 7, -4
 536 0002 85B0     		sub	sp, sp, #20
 537              	.LCFI30:
 538              		.cfi_def_cfa_offset 24
 539 0004 00AF     		add	r7, sp, #0
 540              	.LCFI31:
 541              		.cfi_def_cfa_register 7
 542 0006 7860     		str	r0, [r7, #4]
 253:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   USB_OTG_GlobalTypeDef *USBx = hpcd->Instance;
 543              		.loc 1 253 26
 544 0008 7B68     		ldr	r3, [r7, #4]
 545 000a 1B68     		ldr	r3, [r3]
 546 000c FB60     		str	r3, [r7, #12]
 254:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 255:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   USBx->GCCFG &= ~(USB_OTG_GCCFG_PDEN);
 547              		.loc 1 255 7
 548 000e FB68     		ldr	r3, [r7, #12]
 549 0010 9B6B     		ldr	r3, [r3, #56]
ARM GAS  C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s 			page 15


 550              		.loc 1 255 15
 551 0012 23F40022 		bic	r2, r3, #524288
 552 0016 FB68     		ldr	r3, [r7, #12]
 553 0018 9A63     		str	r2, [r3, #56]
 256:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   USBx->GCCFG &= ~(USB_OTG_GCCFG_SDEN);
 554              		.loc 1 256 7
 555 001a FB68     		ldr	r3, [r7, #12]
 556 001c 9B6B     		ldr	r3, [r3, #56]
 557              		.loc 1 256 15
 558 001e 23F48012 		bic	r2, r3, #1048576
 559 0022 FB68     		ldr	r3, [r7, #12]
 560 0024 9A63     		str	r2, [r3, #56]
 257:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 258:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   /* Power Down USB transceiver  */
 259:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   USBx->GCCFG &= ~(USB_OTG_GCCFG_PWRDWN);
 561              		.loc 1 259 7
 562 0026 FB68     		ldr	r3, [r7, #12]
 563 0028 9B6B     		ldr	r3, [r3, #56]
 564              		.loc 1 259 15
 565 002a 23F48032 		bic	r2, r3, #65536
 566 002e FB68     		ldr	r3, [r7, #12]
 567 0030 9A63     		str	r2, [r3, #56]
 260:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 261:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   /* Enable Battery charging */
 262:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   USBx->GCCFG |= USB_OTG_GCCFG_BCDEN;
 568              		.loc 1 262 7
 569 0032 FB68     		ldr	r3, [r7, #12]
 570 0034 9B6B     		ldr	r3, [r3, #56]
 571              		.loc 1 262 15
 572 0036 43F40032 		orr	r2, r3, #131072
 573 003a FB68     		ldr	r3, [r7, #12]
 574 003c 9A63     		str	r2, [r3, #56]
 263:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 264:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   hpcd->battery_charging_active = 1U;
 575              		.loc 1 264 33
 576 003e 7B68     		ldr	r3, [r7, #4]
 577 0040 0122     		movs	r2, #1
 578 0042 C3F8DC24 		str	r2, [r3, #1244]
 265:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 266:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   return HAL_OK;
 579              		.loc 1 266 10
 580 0046 0023     		movs	r3, #0
 267:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** }
 581              		.loc 1 267 1
 582 0048 1846     		mov	r0, r3
 583 004a 1437     		adds	r7, r7, #20
 584              	.LCFI32:
 585              		.cfi_def_cfa_offset 4
 586 004c BD46     		mov	sp, r7
 587              	.LCFI33:
 588              		.cfi_def_cfa_register 13
 589              		@ sp needed
 590 004e 5DF8047B 		ldr	r7, [sp], #4
 591              	.LCFI34:
 592              		.cfi_restore 7
 593              		.cfi_def_cfa_offset 0
 594 0052 7047     		bx	lr
ARM GAS  C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s 			page 16


 595              		.cfi_endproc
 596              	.LFE149:
 598              		.section	.text.HAL_PCDEx_DeActivateBCD,"ax",%progbits
 599              		.align	1
 600              		.global	HAL_PCDEx_DeActivateBCD
 601              		.syntax unified
 602              		.thumb
 603              		.thumb_func
 605              	HAL_PCDEx_DeActivateBCD:
 606              	.LFB150:
 268:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 269:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** /**
 270:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @brief  Deactivate BatteryCharging feature.
 271:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @param  hpcd PCD handle
 272:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @retval HAL status
 273:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   */
 274:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** HAL_StatusTypeDef HAL_PCDEx_DeActivateBCD(PCD_HandleTypeDef *hpcd)
 275:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** {
 607              		.loc 1 275 1
 608              		.cfi_startproc
 609              		@ args = 0, pretend = 0, frame = 16
 610              		@ frame_needed = 1, uses_anonymous_args = 0
 611              		@ link register save eliminated.
 612 0000 80B4     		push	{r7}
 613              	.LCFI35:
 614              		.cfi_def_cfa_offset 4
 615              		.cfi_offset 7, -4
 616 0002 85B0     		sub	sp, sp, #20
 617              	.LCFI36:
 618              		.cfi_def_cfa_offset 24
 619 0004 00AF     		add	r7, sp, #0
 620              	.LCFI37:
 621              		.cfi_def_cfa_register 7
 622 0006 7860     		str	r0, [r7, #4]
 276:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   USB_OTG_GlobalTypeDef *USBx = hpcd->Instance;
 623              		.loc 1 276 26
 624 0008 7B68     		ldr	r3, [r7, #4]
 625 000a 1B68     		ldr	r3, [r3]
 626 000c FB60     		str	r3, [r7, #12]
 277:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 278:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   USBx->GCCFG &= ~(USB_OTG_GCCFG_SDEN);
 627              		.loc 1 278 7
 628 000e FB68     		ldr	r3, [r7, #12]
 629 0010 9B6B     		ldr	r3, [r3, #56]
 630              		.loc 1 278 15
 631 0012 23F48012 		bic	r2, r3, #1048576
 632 0016 FB68     		ldr	r3, [r7, #12]
 633 0018 9A63     		str	r2, [r3, #56]
 279:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   USBx->GCCFG &= ~(USB_OTG_GCCFG_PDEN);
 634              		.loc 1 279 7
 635 001a FB68     		ldr	r3, [r7, #12]
 636 001c 9B6B     		ldr	r3, [r3, #56]
 637              		.loc 1 279 15
 638 001e 23F40022 		bic	r2, r3, #524288
 639 0022 FB68     		ldr	r3, [r7, #12]
 640 0024 9A63     		str	r2, [r3, #56]
 280:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
ARM GAS  C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s 			page 17


 281:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   /* Disable Battery charging */
 282:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   USBx->GCCFG &= ~(USB_OTG_GCCFG_BCDEN);
 641              		.loc 1 282 7
 642 0026 FB68     		ldr	r3, [r7, #12]
 643 0028 9B6B     		ldr	r3, [r3, #56]
 644              		.loc 1 282 15
 645 002a 23F40032 		bic	r2, r3, #131072
 646 002e FB68     		ldr	r3, [r7, #12]
 647 0030 9A63     		str	r2, [r3, #56]
 283:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 284:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   hpcd->battery_charging_active = 0U;
 648              		.loc 1 284 33
 649 0032 7B68     		ldr	r3, [r7, #4]
 650 0034 0022     		movs	r2, #0
 651 0036 C3F8DC24 		str	r2, [r3, #1244]
 285:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 286:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   return HAL_OK;
 652              		.loc 1 286 10
 653 003a 0023     		movs	r3, #0
 287:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** }
 654              		.loc 1 287 1
 655 003c 1846     		mov	r0, r3
 656 003e 1437     		adds	r7, r7, #20
 657              	.LCFI38:
 658              		.cfi_def_cfa_offset 4
 659 0040 BD46     		mov	sp, r7
 660              	.LCFI39:
 661              		.cfi_def_cfa_register 13
 662              		@ sp needed
 663 0042 5DF8047B 		ldr	r7, [sp], #4
 664              	.LCFI40:
 665              		.cfi_restore 7
 666              		.cfi_def_cfa_offset 0
 667 0046 7047     		bx	lr
 668              		.cfi_endproc
 669              	.LFE150:
 671              		.section	.text.HAL_PCDEx_LPM_Callback,"ax",%progbits
 672              		.align	1
 673              		.weak	HAL_PCDEx_LPM_Callback
 674              		.syntax unified
 675              		.thumb
 676              		.thumb_func
 678              	HAL_PCDEx_LPM_Callback:
 679              	.LFB151:
 288:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 289:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** #endif /* defined (USB_OTG_FS) || defined (USB_OTG_HS) */
 290:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 291:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** /**
 292:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @brief  Send LPM message to user layer callback.
 293:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @param  hpcd PCD handle
 294:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @param  msg LPM message
 295:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @retval HAL status
 296:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   */
 297:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** __weak void HAL_PCDEx_LPM_Callback(PCD_HandleTypeDef *hpcd, PCD_LPM_MsgTypeDef msg)
 298:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** {
 680              		.loc 1 298 1
 681              		.cfi_startproc
ARM GAS  C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s 			page 18


 682              		@ args = 0, pretend = 0, frame = 8
 683              		@ frame_needed = 1, uses_anonymous_args = 0
 684              		@ link register save eliminated.
 685 0000 80B4     		push	{r7}
 686              	.LCFI41:
 687              		.cfi_def_cfa_offset 4
 688              		.cfi_offset 7, -4
 689 0002 83B0     		sub	sp, sp, #12
 690              	.LCFI42:
 691              		.cfi_def_cfa_offset 16
 692 0004 00AF     		add	r7, sp, #0
 693              	.LCFI43:
 694              		.cfi_def_cfa_register 7
 695 0006 7860     		str	r0, [r7, #4]
 696 0008 0B46     		mov	r3, r1
 697 000a FB70     		strb	r3, [r7, #3]
 299:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   /* Prevent unused argument(s) compilation warning */
 300:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   UNUSED(hpcd);
 301:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   UNUSED(msg);
 302:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 303:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   /* NOTE : This function should not be modified, when the callback is needed,
 304:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****             the HAL_PCDEx_LPM_Callback could be implemented in the user file
 305:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****    */
 306:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** }
 698              		.loc 1 306 1
 699 000c 00BF     		nop
 700 000e 0C37     		adds	r7, r7, #12
 701              	.LCFI44:
 702              		.cfi_def_cfa_offset 4
 703 0010 BD46     		mov	sp, r7
 704              	.LCFI45:
 705              		.cfi_def_cfa_register 13
 706              		@ sp needed
 707 0012 5DF8047B 		ldr	r7, [sp], #4
 708              	.LCFI46:
 709              		.cfi_restore 7
 710              		.cfi_def_cfa_offset 0
 711 0016 7047     		bx	lr
 712              		.cfi_endproc
 713              	.LFE151:
 715              		.section	.text.HAL_PCDEx_BCD_Callback,"ax",%progbits
 716              		.align	1
 717              		.weak	HAL_PCDEx_BCD_Callback
 718              		.syntax unified
 719              		.thumb
 720              		.thumb_func
 722              	HAL_PCDEx_BCD_Callback:
 723              	.LFB152:
 307:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 308:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** /**
 309:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @brief  Send BatteryCharging message to user layer callback.
 310:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @param  hpcd PCD handle
 311:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @param  msg LPM message
 312:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   * @retval HAL status
 313:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   */
 314:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** __weak void HAL_PCDEx_BCD_Callback(PCD_HandleTypeDef *hpcd, PCD_BCD_MsgTypeDef msg)
 315:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** {
ARM GAS  C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s 			page 19


 724              		.loc 1 315 1
 725              		.cfi_startproc
 726              		@ args = 0, pretend = 0, frame = 8
 727              		@ frame_needed = 1, uses_anonymous_args = 0
 728              		@ link register save eliminated.
 729 0000 80B4     		push	{r7}
 730              	.LCFI47:
 731              		.cfi_def_cfa_offset 4
 732              		.cfi_offset 7, -4
 733 0002 83B0     		sub	sp, sp, #12
 734              	.LCFI48:
 735              		.cfi_def_cfa_offset 16
 736 0004 00AF     		add	r7, sp, #0
 737              	.LCFI49:
 738              		.cfi_def_cfa_register 7
 739 0006 7860     		str	r0, [r7, #4]
 740 0008 0B46     		mov	r3, r1
 741 000a FB70     		strb	r3, [r7, #3]
 316:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   /* Prevent unused argument(s) compilation warning */
 317:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   UNUSED(hpcd);
 318:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   UNUSED(msg);
 319:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** 
 320:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****   /* NOTE : This function should not be modified, when the callback is needed,
 321:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****             the HAL_PCDEx_BCD_Callback could be implemented in the user file
 322:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c ****    */
 323:Drivers/STM32H7xx_HAL_Driver/Src/stm32h7xx_hal_pcd_ex.c **** }
 742              		.loc 1 323 1
 743 000c 00BF     		nop
 744 000e 0C37     		adds	r7, r7, #12
 745              	.LCFI50:
 746              		.cfi_def_cfa_offset 4
 747 0010 BD46     		mov	sp, r7
 748              	.LCFI51:
 749              		.cfi_def_cfa_register 13
 750              		@ sp needed
 751 0012 5DF8047B 		ldr	r7, [sp], #4
 752              	.LCFI52:
 753              		.cfi_restore 7
 754              		.cfi_def_cfa_offset 0
 755 0016 7047     		bx	lr
 756              		.cfi_endproc
 757              	.LFE152:
 759              		.text
 760              	.Letext0:
 761              		.file 2 "D:/MSYS2/mingw64/arm-none-eabi/include/machine/_default_types.h"
 762              		.file 3 "D:/MSYS2/mingw64/arm-none-eabi/include/sys/_stdint.h"
 763              		.file 4 "Drivers/CMSIS/Device/ST/STM32H7xx/Include/stm32h723xx.h"
 764              		.file 5 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_def.h"
 765              		.file 6 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_ll_usb.h"
 766              		.file 7 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_pcd.h"
 767              		.file 8 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal.h"
ARM GAS  C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s 			page 20


DEFINED SYMBOLS
                            *ABS*:00000000 stm32h7xx_hal_pcd_ex.c
C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s:20     .text.HAL_PCDEx_SetTxFiFo:00000000 $t
C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s:26     .text.HAL_PCDEx_SetTxFiFo:00000000 HAL_PCDEx_SetTxFiFo
C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s:156    .text.HAL_PCDEx_SetRxFiFo:00000000 $t
C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s:162    .text.HAL_PCDEx_SetRxFiFo:00000000 HAL_PCDEx_SetRxFiFo
C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s:208    .text.HAL_PCDEx_ActivateLPM:00000000 $t
C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s:214    .text.HAL_PCDEx_ActivateLPM:00000000 HAL_PCDEx_ActivateLPM
C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s:278    .text.HAL_PCDEx_ActivateLPM:00000044 $d
C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s:283    .text.HAL_PCDEx_DeActivateLPM:00000000 $t
C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s:289    .text.HAL_PCDEx_DeActivateLPM:00000000 HAL_PCDEx_DeActivateLPM
C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s:349    .text.HAL_PCDEx_DeActivateLPM:0000003c $d
C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s:354    .text.HAL_PCDEx_BCD_VBUSDetect:00000000 $t
C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s:360    .text.HAL_PCDEx_BCD_VBUSDetect:00000000 HAL_PCDEx_BCD_VBUSDetect
C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s:722    .text.HAL_PCDEx_BCD_Callback:00000000 HAL_PCDEx_BCD_Callback
C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s:605    .text.HAL_PCDEx_DeActivateBCD:00000000 HAL_PCDEx_DeActivateBCD
C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s:519    .text.HAL_PCDEx_ActivateBCD:00000000 $t
C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s:525    .text.HAL_PCDEx_ActivateBCD:00000000 HAL_PCDEx_ActivateBCD
C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s:599    .text.HAL_PCDEx_DeActivateBCD:00000000 $t
C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s:672    .text.HAL_PCDEx_LPM_Callback:00000000 $t
C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s:678    .text.HAL_PCDEx_LPM_Callback:00000000 HAL_PCDEx_LPM_Callback
C:\Users\23671\AppData\Local\Temp\ccMLoPBX.s:716    .text.HAL_PCDEx_BCD_Callback:00000000 $t

UNDEFINED SYMBOLS
HAL_GetTick
HAL_Delay
