ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 1


   1              		.cpu cortex-m7
   2              		.arch armv7e-m
   3              		.fpu fpv5-d16
   4              		.eabi_attribute 28, 1
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 6
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.file	"w25q64.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.file 1 "Drivers/Chip/w25q64/w25q64.c"
  19              		.section	.text.OSPI_W25Qxx_Init,"ax",%progbits
  20              		.align	1
  21              		.global	OSPI_W25Qxx_Init
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	OSPI_W25Qxx_Init:
  27              	.LFB144:
   1:Drivers/Chip/w25q64/w25q64.c **** #include "w25q64.h"
   2:Drivers/Chip/w25q64/w25q64.c **** 
   3:Drivers/Chip/w25q64/w25q64.c **** extern OSPI_HandleTypeDef hospi2;
   4:Drivers/Chip/w25q64/w25q64.c **** 
   5:Drivers/Chip/w25q64/w25q64.c **** /*************************************************************************************************
   6:Drivers/Chip/w25q64/w25q64.c ****  *	º¯ Êý Ãû: OSPI_W25Qxx_Init
   7:Drivers/Chip/w25q64/w25q64.c ****  *	Èë¿Ú²ÎÊý: ÎÞ
   8:Drivers/Chip/w25q64/w25q64.c ****  *	·µ »Ø Öµ: OSPI_W25Qxx_OK - ³õÊ¼»¯³É¹¦£¬W25Qxx_ERROR_INIT - ³õÊ¼»¯´íÎó
   9:Drivers/Chip/w25q64/w25q64.c ****  *	º¯Êý¹¦ÄÜ: ³õÊ¼»¯ OSPI ÅäÖÃ£¬¶ÁÈ¡W25Q64ID
  10:Drivers/Chip/w25q64/w25q64.c ****  *	Ëµ    Ã÷: ÎÞ
  11:Drivers/Chip/w25q64/w25q64.c ****  *************************************************************************************************/
  12:Drivers/Chip/w25q64/w25q64.c **** 
  13:Drivers/Chip/w25q64/w25q64.c **** int8_t OSPI_W25Qxx_Init(void)
  14:Drivers/Chip/w25q64/w25q64.c **** {
  28              		.loc 1 14 1
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 8
  31              		@ frame_needed = 1, uses_anonymous_args = 0
  32 0000 80B5     		push	{r7, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 7, -8
  36              		.cfi_offset 14, -4
  37 0002 82B0     		sub	sp, sp, #8
  38              	.LCFI1:
  39              		.cfi_def_cfa_offset 16
  40 0004 00AF     		add	r7, sp, #0
  41              	.LCFI2:
  42              		.cfi_def_cfa_register 7
  15:Drivers/Chip/w25q64/w25q64.c ****     uint32_t Device_ID; // Æ÷¼þID
  16:Drivers/Chip/w25q64/w25q64.c **** 
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 2


  17:Drivers/Chip/w25q64/w25q64.c ****     Device_ID = OSPI_W25Qxx_ReadID(); // ¶ÁÈ¡Æ÷¼þID
  43              		.loc 1 17 17
  44 0006 FFF7FEFF 		bl	OSPI_W25Qxx_ReadID
  45 000a 7860     		str	r0, [r7, #4]
  18:Drivers/Chip/w25q64/w25q64.c **** 
  19:Drivers/Chip/w25q64/w25q64.c ****     if (Device_ID == W25Qxx_FLASH_ID) // ½øÐÐÆ¥Åä
  46              		.loc 1 19 8
  47 000c 7B68     		ldr	r3, [r7, #4]
  48 000e 054A     		ldr	r2, .L4
  49 0010 9342     		cmp	r3, r2
  50 0012 01D1     		bne	.L2
  20:Drivers/Chip/w25q64/w25q64.c ****     {
  21:Drivers/Chip/w25q64/w25q64.c ****         //        printf ("W25Q64 OK,flash ID:%X\r\n",Device_ID);		// ³õÊ¼»¯³É¹¦
  22:Drivers/Chip/w25q64/w25q64.c ****         return OSPI_W25Qxx_OK; // ·µ»Ø³É¹¦±êÖ¾
  51              		.loc 1 22 16
  52 0014 0023     		movs	r3, #0
  53 0016 01E0     		b	.L3
  54              	.L2:
  23:Drivers/Chip/w25q64/w25q64.c ****     }
  24:Drivers/Chip/w25q64/w25q64.c ****     else
  25:Drivers/Chip/w25q64/w25q64.c ****     {
  26:Drivers/Chip/w25q64/w25q64.c ****         //        printf ("W25Q64 ERROR!!!!!  ID:%X\r\n",Device_ID);	// ³õÊ¼»¯Ê§°Ü
  27:Drivers/Chip/w25q64/w25q64.c ****         return W25Qxx_ERROR_INIT; // ·µ»Ø´íÎó±êÖ¾
  55              		.loc 1 27 16
  56 0018 4FF0FF33 		mov	r3, #-1
  57              	.L3:
  28:Drivers/Chip/w25q64/w25q64.c ****     }
  29:Drivers/Chip/w25q64/w25q64.c **** }
  58              		.loc 1 29 1
  59 001c 1846     		mov	r0, r3
  60 001e 0837     		adds	r7, r7, #8
  61              	.LCFI3:
  62              		.cfi_def_cfa_offset 8
  63 0020 BD46     		mov	sp, r7
  64              	.LCFI4:
  65              		.cfi_def_cfa_register 13
  66              		@ sp needed
  67 0022 80BD     		pop	{r7, pc}
  68              	.L5:
  69              		.align	2
  70              	.L4:
  71 0024 1740EF00 		.word	15679511
  72              		.cfi_endproc
  73              	.LFE144:
  75              		.section	.text.OSPI_W25Qxx_AutoPollingMemReady,"ax",%progbits
  76              		.align	1
  77              		.global	OSPI_W25Qxx_AutoPollingMemReady
  78              		.syntax unified
  79              		.thumb
  80              		.thumb_func
  82              	OSPI_W25Qxx_AutoPollingMemReady:
  83              	.LFB145:
  30:Drivers/Chip/w25q64/w25q64.c **** 
  31:Drivers/Chip/w25q64/w25q64.c **** /*************************************************************************************************
  32:Drivers/Chip/w25q64/w25q64.c ****  *	º¯ Êý Ãû: OSPI_W25Qxx_AutoPollingMemReady
  33:Drivers/Chip/w25q64/w25q64.c ****  *	Èë¿Ú²ÎÊý: ÎÞ
  34:Drivers/Chip/w25q64/w25q64.c ****  *	·µ »Ø Öµ: OSPI_W25Qxx_OK - Í¨ÐÅÕý³£½áÊø£¬W25Qxx_ERROR_AUTOPOLLING - ÂÖÑ¯µÈ´ýÎÞÏìÓ¦
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 3


  35:Drivers/Chip/w25q64/w25q64.c ****  *	º¯Êý¹¦ÄÜ: Ê¹ÓÃ×Ô¶¯ÂÖÑ¯±êÖ¾²éÑ¯£¬µÈ´ýÍ¨ÐÅ½áÊø
  36:Drivers/Chip/w25q64/w25q64.c ****  *	Ëµ    Ã÷: Ã¿Ò»´ÎÍ¨ÐÅ¶¼Ó¦¸Ãµ÷ÓÃ´Ëº¯Êý£¬µÈ´ýÍ¨ÐÅ½áÊø£¬±ÜÃâ´íÎóµÄ²Ù×÷
  37:Drivers/Chip/w25q64/w25q64.c ****  ******************************************************************************************FANKE***
  38:Drivers/Chip/w25q64/w25q64.c **** 
  39:Drivers/Chip/w25q64/w25q64.c **** int8_t OSPI_W25Qxx_AutoPollingMemReady(void)
  40:Drivers/Chip/w25q64/w25q64.c **** {
  84              		.loc 1 40 1
  85              		.cfi_startproc
  86              		@ args = 0, pretend = 0, frame = 104
  87              		@ frame_needed = 1, uses_anonymous_args = 0
  88 0000 80B5     		push	{r7, lr}
  89              	.LCFI5:
  90              		.cfi_def_cfa_offset 8
  91              		.cfi_offset 7, -8
  92              		.cfi_offset 14, -4
  93 0002 9AB0     		sub	sp, sp, #104
  94              	.LCFI6:
  95              		.cfi_def_cfa_offset 112
  96 0004 00AF     		add	r7, sp, #0
  97              	.LCFI7:
  98              		.cfi_def_cfa_register 7
  41:Drivers/Chip/w25q64/w25q64.c ****     OSPI_RegularCmdTypeDef sCommand; // OSPI´«ÊäÅäÖÃ
  42:Drivers/Chip/w25q64/w25q64.c ****     OSPI_AutoPollingTypeDef sConfig; // ÂÖÑ¯±È½ÏÏà¹ØÅäÖÃ²ÎÊý
  43:Drivers/Chip/w25q64/w25q64.c **** 
  44:Drivers/Chip/w25q64/w25q64.c ****     sCommand.OperationType = HAL_OSPI_OPTYPE_COMMON_CFG;            // Í¨ÓÃÅäÖÃ
  99              		.loc 1 44 28
 100 0006 0023     		movs	r3, #0
 101 0008 BB61     		str	r3, [r7, #24]
  45:Drivers/Chip/w25q64/w25q64.c ****     sCommand.FlashId = HAL_OSPI_FLASH_ID_1;                         // flash ID
 102              		.loc 1 45 22
 103 000a 0023     		movs	r3, #0
 104 000c FB61     		str	r3, [r7, #28]
  46:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionMode = HAL_OSPI_INSTRUCTION_1_LINE;         // 1ÏßÖ¸ÁîÄ£Ê½
 105              		.loc 1 46 30
 106 000e 0123     		movs	r3, #1
 107 0010 7B62     		str	r3, [r7, #36]
  47:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionSize = HAL_OSPI_INSTRUCTION_8_BITS;         // Ö¸Áî³¤¶È8Î»
 108              		.loc 1 47 30
 109 0012 0023     		movs	r3, #0
 110 0014 BB62     		str	r3, [r7, #40]
  48:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionDtrMode = HAL_OSPI_INSTRUCTION_DTR_DISABLE; // ½ûÖ¹Ö¸ÁîDTRÄ£Ê½
 111              		.loc 1 48 33
 112 0016 0023     		movs	r3, #0
 113 0018 FB62     		str	r3, [r7, #44]
  49:Drivers/Chip/w25q64/w25q64.c ****     sCommand.Address = 0x0;                                         // µØÖ·0
 114              		.loc 1 49 22
 115 001a 0023     		movs	r3, #0
 116 001c 3B63     		str	r3, [r7, #48]
  50:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressMode = HAL_OSPI_ADDRESS_NONE;                   // ÎÞµØÖ·Ä£Ê½
 117              		.loc 1 50 26
 118 001e 0023     		movs	r3, #0
 119 0020 7B63     		str	r3, [r7, #52]
  51:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressSize = HAL_OSPI_ADDRESS_24_BITS;                // µØÖ·³¤¶È24Î»
 120              		.loc 1 51 26
 121 0022 4FF40053 		mov	r3, #8192
 122 0026 BB63     		str	r3, [r7, #56]
  52:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressDtrMode = HAL_OSPI_ADDRESS_DTR_DISABLE;         // ½ûÖ¹µØÖ·DTRÄ£Ê½
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 4


 123              		.loc 1 52 29
 124 0028 0023     		movs	r3, #0
 125 002a FB63     		str	r3, [r7, #60]
  53:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AlternateBytesMode = HAL_OSPI_ALTERNATE_BYTES_NONE;    //	ÎÞ½»Ìæ×Ö½Ú
 126              		.loc 1 53 33
 127 002c 0023     		movs	r3, #0
 128 002e 7B64     		str	r3, [r7, #68]
  54:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DataMode = HAL_OSPI_DATA_1_LINE;                       // 1ÏßÊý¾ÝÄ£Ê½
 129              		.loc 1 54 23
 130 0030 4FF08073 		mov	r3, #16777216
 131 0034 3B65     		str	r3, [r7, #80]
  55:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DataDtrMode = HAL_OSPI_DATA_DTR_DISABLE;               // ½ûÖ¹Êý¾ÝDTRÄ£Ê½
 132              		.loc 1 55 26
 133 0036 0023     		movs	r3, #0
 134 0038 BB65     		str	r3, [r7, #88]
  56:Drivers/Chip/w25q64/w25q64.c ****     sCommand.NbData = 1;                                            // Í¨ÐÅÊý¾Ý³¤¶È
 135              		.loc 1 56 21
 136 003a 0123     		movs	r3, #1
 137 003c 7B65     		str	r3, [r7, #84]
  57:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DummyCycles = 0;                                       // ¿ÕÖÜÆÚ¸öÊý
 138              		.loc 1 57 26
 139 003e 0023     		movs	r3, #0
 140 0040 FB65     		str	r3, [r7, #92]
  58:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DQSMode = HAL_OSPI_DQS_DISABLE;                        // ²»Ê¹ÓÃDQS
 141              		.loc 1 58 22
 142 0042 0023     		movs	r3, #0
 143 0044 3B66     		str	r3, [r7, #96]
  59:Drivers/Chip/w25q64/w25q64.c ****     sCommand.SIOOMode = HAL_OSPI_SIOO_INST_EVERY_CMD;               // Ã¿´Î´«ÊäÊý¾Ý¶¼·¢ËÍÖ¸Áî
 144              		.loc 1 59 23
 145 0046 0023     		movs	r3, #0
 146 0048 7B66     		str	r3, [r7, #100]
  60:Drivers/Chip/w25q64/w25q64.c **** 
  61:Drivers/Chip/w25q64/w25q64.c ****     sCommand.Instruction = W25Qxx_CMD_ReadStatus_REG1; // ¶Á×´Ì¬ÐÅÏ¢¼Ä´æÆ÷
 147              		.loc 1 61 26
 148 004a 0523     		movs	r3, #5
 149 004c 3B62     		str	r3, [r7, #32]
  62:Drivers/Chip/w25q64/w25q64.c **** 
  63:Drivers/Chip/w25q64/w25q64.c ****     if (HAL_OSPI_Command(&hospi2, &sCommand, HAL_OSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK)
 150              		.loc 1 63 9
 151 004e 07F11803 		add	r3, r7, #24
 152 0052 41F28832 		movw	r2, #5000
 153 0056 1946     		mov	r1, r3
 154 0058 1248     		ldr	r0, .L11
 155 005a FFF7FEFF 		bl	HAL_OSPI_Command
 156 005e 0346     		mov	r3, r0
 157              		.loc 1 63 8 discriminator 1
 158 0060 002B     		cmp	r3, #0
 159 0062 02D0     		beq	.L7
  64:Drivers/Chip/w25q64/w25q64.c ****     {
  65:Drivers/Chip/w25q64/w25q64.c ****         return W25Qxx_ERROR_AUTOPOLLING; // ÂÖÑ¯µÈ´ýÎÞÏìÓ¦
 160              		.loc 1 65 16
 161 0064 6FF00203 		mvn	r3, #2
 162 0068 18E0     		b	.L10
 163              	.L7:
  66:Drivers/Chip/w25q64/w25q64.c ****     }
  67:Drivers/Chip/w25q64/w25q64.c **** 
  68:Drivers/Chip/w25q64/w25q64.c ****     // ²»Í£µÄ²éÑ¯ W25Qxx_CMD_ReadStatus_REG1 ¼Ä´æÆ÷£¬½«¶ÁÈ¡µ½µÄ×´Ì¬×Ö½ÚÖÐµÄ W25Qxx_Status_REG1_BUSY
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 5


  69:Drivers/Chip/w25q64/w25q64.c ****     // ¶Á×´Ì¬¼Ä´æÆ÷1µÄµÚ0Î»£¨Ö»¶Á£©£¬Busy±êÖ¾Î»£¬µ±ÕýÔÚ²Á³ý/Ð´ÈëÊý¾Ý/Ð´ÃüÁîÊ±»á±»ÖÃ1£¬¿ÕÏÐ»òÍ¨ÐÅ½áÊ
  70:Drivers/Chip/w25q64/w25q64.c ****     // FANKE
  71:Drivers/Chip/w25q64/w25q64.c ****     sConfig.Match = 0;                                      //	Æ¥ÅäÖµ
 164              		.loc 1 71 19
 165 006a 0023     		movs	r3, #0
 166 006c 7B60     		str	r3, [r7, #4]
  72:Drivers/Chip/w25q64/w25q64.c ****     sConfig.MatchMode = HAL_OSPI_MATCH_MODE_AND;            //	ÓëÔËËã
 167              		.loc 1 72 23
 168 006e 0023     		movs	r3, #0
 169 0070 FB60     		str	r3, [r7, #12]
  73:Drivers/Chip/w25q64/w25q64.c ****     sConfig.Interval = 0x10;                                //	ÂÖÑ¯¼ä¸ô
 170              		.loc 1 73 22
 171 0072 1023     		movs	r3, #16
 172 0074 7B61     		str	r3, [r7, #20]
  74:Drivers/Chip/w25q64/w25q64.c ****     sConfig.AutomaticStop = HAL_OSPI_AUTOMATIC_STOP_ENABLE; // ×Ô¶¯Í£Ö¹Ä£Ê½
 173              		.loc 1 74 27
 174 0076 4FF48003 		mov	r3, #4194304
 175 007a 3B61     		str	r3, [r7, #16]
  75:Drivers/Chip/w25q64/w25q64.c ****     sConfig.Mask = W25Qxx_Status_REG1_BUSY;                 // ¶ÔÔÚÂÖÑ¯Ä£Ê½ÏÂ½ÓÊÕµÄ×´Ì¬×Ö½Ú½øÐÐÆÁ±Î
 176              		.loc 1 75 18
 177 007c 0123     		movs	r3, #1
 178 007e BB60     		str	r3, [r7, #8]
  76:Drivers/Chip/w25q64/w25q64.c **** 
  77:Drivers/Chip/w25q64/w25q64.c ****     // ·¢ËÍÂÖÑ¯µÈ´ýÃüÁî
  78:Drivers/Chip/w25q64/w25q64.c ****     if (HAL_OSPI_AutoPolling(&hospi2, &sConfig, HAL_OSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK)
 179              		.loc 1 78 9
 180 0080 3B1D     		adds	r3, r7, #4
 181 0082 41F28832 		movw	r2, #5000
 182 0086 1946     		mov	r1, r3
 183 0088 0648     		ldr	r0, .L11
 184 008a FFF7FEFF 		bl	HAL_OSPI_AutoPolling
 185 008e 0346     		mov	r3, r0
 186              		.loc 1 78 8 discriminator 1
 187 0090 002B     		cmp	r3, #0
 188 0092 02D0     		beq	.L9
  79:Drivers/Chip/w25q64/w25q64.c ****     {
  80:Drivers/Chip/w25q64/w25q64.c ****         return W25Qxx_ERROR_AUTOPOLLING; // ÂÖÑ¯µÈ´ýÎÞÏìÓ¦
 189              		.loc 1 80 16
 190 0094 6FF00203 		mvn	r3, #2
 191 0098 00E0     		b	.L10
 192              	.L9:
  81:Drivers/Chip/w25q64/w25q64.c ****     }
  82:Drivers/Chip/w25q64/w25q64.c ****     return OSPI_W25Qxx_OK; // Í¨ÐÅÕý³£½áÊø
 193              		.loc 1 82 12
 194 009a 0023     		movs	r3, #0
 195              	.L10:
  83:Drivers/Chip/w25q64/w25q64.c **** }
 196              		.loc 1 83 1
 197 009c 1846     		mov	r0, r3
 198 009e 6837     		adds	r7, r7, #104
 199              	.LCFI8:
 200              		.cfi_def_cfa_offset 8
 201 00a0 BD46     		mov	sp, r7
 202              	.LCFI9:
 203              		.cfi_def_cfa_register 13
 204              		@ sp needed
 205 00a2 80BD     		pop	{r7, pc}
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 6


 206              	.L12:
 207              		.align	2
 208              	.L11:
 209 00a4 00000000 		.word	hospi2
 210              		.cfi_endproc
 211              	.LFE145:
 213              		.section	.text.OSPI_W25Qxx_ReadID,"ax",%progbits
 214              		.align	1
 215              		.global	OSPI_W25Qxx_ReadID
 216              		.syntax unified
 217              		.thumb
 218              		.thumb_func
 220              	OSPI_W25Qxx_ReadID:
 221              	.LFB146:
  84:Drivers/Chip/w25q64/w25q64.c **** 
  85:Drivers/Chip/w25q64/w25q64.c **** /*************************************************************************************************
  86:Drivers/Chip/w25q64/w25q64.c ****  *	º¯ Êý Ãû: OSPI_W25Qxx_ReadID
  87:Drivers/Chip/w25q64/w25q64.c ****  *	Èë¿Ú²ÎÊý: ÎÞ
  88:Drivers/Chip/w25q64/w25q64.c ****  *	·µ »Ø Öµ: W25Qxx_ID - ¶ÁÈ¡µ½µÄÆ÷¼þID£¬W25Qxx_ERROR_INIT - Í¨ÐÅ¡¢³õÊ¼»¯´íÎó
  89:Drivers/Chip/w25q64/w25q64.c ****  *	º¯Êý¹¦ÄÜ: ³õÊ¼»¯ OSPI ÅäÖÃ£¬¶ÁÈ¡Æ÷¼þID
  90:Drivers/Chip/w25q64/w25q64.c ****  *	Ëµ    Ã÷: ÎÞ
  91:Drivers/Chip/w25q64/w25q64.c ****  **************************************************************************************************
  92:Drivers/Chip/w25q64/w25q64.c **** 
  93:Drivers/Chip/w25q64/w25q64.c **** uint32_t OSPI_W25Qxx_ReadID(void)
  94:Drivers/Chip/w25q64/w25q64.c **** {
 222              		.loc 1 94 1
 223              		.cfi_startproc
 224              		@ args = 0, pretend = 0, frame = 88
 225              		@ frame_needed = 1, uses_anonymous_args = 0
 226 0000 80B5     		push	{r7, lr}
 227              	.LCFI10:
 228              		.cfi_def_cfa_offset 8
 229              		.cfi_offset 7, -8
 230              		.cfi_offset 14, -4
 231 0002 96B0     		sub	sp, sp, #88
 232              	.LCFI11:
 233              		.cfi_def_cfa_offset 96
 234 0004 00AF     		add	r7, sp, #0
 235              	.LCFI12:
 236              		.cfi_def_cfa_register 7
  95:Drivers/Chip/w25q64/w25q64.c ****     OSPI_RegularCmdTypeDef sCommand; // OSPI´«ÊäÅäÖÃ
  96:Drivers/Chip/w25q64/w25q64.c **** 
  97:Drivers/Chip/w25q64/w25q64.c ****     uint8_t OSPI_ReceiveBuff[3]; // ´æ´¢OSPI¶Áµ½µÄÊý¾Ý
  98:Drivers/Chip/w25q64/w25q64.c ****     uint32_t W25Qxx_ID;          // Æ÷¼þµÄID
  99:Drivers/Chip/w25q64/w25q64.c **** 
 100:Drivers/Chip/w25q64/w25q64.c ****     sCommand.OperationType = HAL_OSPI_OPTYPE_COMMON_CFG;            // Í¨ÓÃÅäÖÃ
 237              		.loc 1 100 28
 238 0006 0023     		movs	r3, #0
 239 0008 7B60     		str	r3, [r7, #4]
 101:Drivers/Chip/w25q64/w25q64.c ****     sCommand.FlashId = HAL_OSPI_FLASH_ID_1;                         // flash ID
 240              		.loc 1 101 22
 241 000a 0023     		movs	r3, #0
 242 000c BB60     		str	r3, [r7, #8]
 102:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionMode = HAL_OSPI_INSTRUCTION_1_LINE;         // 1ÏßÖ¸ÁîÄ£Ê½
 243              		.loc 1 102 30
 244 000e 0123     		movs	r3, #1
 245 0010 3B61     		str	r3, [r7, #16]
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 7


 103:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionSize = HAL_OSPI_INSTRUCTION_8_BITS;         // Ö¸Áî³¤¶È8Î»
 246              		.loc 1 103 30
 247 0012 0023     		movs	r3, #0
 248 0014 7B61     		str	r3, [r7, #20]
 104:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionDtrMode = HAL_OSPI_INSTRUCTION_DTR_DISABLE; // ½ûÖ¹Ö¸ÁîDTRÄ£Ê½
 249              		.loc 1 104 33
 250 0016 0023     		movs	r3, #0
 251 0018 BB61     		str	r3, [r7, #24]
 105:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressMode = HAL_OSPI_ADDRESS_NONE;                   // ÎÞµØÖ·Ä£Ê½
 252              		.loc 1 105 26
 253 001a 0023     		movs	r3, #0
 254 001c 3B62     		str	r3, [r7, #32]
 106:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressSize = HAL_OSPI_ADDRESS_24_BITS;                // µØÖ·³¤¶È24Î»
 255              		.loc 1 106 26
 256 001e 4FF40053 		mov	r3, #8192
 257 0022 7B62     		str	r3, [r7, #36]
 107:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AlternateBytesMode = HAL_OSPI_ALTERNATE_BYTES_NONE;    //	ÎÞ½»Ìæ×Ö½Ú
 258              		.loc 1 107 33
 259 0024 0023     		movs	r3, #0
 260 0026 3B63     		str	r3, [r7, #48]
 108:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DataMode = HAL_OSPI_DATA_1_LINE;                       // 1ÏßÊý¾ÝÄ£Ê½
 261              		.loc 1 108 23
 262 0028 4FF08073 		mov	r3, #16777216
 263 002c FB63     		str	r3, [r7, #60]
 109:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DataDtrMode = HAL_OSPI_DATA_DTR_DISABLE;               // ½ûÖ¹Êý¾ÝDTRÄ£Ê½
 264              		.loc 1 109 26
 265 002e 0023     		movs	r3, #0
 266 0030 7B64     		str	r3, [r7, #68]
 110:Drivers/Chip/w25q64/w25q64.c ****     sCommand.NbData = 3;                                            // ´«ÊäÊý¾ÝµÄ³¤¶È
 267              		.loc 1 110 21
 268 0032 0323     		movs	r3, #3
 269 0034 3B64     		str	r3, [r7, #64]
 111:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DummyCycles = 0;                                       // ¿ÕÖÜÆÚ¸öÊý
 270              		.loc 1 111 26
 271 0036 0023     		movs	r3, #0
 272 0038 BB64     		str	r3, [r7, #72]
 112:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DQSMode = HAL_OSPI_DQS_DISABLE;                        // ²»Ê¹ÓÃDQS
 273              		.loc 1 112 22
 274 003a 0023     		movs	r3, #0
 275 003c FB64     		str	r3, [r7, #76]
 113:Drivers/Chip/w25q64/w25q64.c ****     sCommand.SIOOMode = HAL_OSPI_SIOO_INST_EVERY_CMD;               // Ã¿´Î´«ÊäÊý¾Ý¶¼·¢ËÍÖ¸Áî
 276              		.loc 1 113 23
 277 003e 0023     		movs	r3, #0
 278 0040 3B65     		str	r3, [r7, #80]
 114:Drivers/Chip/w25q64/w25q64.c **** 
 115:Drivers/Chip/w25q64/w25q64.c ****     sCommand.Instruction = W25Qxx_CMD_JedecID; // Ö´ÐÐ¶ÁÆ÷¼þIDÃüÁî
 279              		.loc 1 115 26
 280 0042 9F23     		movs	r3, #159
 281 0044 FB60     		str	r3, [r7, #12]
 116:Drivers/Chip/w25q64/w25q64.c **** 
 117:Drivers/Chip/w25q64/w25q64.c ****     HAL_OSPI_Command(&hospi2, &sCommand, HAL_OSPI_TIMEOUT_DEFAULT_VALUE); // ·¢ËÍÖ¸Áî
 282              		.loc 1 117 5
 283 0046 3B1D     		adds	r3, r7, #4
 284 0048 41F28832 		movw	r2, #5000
 285 004c 1946     		mov	r1, r3
 286 004e 0B48     		ldr	r0, .L15
 287 0050 FFF7FEFF 		bl	HAL_OSPI_Command
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 8


 118:Drivers/Chip/w25q64/w25q64.c **** 
 119:Drivers/Chip/w25q64/w25q64.c ****     HAL_OSPI_Receive(&hospi2, OSPI_ReceiveBuff, HAL_OSPI_TIMEOUT_DEFAULT_VALUE); // ½ÓÊÕÊý¾Ý
 288              		.loc 1 119 5
 289 0054 3B46     		mov	r3, r7
 290 0056 41F28832 		movw	r2, #5000
 291 005a 1946     		mov	r1, r3
 292 005c 0748     		ldr	r0, .L15
 293 005e FFF7FEFF 		bl	HAL_OSPI_Receive
 120:Drivers/Chip/w25q64/w25q64.c **** 
 121:Drivers/Chip/w25q64/w25q64.c ****     W25Qxx_ID = (OSPI_ReceiveBuff[0] << 16) | (OSPI_ReceiveBuff[1] << 8) | OSPI_ReceiveBuff[2]; // 
 294              		.loc 1 121 34
 295 0062 3B78     		ldrb	r3, [r7]	@ zero_extendqisi2
 296              		.loc 1 121 38
 297 0064 1A04     		lsls	r2, r3, #16
 298              		.loc 1 121 64
 299 0066 7B78     		ldrb	r3, [r7, #1]	@ zero_extendqisi2
 300              		.loc 1 121 68
 301 0068 1B02     		lsls	r3, r3, #8
 302              		.loc 1 121 45
 303 006a 1343     		orrs	r3, r3, r2
 304              		.loc 1 121 92
 305 006c BA78     		ldrb	r2, [r7, #2]	@ zero_extendqisi2
 306              		.loc 1 121 74
 307 006e 1343     		orrs	r3, r3, r2
 308              		.loc 1 121 15
 309 0070 7B65     		str	r3, [r7, #84]
 122:Drivers/Chip/w25q64/w25q64.c **** 
 123:Drivers/Chip/w25q64/w25q64.c ****     return W25Qxx_ID; // ·µ»ØID
 310              		.loc 1 123 12
 311 0072 7B6D     		ldr	r3, [r7, #84]
 124:Drivers/Chip/w25q64/w25q64.c **** }
 312              		.loc 1 124 1
 313 0074 1846     		mov	r0, r3
 314 0076 5837     		adds	r7, r7, #88
 315              	.LCFI13:
 316              		.cfi_def_cfa_offset 8
 317 0078 BD46     		mov	sp, r7
 318              	.LCFI14:
 319              		.cfi_def_cfa_register 13
 320              		@ sp needed
 321 007a 80BD     		pop	{r7, pc}
 322              	.L16:
 323              		.align	2
 324              	.L15:
 325 007c 00000000 		.word	hospi2
 326              		.cfi_endproc
 327              	.LFE146:
 329              		.section	.text.OSPI_W25Qxx_MemoryMappedMode,"ax",%progbits
 330              		.align	1
 331              		.global	OSPI_W25Qxx_MemoryMappedMode
 332              		.syntax unified
 333              		.thumb
 334              		.thumb_func
 336              	OSPI_W25Qxx_MemoryMappedMode:
 337              	.LFB147:
 125:Drivers/Chip/w25q64/w25q64.c **** 
 126:Drivers/Chip/w25q64/w25q64.c **** /*************************************************************************************************
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 9


 127:Drivers/Chip/w25q64/w25q64.c ****  *	º¯ Êý Ãû: OSPI_W25Qxx_MemoryMappedMode
 128:Drivers/Chip/w25q64/w25q64.c ****  *	Èë¿Ú²ÎÊý: ÎÞ
 129:Drivers/Chip/w25q64/w25q64.c ****  *	·µ »Ø Öµ: OSPI_W25Qxx_OK - Ð´Ê¹ÄÜ³É¹¦£¬W25Qxx_ERROR_WriteEnable - Ð´Ê¹ÄÜÊ§°Ü
 130:Drivers/Chip/w25q64/w25q64.c ****  *	º¯Êý¹¦ÄÜ: ½«OSPIÉèÖÃÎªÄÚ´æÓ³ÉäÄ£Ê½
 131:Drivers/Chip/w25q64/w25q64.c ****  *	Ëµ    Ã÷: ÎÞ
 132:Drivers/Chip/w25q64/w25q64.c ****  **************************************************************************************************
 133:Drivers/Chip/w25q64/w25q64.c **** 
 134:Drivers/Chip/w25q64/w25q64.c **** int8_t OSPI_W25Qxx_MemoryMappedMode(void)
 135:Drivers/Chip/w25q64/w25q64.c **** {
 338              		.loc 1 135 1
 339              		.cfi_startproc
 340              		@ args = 0, pretend = 0, frame = 88
 341              		@ frame_needed = 1, uses_anonymous_args = 0
 342 0000 80B5     		push	{r7, lr}
 343              	.LCFI15:
 344              		.cfi_def_cfa_offset 8
 345              		.cfi_offset 7, -8
 346              		.cfi_offset 14, -4
 347 0002 96B0     		sub	sp, sp, #88
 348              	.LCFI16:
 349              		.cfi_def_cfa_offset 96
 350 0004 00AF     		add	r7, sp, #0
 351              	.LCFI17:
 352              		.cfi_def_cfa_register 7
 136:Drivers/Chip/w25q64/w25q64.c ****     OSPI_RegularCmdTypeDef sCommand;        // QSPI´«ÊäÅäÖÃ
 137:Drivers/Chip/w25q64/w25q64.c ****     OSPI_MemoryMappedTypeDef sMemMappedCfg; // ÄÚ´æÓ³Éä·ÃÎÊ²ÎÊý
 138:Drivers/Chip/w25q64/w25q64.c **** 
 139:Drivers/Chip/w25q64/w25q64.c ****     sCommand.OperationType = HAL_OSPI_OPTYPE_COMMON_CFG; // Í¨ÓÃÅäÖÃ
 353              		.loc 1 139 28
 354 0006 0023     		movs	r3, #0
 355 0008 BB60     		str	r3, [r7, #8]
 140:Drivers/Chip/w25q64/w25q64.c ****     sCommand.FlashId = HAL_OSPI_FLASH_ID_1;              // flash ID
 356              		.loc 1 140 22
 357 000a 0023     		movs	r3, #0
 358 000c FB60     		str	r3, [r7, #12]
 141:Drivers/Chip/w25q64/w25q64.c **** 
 142:Drivers/Chip/w25q64/w25q64.c ****     sCommand.Instruction = W25Qxx_CMD_FastReadQuad_IO;              // 1-4-4Ä£Ê½ÏÂ(1ÏßÖ¸Áî4ÏßµØÖ·4Ï
 359              		.loc 1 142 26
 360 000e EB23     		movs	r3, #235
 361 0010 3B61     		str	r3, [r7, #16]
 143:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionMode = HAL_OSPI_INSTRUCTION_1_LINE;         // 1ÏßÖ¸ÁîÄ£Ê½
 362              		.loc 1 143 30
 363 0012 0123     		movs	r3, #1
 364 0014 7B61     		str	r3, [r7, #20]
 144:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionSize = HAL_OSPI_INSTRUCTION_8_BITS;         // Ö¸Áî³¤¶È8Î»
 365              		.loc 1 144 30
 366 0016 0023     		movs	r3, #0
 367 0018 BB61     		str	r3, [r7, #24]
 145:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionDtrMode = HAL_OSPI_INSTRUCTION_DTR_DISABLE; // ½ûÖ¹Ö¸ÁîDTRÄ£Ê½
 368              		.loc 1 145 33
 369 001a 0023     		movs	r3, #0
 370 001c FB61     		str	r3, [r7, #28]
 146:Drivers/Chip/w25q64/w25q64.c **** 
 147:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressMode = HAL_OSPI_ADDRESS_4_LINES;        // 4ÏßµØÖ·Ä£Ê½
 371              		.loc 1 147 26
 372 001e 4FF44073 		mov	r3, #768
 373 0022 7B62     		str	r3, [r7, #36]
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 10


 148:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressSize = HAL_OSPI_ADDRESS_24_BITS;        // µØÖ·³¤¶È24Î»
 374              		.loc 1 148 26
 375 0024 4FF40053 		mov	r3, #8192
 376 0028 BB62     		str	r3, [r7, #40]
 149:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressDtrMode = HAL_OSPI_ADDRESS_DTR_DISABLE; // ½ûÖ¹µØÖ·DTRÄ£Ê½
 377              		.loc 1 149 29
 378 002a 0023     		movs	r3, #0
 379 002c FB62     		str	r3, [r7, #44]
 150:Drivers/Chip/w25q64/w25q64.c **** 
 151:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AlternateBytesMode = HAL_OSPI_ALTERNATE_BYTES_NONE;           // ÎÞ½»Ìæ×Ö½Ú
 380              		.loc 1 151 33
 381 002e 0023     		movs	r3, #0
 382 0030 7B63     		str	r3, [r7, #52]
 152:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AlternateBytesDtrMode = HAL_OSPI_ALTERNATE_BYTES_DTR_DISABLE; // ½ûÖ¹Ìæ×Ö½ÚDTRÄ£Ê½
 383              		.loc 1 152 36
 384 0032 0023     		movs	r3, #0
 385 0034 FB63     		str	r3, [r7, #60]
 153:Drivers/Chip/w25q64/w25q64.c **** 
 154:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DataMode = HAL_OSPI_DATA_4_LINES;        // 4ÏßÊý¾ÝÄ£Ê½
 386              		.loc 1 154 23
 387 0036 4FF04073 		mov	r3, #50331648
 388 003a 3B64     		str	r3, [r7, #64]
 155:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DataDtrMode = HAL_OSPI_DATA_DTR_DISABLE; // ½ûÖ¹Êý¾ÝDTRÄ£Ê½
 389              		.loc 1 155 26
 390 003c 0023     		movs	r3, #0
 391 003e BB64     		str	r3, [r7, #72]
 156:Drivers/Chip/w25q64/w25q64.c **** 
 157:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DummyCycles = 6;                         // ¿ÕÖÜÆÚ¸öÊý
 392              		.loc 1 157 26
 393 0040 0623     		movs	r3, #6
 394 0042 FB64     		str	r3, [r7, #76]
 158:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DQSMode = HAL_OSPI_DQS_DISABLE;          // ²»Ê¹ÓÃDQS
 395              		.loc 1 158 22
 396 0044 0023     		movs	r3, #0
 397 0046 3B65     		str	r3, [r7, #80]
 159:Drivers/Chip/w25q64/w25q64.c ****     sCommand.SIOOMode = HAL_OSPI_SIOO_INST_EVERY_CMD; // Ã¿´Î´«ÊäÊý¾Ý¶¼·¢ËÍÖ¸Áî
 398              		.loc 1 159 23
 399 0048 0023     		movs	r3, #0
 400 004a 7B65     		str	r3, [r7, #84]
 160:Drivers/Chip/w25q64/w25q64.c **** 
 161:Drivers/Chip/w25q64/w25q64.c ****     // Ð´ÅäÖÃ
 162:Drivers/Chip/w25q64/w25q64.c ****     if (HAL_OSPI_Command(&hospi2, &sCommand, HAL_OSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK)
 401              		.loc 1 162 9
 402 004c 07F10803 		add	r3, r7, #8
 403 0050 41F28832 		movw	r2, #5000
 404 0054 1946     		mov	r1, r3
 405 0056 0E48     		ldr	r0, .L22
 406 0058 FFF7FEFF 		bl	HAL_OSPI_Command
 407 005c 0346     		mov	r3, r0
 408              		.loc 1 162 8 discriminator 1
 409 005e 002B     		cmp	r3, #0
 410 0060 02D0     		beq	.L18
 163:Drivers/Chip/w25q64/w25q64.c ****     {
 164:Drivers/Chip/w25q64/w25q64.c ****         return W25Qxx_ERROR_TRANSMIT; // ´«ÊäÊý¾Ý´íÎó
 411              		.loc 1 164 16
 412 0062 6FF00403 		mvn	r3, #4
 413 0066 0FE0     		b	.L21
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 11


 414              	.L18:
 165:Drivers/Chip/w25q64/w25q64.c ****     }
 166:Drivers/Chip/w25q64/w25q64.c **** 
 167:Drivers/Chip/w25q64/w25q64.c ****     sMemMappedCfg.TimeOutActivation = HAL_OSPI_TIMEOUT_COUNTER_DISABLE; // ½ûÓÃ³¬Ê±¼ÆÊýÆ÷, nCS ±£³Ö
 415              		.loc 1 167 37
 416 0068 0023     		movs	r3, #0
 417 006a 3B60     		str	r3, [r7]
 168:Drivers/Chip/w25q64/w25q64.c ****     sMemMappedCfg.TimeOutPeriod = 0;                                    // ³¬Ê±ÅÐ¶ÏÖÜÆÚ
 418              		.loc 1 168 33
 419 006c 0023     		movs	r3, #0
 420 006e 7B60     		str	r3, [r7, #4]
 169:Drivers/Chip/w25q64/w25q64.c ****     // ¿ªÆôÄÚ´æÓ³ÉäÄ£Ê½
 170:Drivers/Chip/w25q64/w25q64.c ****     if (HAL_OSPI_MemoryMapped(&hospi2, &sMemMappedCfg) != HAL_OK) // ½øÐÐÅäÖÃ
 421              		.loc 1 170 9
 422 0070 3B46     		mov	r3, r7
 423 0072 1946     		mov	r1, r3
 424 0074 0648     		ldr	r0, .L22
 425 0076 FFF7FEFF 		bl	HAL_OSPI_MemoryMapped
 426 007a 0346     		mov	r3, r0
 427              		.loc 1 170 8 discriminator 1
 428 007c 002B     		cmp	r3, #0
 429 007e 02D0     		beq	.L20
 171:Drivers/Chip/w25q64/w25q64.c ****     {
 172:Drivers/Chip/w25q64/w25q64.c ****         return W25Qxx_ERROR_MemoryMapped; // ÉèÖÃÄÚ´æÓ³ÉäÄ£Ê½´íÎó
 430              		.loc 1 172 16
 431 0080 6FF00503 		mvn	r3, #5
 432 0084 00E0     		b	.L21
 433              	.L20:
 173:Drivers/Chip/w25q64/w25q64.c ****     }
 174:Drivers/Chip/w25q64/w25q64.c ****     return OSPI_W25Qxx_OK; // ÅäÖÃ³É¹¦
 434              		.loc 1 174 12
 435 0086 0023     		movs	r3, #0
 436              	.L21:
 175:Drivers/Chip/w25q64/w25q64.c **** }
 437              		.loc 1 175 1
 438 0088 1846     		mov	r0, r3
 439 008a 5837     		adds	r7, r7, #88
 440              	.LCFI18:
 441              		.cfi_def_cfa_offset 8
 442 008c BD46     		mov	sp, r7
 443              	.LCFI19:
 444              		.cfi_def_cfa_register 13
 445              		@ sp needed
 446 008e 80BD     		pop	{r7, pc}
 447              	.L23:
 448              		.align	2
 449              	.L22:
 450 0090 00000000 		.word	hospi2
 451              		.cfi_endproc
 452              	.LFE147:
 454              		.section	.text.OSPI_W25Qxx_WriteEnable,"ax",%progbits
 455              		.align	1
 456              		.global	OSPI_W25Qxx_WriteEnable
 457              		.syntax unified
 458              		.thumb
 459              		.thumb_func
 461              	OSPI_W25Qxx_WriteEnable:
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 12


 462              	.LFB148:
 176:Drivers/Chip/w25q64/w25q64.c **** 
 177:Drivers/Chip/w25q64/w25q64.c **** /*************************************************************************************************
 178:Drivers/Chip/w25q64/w25q64.c ****  *   º¯ Êý Ãû: OSPI_W25Qxx_WriteEnable
 179:Drivers/Chip/w25q64/w25q64.c ****  *   Èë¿Ú²ÎÊý: ÎÞ
 180:Drivers/Chip/w25q64/w25q64.c ****  *   ·µ »Ø Öµ: OSPI_W25Qxx_OK - Ð´Ê¹ÄÜ³É¹¦£¬W25Qxx_ERROR_WriteEnable - Ð´Ê¹ÄÜÊ§°Ü
 181:Drivers/Chip/w25q64/w25q64.c ****  *   º¯Êý¹¦ÄÜ: ·¢ËÍÐ´Ê¹ÄÜÃüÁî
 182:Drivers/Chip/w25q64/w25q64.c ****  *   Ëµ    Ã÷: ÎÞ
 183:Drivers/Chip/w25q64/w25q64.c ****  **************************************************************************************************
 184:Drivers/Chip/w25q64/w25q64.c **** 
 185:Drivers/Chip/w25q64/w25q64.c **** int8_t OSPI_W25Qxx_WriteEnable(void)
 186:Drivers/Chip/w25q64/w25q64.c **** {
 463              		.loc 1 186 1
 464              		.cfi_startproc
 465              		@ args = 0, pretend = 0, frame = 104
 466              		@ frame_needed = 1, uses_anonymous_args = 0
 467 0000 80B5     		push	{r7, lr}
 468              	.LCFI20:
 469              		.cfi_def_cfa_offset 8
 470              		.cfi_offset 7, -8
 471              		.cfi_offset 14, -4
 472 0002 9AB0     		sub	sp, sp, #104
 473              	.LCFI21:
 474              		.cfi_def_cfa_offset 112
 475 0004 00AF     		add	r7, sp, #0
 476              	.LCFI22:
 477              		.cfi_def_cfa_register 7
 187:Drivers/Chip/w25q64/w25q64.c ****     OSPI_RegularCmdTypeDef sCommand; // OSPI´«ÊäÅäÖÃ
 188:Drivers/Chip/w25q64/w25q64.c ****     OSPI_AutoPollingTypeDef sConfig; // ÂÖÑ¯±È½ÏÏà¹ØÅäÖÃ²ÎÊý
 189:Drivers/Chip/w25q64/w25q64.c **** 
 190:Drivers/Chip/w25q64/w25q64.c ****     sCommand.OperationType = HAL_OSPI_OPTYPE_COMMON_CFG;                   // Í¨ÓÃÅäÖÃ
 478              		.loc 1 190 28
 479 0006 0023     		movs	r3, #0
 480 0008 BB61     		str	r3, [r7, #24]
 191:Drivers/Chip/w25q64/w25q64.c ****     sCommand.FlashId = HAL_OSPI_FLASH_ID_1;                                // flash ID
 481              		.loc 1 191 22
 482 000a 0023     		movs	r3, #0
 483 000c FB61     		str	r3, [r7, #28]
 192:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionMode = HAL_OSPI_INSTRUCTION_1_LINE;                // 1ÏßÖ¸ÁîÄ£Ê½
 484              		.loc 1 192 30
 485 000e 0123     		movs	r3, #1
 486 0010 7B62     		str	r3, [r7, #36]
 193:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionSize = HAL_OSPI_INSTRUCTION_8_BITS;                // Ö¸Áî³¤¶È8Î»
 487              		.loc 1 193 30
 488 0012 0023     		movs	r3, #0
 489 0014 BB62     		str	r3, [r7, #40]
 194:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionDtrMode = HAL_OSPI_INSTRUCTION_DTR_DISABLE;        // ½ûÖ¹Ö¸ÁîDTRÄ£Ê½
 490              		.loc 1 194 33
 491 0016 0023     		movs	r3, #0
 492 0018 FB62     		str	r3, [r7, #44]
 195:Drivers/Chip/w25q64/w25q64.c ****     sCommand.Address = 0;                                                  // µØÖ·0
 493              		.loc 1 195 22
 494 001a 0023     		movs	r3, #0
 495 001c 3B63     		str	r3, [r7, #48]
 196:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressMode = HAL_OSPI_ADDRESS_NONE;                          // ÎÞµØÖ·Ä£Ê½
 496              		.loc 1 196 26
 497 001e 0023     		movs	r3, #0
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 13


 498 0020 7B63     		str	r3, [r7, #52]
 197:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressSize = HAL_OSPI_ADDRESS_24_BITS;                       // µØÖ·³¤¶È24Î»
 499              		.loc 1 197 26
 500 0022 4FF40053 		mov	r3, #8192
 501 0026 BB63     		str	r3, [r7, #56]
 198:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressDtrMode = HAL_OSPI_ADDRESS_DTR_DISABLE;                // ½ûÖ¹µØÖ·DTRÄ£Ê½
 502              		.loc 1 198 29
 503 0028 0023     		movs	r3, #0
 504 002a FB63     		str	r3, [r7, #60]
 199:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AlternateBytesDtrMode = HAL_OSPI_ALTERNATE_BYTES_DTR_DISABLE; //	½ûÖ¹Ìæ×Ö½ÚDTRÄ£Ê½
 505              		.loc 1 199 36
 506 002c 0023     		movs	r3, #0
 507 002e FB64     		str	r3, [r7, #76]
 200:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AlternateBytesMode = HAL_OSPI_ALTERNATE_BYTES_NONE;           //	ÎÞ½»Ìæ×Ö½Ú
 508              		.loc 1 200 33
 509 0030 0023     		movs	r3, #0
 510 0032 7B64     		str	r3, [r7, #68]
 201:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DataMode = HAL_OSPI_DATA_NONE;                                // ÎÞÊý¾ÝÄ£Ê½
 511              		.loc 1 201 23
 512 0034 0023     		movs	r3, #0
 513 0036 3B65     		str	r3, [r7, #80]
 202:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DataDtrMode = HAL_OSPI_DATA_DTR_DISABLE;                      // ½ûÖ¹Êý¾ÝDTRÄ£Ê½
 514              		.loc 1 202 26
 515 0038 0023     		movs	r3, #0
 516 003a BB65     		str	r3, [r7, #88]
 203:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DummyCycles = 0;                                              // ¿ÕÖÜÆÚ¸öÊý
 517              		.loc 1 203 26
 518 003c 0023     		movs	r3, #0
 519 003e FB65     		str	r3, [r7, #92]
 204:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DQSMode = HAL_OSPI_DQS_DISABLE;                               // ²»Ê¹ÓÃDQS
 520              		.loc 1 204 22
 521 0040 0023     		movs	r3, #0
 522 0042 3B66     		str	r3, [r7, #96]
 205:Drivers/Chip/w25q64/w25q64.c ****     sCommand.SIOOMode = HAL_OSPI_SIOO_INST_EVERY_CMD;                      // Ã¿´Î´«ÊäÊý¾Ý¶¼·¢ËÍÖ¸Á
 523              		.loc 1 205 23
 524 0044 0023     		movs	r3, #0
 525 0046 7B66     		str	r3, [r7, #100]
 206:Drivers/Chip/w25q64/w25q64.c **** 
 207:Drivers/Chip/w25q64/w25q64.c ****     sCommand.Instruction = W25Qxx_CMD_WriteEnable; // Ð´Ê¹ÄÜÃüÁî
 526              		.loc 1 207 26
 527 0048 0623     		movs	r3, #6
 528 004a 3B62     		str	r3, [r7, #32]
 208:Drivers/Chip/w25q64/w25q64.c **** 
 209:Drivers/Chip/w25q64/w25q64.c ****     // ·¢ËÍÐ´Ê¹ÄÜÃüÁî
 210:Drivers/Chip/w25q64/w25q64.c ****     if (HAL_OSPI_Command(&hospi2, &sCommand, HAL_OSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK)
 529              		.loc 1 210 9
 530 004c 07F11803 		add	r3, r7, #24
 531 0050 41F28832 		movw	r2, #5000
 532 0054 1946     		mov	r1, r3
 533 0056 2748     		ldr	r0, .L30
 534 0058 FFF7FEFF 		bl	HAL_OSPI_Command
 535 005c 0346     		mov	r3, r0
 536              		.loc 1 210 8 discriminator 1
 537 005e 002B     		cmp	r3, #0
 538 0060 02D0     		beq	.L25
 211:Drivers/Chip/w25q64/w25q64.c ****     {
 212:Drivers/Chip/w25q64/w25q64.c ****         return W25Qxx_ERROR_WriteEnable;
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 14


 539              		.loc 1 212 16
 540 0062 6FF00103 		mvn	r3, #1
 541 0066 41E0     		b	.L29
 542              	.L25:
 213:Drivers/Chip/w25q64/w25q64.c ****     }
 214:Drivers/Chip/w25q64/w25q64.c ****     // ·¢ËÍ²éÑ¯×´Ì¬¼Ä´æÆ÷ÃüÁî
 215:Drivers/Chip/w25q64/w25q64.c ****     sCommand.OperationType = HAL_OSPI_OPTYPE_COMMON_CFG;            // Í¨ÓÃÅäÖÃ
 543              		.loc 1 215 28
 544 0068 0023     		movs	r3, #0
 545 006a BB61     		str	r3, [r7, #24]
 216:Drivers/Chip/w25q64/w25q64.c ****     sCommand.FlashId = HAL_OSPI_FLASH_ID_1;                         // flash ID
 546              		.loc 1 216 22
 547 006c 0023     		movs	r3, #0
 548 006e FB61     		str	r3, [r7, #28]
 217:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionMode = HAL_OSPI_INSTRUCTION_1_LINE;         // 1ÏßÖ¸ÁîÄ£Ê½
 549              		.loc 1 217 30
 550 0070 0123     		movs	r3, #1
 551 0072 7B62     		str	r3, [r7, #36]
 218:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionSize = HAL_OSPI_INSTRUCTION_8_BITS;         // Ö¸Áî³¤¶È8Î»
 552              		.loc 1 218 30
 553 0074 0023     		movs	r3, #0
 554 0076 BB62     		str	r3, [r7, #40]
 219:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionDtrMode = HAL_OSPI_INSTRUCTION_DTR_DISABLE; // ½ûÖ¹Ö¸ÁîDTRÄ£Ê½
 555              		.loc 1 219 33
 556 0078 0023     		movs	r3, #0
 557 007a FB62     		str	r3, [r7, #44]
 220:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressMode = HAL_OSPI_ADDRESS_NONE;                   // ÎÞµØÖ·Ä£Ê½
 558              		.loc 1 220 26
 559 007c 0023     		movs	r3, #0
 560 007e 7B63     		str	r3, [r7, #52]
 221:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AlternateBytesMode = HAL_OSPI_ALTERNATE_BYTES_NONE;    //	ÎÞ½»Ìæ×Ö½Ú
 561              		.loc 1 221 33
 562 0080 0023     		movs	r3, #0
 563 0082 7B64     		str	r3, [r7, #68]
 222:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DummyCycles = 0;                                       // ¿ÕÖÜÆÚ¸öÊý
 564              		.loc 1 222 26
 565 0084 0023     		movs	r3, #0
 566 0086 FB65     		str	r3, [r7, #92]
 223:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DQSMode = HAL_OSPI_DQS_DISABLE;                        // ²»Ê¹ÓÃDQS
 567              		.loc 1 223 22
 568 0088 0023     		movs	r3, #0
 569 008a 3B66     		str	r3, [r7, #96]
 224:Drivers/Chip/w25q64/w25q64.c ****     sCommand.SIOOMode = HAL_OSPI_SIOO_INST_EVERY_CMD;               // Ã¿´Î´«ÊäÊý¾Ý¶¼·¢ËÍÖ¸Áî
 570              		.loc 1 224 23
 571 008c 0023     		movs	r3, #0
 572 008e 7B66     		str	r3, [r7, #100]
 225:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DataMode = HAL_OSPI_DATA_1_LINE;                       // 1ÏßÊý¾ÝÄ£Ê½
 573              		.loc 1 225 23
 574 0090 4FF08073 		mov	r3, #16777216
 575 0094 3B65     		str	r3, [r7, #80]
 226:Drivers/Chip/w25q64/w25q64.c ****     sCommand.NbData = 1;                                            // Í¨ÐÅÊý¾Ý³¤¶È
 576              		.loc 1 226 21
 577 0096 0123     		movs	r3, #1
 578 0098 7B65     		str	r3, [r7, #84]
 227:Drivers/Chip/w25q64/w25q64.c **** 
 228:Drivers/Chip/w25q64/w25q64.c ****     sCommand.Instruction = W25Qxx_CMD_ReadStatus_REG1; // ²éÑ¯×´Ì¬¼Ä´æÆ÷ÃüÁî
 579              		.loc 1 228 26
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 15


 580 009a 0523     		movs	r3, #5
 581 009c 3B62     		str	r3, [r7, #32]
 229:Drivers/Chip/w25q64/w25q64.c **** 
 230:Drivers/Chip/w25q64/w25q64.c ****     if (HAL_OSPI_Command(&hospi2, &sCommand, HAL_OSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK)
 582              		.loc 1 230 9
 583 009e 07F11803 		add	r3, r7, #24
 584 00a2 41F28832 		movw	r2, #5000
 585 00a6 1946     		mov	r1, r3
 586 00a8 1248     		ldr	r0, .L30
 587 00aa FFF7FEFF 		bl	HAL_OSPI_Command
 588 00ae 0346     		mov	r3, r0
 589              		.loc 1 230 8 discriminator 1
 590 00b0 002B     		cmp	r3, #0
 591 00b2 02D0     		beq	.L27
 231:Drivers/Chip/w25q64/w25q64.c ****     {
 232:Drivers/Chip/w25q64/w25q64.c ****         return W25Qxx_ERROR_WriteEnable;
 592              		.loc 1 232 16
 593 00b4 6FF00103 		mvn	r3, #1
 594 00b8 18E0     		b	.L29
 595              	.L27:
 233:Drivers/Chip/w25q64/w25q64.c ****     }
 234:Drivers/Chip/w25q64/w25q64.c **** 
 235:Drivers/Chip/w25q64/w25q64.c ****     // ²»Í£µÄ²éÑ¯ W25Qxx_CMD_ReadStatus_REG1 ¼Ä´æÆ÷£¬½«¶ÁÈ¡µ½µÄ×´Ì¬×Ö½ÚÖÐµÄ W25Qxx_Status_REG1_WEL 
 236:Drivers/Chip/w25q64/w25q64.c ****     // ¶Á×´Ì¬¼Ä´æÆ÷1µÄµÚ1Î»£¨Ö»¶Á£©£¬WELÐ´Ê¹ÄÜ±êÖ¾Î»£¬¸Ã±êÖ¾Î»Îª1Ê±£¬´ú±í¿ÉÒÔ½øÐÐÐ´²Ù×÷
 237:Drivers/Chip/w25q64/w25q64.c ****     // FANKE	7B0
 238:Drivers/Chip/w25q64/w25q64.c ****     sConfig.Match = 0x02;                                   //	Æ¥ÅäÖµ
 596              		.loc 1 238 19
 597 00ba 0223     		movs	r3, #2
 598 00bc 7B60     		str	r3, [r7, #4]
 239:Drivers/Chip/w25q64/w25q64.c ****     sConfig.MatchMode = HAL_OSPI_MATCH_MODE_AND;            //	ÓëÔËËã
 599              		.loc 1 239 23
 600 00be 0023     		movs	r3, #0
 601 00c0 FB60     		str	r3, [r7, #12]
 240:Drivers/Chip/w25q64/w25q64.c ****     sConfig.Interval = 0x10;                                //	ÂÖÑ¯¼ä¸ô
 602              		.loc 1 240 22
 603 00c2 1023     		movs	r3, #16
 604 00c4 7B61     		str	r3, [r7, #20]
 241:Drivers/Chip/w25q64/w25q64.c ****     sConfig.AutomaticStop = HAL_OSPI_AUTOMATIC_STOP_ENABLE; // ×Ô¶¯Í£Ö¹Ä£Ê½
 605              		.loc 1 241 27
 606 00c6 4FF48003 		mov	r3, #4194304
 607 00ca 3B61     		str	r3, [r7, #16]
 242:Drivers/Chip/w25q64/w25q64.c ****     sConfig.Mask = W25Qxx_Status_REG1_WEL;                  // ¶ÔÔÚÂÖÑ¯Ä£Ê½ÏÂ½ÓÊÕµÄ×´Ì¬×Ö½Ú½øÐÐÆÁ±Î
 608              		.loc 1 242 18
 609 00cc 0223     		movs	r3, #2
 610 00ce BB60     		str	r3, [r7, #8]
 243:Drivers/Chip/w25q64/w25q64.c **** 
 244:Drivers/Chip/w25q64/w25q64.c ****     if (HAL_OSPI_AutoPolling(&hospi2, &sConfig, HAL_OSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK)
 611              		.loc 1 244 9
 612 00d0 3B1D     		adds	r3, r7, #4
 613 00d2 41F28832 		movw	r2, #5000
 614 00d6 1946     		mov	r1, r3
 615 00d8 0648     		ldr	r0, .L30
 616 00da FFF7FEFF 		bl	HAL_OSPI_AutoPolling
 617 00de 0346     		mov	r3, r0
 618              		.loc 1 244 8 discriminator 1
 619 00e0 002B     		cmp	r3, #0
 620 00e2 02D0     		beq	.L28
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 16


 245:Drivers/Chip/w25q64/w25q64.c ****     {
 246:Drivers/Chip/w25q64/w25q64.c ****         return W25Qxx_ERROR_AUTOPOLLING; // ÂÖÑ¯µÈ´ýÎÞÏìÓ¦
 621              		.loc 1 246 16
 622 00e4 6FF00203 		mvn	r3, #2
 623 00e8 00E0     		b	.L29
 624              	.L28:
 247:Drivers/Chip/w25q64/w25q64.c ****     }
 248:Drivers/Chip/w25q64/w25q64.c ****     return OSPI_W25Qxx_OK; // Í¨ÐÅÕý³£½áÊø
 625              		.loc 1 248 12
 626 00ea 0023     		movs	r3, #0
 627              	.L29:
 249:Drivers/Chip/w25q64/w25q64.c **** }
 628              		.loc 1 249 1
 629 00ec 1846     		mov	r0, r3
 630 00ee 6837     		adds	r7, r7, #104
 631              	.LCFI23:
 632              		.cfi_def_cfa_offset 8
 633 00f0 BD46     		mov	sp, r7
 634              	.LCFI24:
 635              		.cfi_def_cfa_register 13
 636              		@ sp needed
 637 00f2 80BD     		pop	{r7, pc}
 638              	.L31:
 639              		.align	2
 640              	.L30:
 641 00f4 00000000 		.word	hospi2
 642              		.cfi_endproc
 643              	.LFE148:
 645              		.section	.text.OSPI_W25Qxx_SectorErase,"ax",%progbits
 646              		.align	1
 647              		.global	OSPI_W25Qxx_SectorErase
 648              		.syntax unified
 649              		.thumb
 650              		.thumb_func
 652              	OSPI_W25Qxx_SectorErase:
 653              	.LFB149:
 250:Drivers/Chip/w25q64/w25q64.c **** 
 251:Drivers/Chip/w25q64/w25q64.c **** /*************************************************************************************************
 252:Drivers/Chip/w25q64/w25q64.c ****  *
 253:Drivers/Chip/w25q64/w25q64.c ****  *	º¯ Êý Ãû: OSPI_W25Qxx_SectorErase
 254:Drivers/Chip/w25q64/w25q64.c ****  *
 255:Drivers/Chip/w25q64/w25q64.c ****  *	Èë¿Ú²ÎÊý: SectorAddress - Òª²Á³ýµÄµØÖ·
 256:Drivers/Chip/w25q64/w25q64.c ****  *
 257:Drivers/Chip/w25q64/w25q64.c ****  *	·µ »Ø Öµ: OSPI_W25Qxx_OK - ²Á³ý³É¹¦
 258:Drivers/Chip/w25q64/w25q64.c ****  *			    W25Qxx_ERROR_Erase - ²Á³ýÊ§°Ü
 259:Drivers/Chip/w25q64/w25q64.c ****  *				 W25Qxx_ERROR_AUTOPOLLING - ÂÖÑ¯µÈ´ýÎÞÏìÓ¦
 260:Drivers/Chip/w25q64/w25q64.c ****  *
 261:Drivers/Chip/w25q64/w25q64.c ****  *	º¯Êý¹¦ÄÜ: ½øÐÐÉÈÇø²Á³ý²Ù×÷£¬Ã¿´Î²Á³ý4K×Ö½Ú
 262:Drivers/Chip/w25q64/w25q64.c ****  *
 263:Drivers/Chip/w25q64/w25q64.c ****  *	Ëµ    Ã÷: 1.°´ÕÕ W25Q64JV Êý¾ÝÊÖ²á¸ø³öµÄ²Á³ý²Î¿¼Ê±¼ä£¬µäÐÍÖµÎª 45ms£¬×î´óÖµÎª400ms
 264:Drivers/Chip/w25q64/w25q64.c ****  *				 2.Êµ¼ÊµÄ²Á³ýËÙ¶È¿ÉÄÜ´óÓÚ45ms£¬Ò²¿ÉÄÜÐ¡ÓÚ45ms
 265:Drivers/Chip/w25q64/w25q64.c ****  *				 3.flashÊ¹ÓÃµÄÊ±¼äÔ½³¤£¬²Á³ýËùÐèÊ±¼äÒ²»áÔ½³¤
 266:Drivers/Chip/w25q64/w25q64.c ****  *
 267:Drivers/Chip/w25q64/w25q64.c ****  **************************************************************************************************
 268:Drivers/Chip/w25q64/w25q64.c **** 
 269:Drivers/Chip/w25q64/w25q64.c **** int8_t OSPI_W25Qxx_SectorErase(uint32_t SectorAddress)
 270:Drivers/Chip/w25q64/w25q64.c **** {
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 17


 654              		.loc 1 270 1
 655              		.cfi_startproc
 656              		@ args = 0, pretend = 0, frame = 88
 657              		@ frame_needed = 1, uses_anonymous_args = 0
 658 0000 80B5     		push	{r7, lr}
 659              	.LCFI25:
 660              		.cfi_def_cfa_offset 8
 661              		.cfi_offset 7, -8
 662              		.cfi_offset 14, -4
 663 0002 96B0     		sub	sp, sp, #88
 664              	.LCFI26:
 665              		.cfi_def_cfa_offset 96
 666 0004 00AF     		add	r7, sp, #0
 667              	.LCFI27:
 668              		.cfi_def_cfa_register 7
 669 0006 7860     		str	r0, [r7, #4]
 271:Drivers/Chip/w25q64/w25q64.c ****     OSPI_RegularCmdTypeDef sCommand; // OSPI´«ÊäÅäÖÃ
 272:Drivers/Chip/w25q64/w25q64.c **** 
 273:Drivers/Chip/w25q64/w25q64.c ****     sCommand.OperationType = HAL_OSPI_OPTYPE_COMMON_CFG;            // Í¨ÓÃÅäÖÃ
 670              		.loc 1 273 28
 671 0008 0023     		movs	r3, #0
 672 000a BB60     		str	r3, [r7, #8]
 274:Drivers/Chip/w25q64/w25q64.c ****     sCommand.FlashId = HAL_OSPI_FLASH_ID_1;                         // flash ID
 673              		.loc 1 274 22
 674 000c 0023     		movs	r3, #0
 675 000e FB60     		str	r3, [r7, #12]
 275:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionMode = HAL_OSPI_INSTRUCTION_1_LINE;         // 1ÏßÖ¸ÁîÄ£Ê½
 676              		.loc 1 275 30
 677 0010 0123     		movs	r3, #1
 678 0012 7B61     		str	r3, [r7, #20]
 276:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionSize = HAL_OSPI_INSTRUCTION_8_BITS;         // Ö¸Áî³¤¶È8Î»
 679              		.loc 1 276 30
 680 0014 0023     		movs	r3, #0
 681 0016 BB61     		str	r3, [r7, #24]
 277:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionDtrMode = HAL_OSPI_INSTRUCTION_DTR_DISABLE; // ½ûÖ¹Ö¸ÁîDTRÄ£Ê½
 682              		.loc 1 277 33
 683 0018 0023     		movs	r3, #0
 684 001a FB61     		str	r3, [r7, #28]
 278:Drivers/Chip/w25q64/w25q64.c ****     sCommand.Address = SectorAddress;                               // µØÖ·
 685              		.loc 1 278 22
 686 001c 7B68     		ldr	r3, [r7, #4]
 687 001e 3B62     		str	r3, [r7, #32]
 279:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressMode = HAL_OSPI_ADDRESS_1_LINE;                 // 1ÏßµØÖ·Ä£Ê½
 688              		.loc 1 279 26
 689 0020 4FF48073 		mov	r3, #256
 690 0024 7B62     		str	r3, [r7, #36]
 280:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressSize = HAL_OSPI_ADDRESS_24_BITS;                // µØÖ·³¤¶È24Î»
 691              		.loc 1 280 26
 692 0026 4FF40053 		mov	r3, #8192
 693 002a BB62     		str	r3, [r7, #40]
 281:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressDtrMode = HAL_OSPI_ADDRESS_DTR_DISABLE;         // ½ûÖ¹µØÖ·DTRÄ£Ê½
 694              		.loc 1 281 29
 695 002c 0023     		movs	r3, #0
 696 002e FB62     		str	r3, [r7, #44]
 282:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AlternateBytesMode = HAL_OSPI_ALTERNATE_BYTES_NONE;    //	ÎÞ½»Ìæ×Ö½Ú
 697              		.loc 1 282 33
 698 0030 0023     		movs	r3, #0
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 18


 699 0032 7B63     		str	r3, [r7, #52]
 283:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DataMode = HAL_OSPI_DATA_NONE;                         // ÎÞÊý¾ÝÄ£Ê½
 700              		.loc 1 283 23
 701 0034 0023     		movs	r3, #0
 702 0036 3B64     		str	r3, [r7, #64]
 284:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DataDtrMode = HAL_OSPI_DATA_DTR_DISABLE;               // ½ûÖ¹Êý¾ÝDTRÄ£Ê½
 703              		.loc 1 284 26
 704 0038 0023     		movs	r3, #0
 705 003a BB64     		str	r3, [r7, #72]
 285:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DummyCycles = 0;                                       // ¿ÕÖÜÆÚ¸öÊý
 706              		.loc 1 285 26
 707 003c 0023     		movs	r3, #0
 708 003e FB64     		str	r3, [r7, #76]
 286:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DQSMode = HAL_OSPI_DQS_DISABLE;                        // ²»Ê¹ÓÃDQS
 709              		.loc 1 286 22
 710 0040 0023     		movs	r3, #0
 711 0042 3B65     		str	r3, [r7, #80]
 287:Drivers/Chip/w25q64/w25q64.c ****     sCommand.SIOOMode = HAL_OSPI_SIOO_INST_EVERY_CMD;               // Ã¿´Î´«ÊäÊý¾Ý¶¼·¢ËÍÖ¸Áî
 712              		.loc 1 287 23
 713 0044 0023     		movs	r3, #0
 714 0046 7B65     		str	r3, [r7, #84]
 288:Drivers/Chip/w25q64/w25q64.c **** 
 289:Drivers/Chip/w25q64/w25q64.c ****     sCommand.Instruction = W25Qxx_CMD_SectorErase; // ÉÈÇø²Á³ýÖ¸Áî£¬Ã¿´Î²Á³ý4K×Ö½Ú
 715              		.loc 1 289 26
 716 0048 2023     		movs	r3, #32
 717 004a 3B61     		str	r3, [r7, #16]
 290:Drivers/Chip/w25q64/w25q64.c **** 
 291:Drivers/Chip/w25q64/w25q64.c ****     // ·¢ËÍÐ´Ê¹ÄÜ
 292:Drivers/Chip/w25q64/w25q64.c ****     if (OSPI_W25Qxx_WriteEnable() != OSPI_W25Qxx_OK)
 718              		.loc 1 292 9
 719 004c FFF7FEFF 		bl	OSPI_W25Qxx_WriteEnable
 720 0050 0346     		mov	r3, r0
 721              		.loc 1 292 8 discriminator 1
 722 0052 002B     		cmp	r3, #0
 723 0054 02D0     		beq	.L33
 293:Drivers/Chip/w25q64/w25q64.c ****     {
 294:Drivers/Chip/w25q64/w25q64.c ****         return W25Qxx_ERROR_WriteEnable; // Ð´Ê¹ÄÜÊ§°Ü
 724              		.loc 1 294 16
 725 0056 6FF00103 		mvn	r3, #1
 726 005a 16E0     		b	.L37
 727              	.L33:
 295:Drivers/Chip/w25q64/w25q64.c ****     }
 296:Drivers/Chip/w25q64/w25q64.c ****     // ·¢ËÍ²Á³ýÖ¸Áî
 297:Drivers/Chip/w25q64/w25q64.c ****     if (HAL_OSPI_Command(&hospi2, &sCommand, HAL_OSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK)
 728              		.loc 1 297 9
 729 005c 07F10803 		add	r3, r7, #8
 730 0060 41F28832 		movw	r2, #5000
 731 0064 1946     		mov	r1, r3
 732 0066 0B48     		ldr	r0, .L38
 733 0068 FFF7FEFF 		bl	HAL_OSPI_Command
 734 006c 0346     		mov	r3, r0
 735              		.loc 1 297 8 discriminator 1
 736 006e 002B     		cmp	r3, #0
 737 0070 02D0     		beq	.L35
 298:Drivers/Chip/w25q64/w25q64.c ****     {
 299:Drivers/Chip/w25q64/w25q64.c ****         return W25Qxx_ERROR_AUTOPOLLING; // ÂÖÑ¯µÈ´ýÎÞÏìÓ¦
 738              		.loc 1 299 16
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 19


 739 0072 6FF00203 		mvn	r3, #2
 740 0076 08E0     		b	.L37
 741              	.L35:
 300:Drivers/Chip/w25q64/w25q64.c ****     }
 301:Drivers/Chip/w25q64/w25q64.c ****     // Ê¹ÓÃ×Ô¶¯ÂÖÑ¯±êÖ¾Î»£¬µÈ´ý²Á³ýµÄ½áÊø
 302:Drivers/Chip/w25q64/w25q64.c ****     if (OSPI_W25Qxx_AutoPollingMemReady() != OSPI_W25Qxx_OK)
 742              		.loc 1 302 9
 743 0078 FFF7FEFF 		bl	OSPI_W25Qxx_AutoPollingMemReady
 744 007c 0346     		mov	r3, r0
 745              		.loc 1 302 8 discriminator 1
 746 007e 002B     		cmp	r3, #0
 747 0080 02D0     		beq	.L36
 303:Drivers/Chip/w25q64/w25q64.c ****     {
 304:Drivers/Chip/w25q64/w25q64.c ****         return W25Qxx_ERROR_AUTOPOLLING; // ÂÖÑ¯µÈ´ýÎÞÏìÓ¦
 748              		.loc 1 304 16
 749 0082 6FF00203 		mvn	r3, #2
 750 0086 00E0     		b	.L37
 751              	.L36:
 305:Drivers/Chip/w25q64/w25q64.c ****     }
 306:Drivers/Chip/w25q64/w25q64.c ****     return OSPI_W25Qxx_OK; // ²Á³ý³É¹¦
 752              		.loc 1 306 12
 753 0088 0023     		movs	r3, #0
 754              	.L37:
 307:Drivers/Chip/w25q64/w25q64.c **** }
 755              		.loc 1 307 1
 756 008a 1846     		mov	r0, r3
 757 008c 5837     		adds	r7, r7, #88
 758              	.LCFI28:
 759              		.cfi_def_cfa_offset 8
 760 008e BD46     		mov	sp, r7
 761              	.LCFI29:
 762              		.cfi_def_cfa_register 13
 763              		@ sp needed
 764 0090 80BD     		pop	{r7, pc}
 765              	.L39:
 766 0092 00BF     		.align	2
 767              	.L38:
 768 0094 00000000 		.word	hospi2
 769              		.cfi_endproc
 770              	.LFE149:
 772              		.section	.text.OSPI_W25Qxx_BlockErase_32K,"ax",%progbits
 773              		.align	1
 774              		.global	OSPI_W25Qxx_BlockErase_32K
 775              		.syntax unified
 776              		.thumb
 777              		.thumb_func
 779              	OSPI_W25Qxx_BlockErase_32K:
 780              	.LFB150:
 308:Drivers/Chip/w25q64/w25q64.c **** 
 309:Drivers/Chip/w25q64/w25q64.c **** /*************************************************************************************************
 310:Drivers/Chip/w25q64/w25q64.c ****  *
 311:Drivers/Chip/w25q64/w25q64.c ****  *	º¯ Êý Ãû: OSPI_W25Qxx_BlockErase_32K
 312:Drivers/Chip/w25q64/w25q64.c ****  *
 313:Drivers/Chip/w25q64/w25q64.c ****  *	Èë¿Ú²ÎÊý: SectorAddress - Òª²Á³ýµÄµØÖ·
 314:Drivers/Chip/w25q64/w25q64.c ****  *
 315:Drivers/Chip/w25q64/w25q64.c ****  *	·µ »Ø Öµ: OSPI_W25Qxx_OK - ²Á³ý³É¹¦
 316:Drivers/Chip/w25q64/w25q64.c ****  *			    W25Qxx_ERROR_Erase - ²Á³ýÊ§°Ü
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 20


 317:Drivers/Chip/w25q64/w25q64.c ****  *				 W25Qxx_ERROR_AUTOPOLLING - ÂÖÑ¯µÈ´ýÎÞÏìÓ¦
 318:Drivers/Chip/w25q64/w25q64.c ****  *
 319:Drivers/Chip/w25q64/w25q64.c ****  *	º¯Êý¹¦ÄÜ: ½øÐÐ¿é²Á³ý²Ù×÷£¬Ã¿´Î²Á³ý32K×Ö½Ú
 320:Drivers/Chip/w25q64/w25q64.c ****  *
 321:Drivers/Chip/w25q64/w25q64.c ****  *	Ëµ    Ã÷: 1.°´ÕÕ W25Q64JV Êý¾ÝÊÖ²á¸ø³öµÄ²Á³ý²Î¿¼Ê±¼ä£¬µäÐÍÖµÎª 120ms£¬×î´óÖµÎª1600ms
 322:Drivers/Chip/w25q64/w25q64.c ****  *				 2.Êµ¼ÊµÄ²Á³ýËÙ¶È¿ÉÄÜ´óÓÚ120ms£¬Ò²¿ÉÄÜÐ¡ÓÚ120ms
 323:Drivers/Chip/w25q64/w25q64.c ****  *				 3.flashÊ¹ÓÃµÄÊ±¼äÔ½³¤£¬²Á³ýËùÐèÊ±¼äÒ²»áÔ½³¤
 324:Drivers/Chip/w25q64/w25q64.c ****  *
 325:Drivers/Chip/w25q64/w25q64.c ****  *************************************************************************************************/
 326:Drivers/Chip/w25q64/w25q64.c **** 
 327:Drivers/Chip/w25q64/w25q64.c **** int8_t OSPI_W25Qxx_BlockErase_32K(uint32_t SectorAddress)
 328:Drivers/Chip/w25q64/w25q64.c **** {
 781              		.loc 1 328 1
 782              		.cfi_startproc
 783              		@ args = 0, pretend = 0, frame = 88
 784              		@ frame_needed = 1, uses_anonymous_args = 0
 785 0000 80B5     		push	{r7, lr}
 786              	.LCFI30:
 787              		.cfi_def_cfa_offset 8
 788              		.cfi_offset 7, -8
 789              		.cfi_offset 14, -4
 790 0002 96B0     		sub	sp, sp, #88
 791              	.LCFI31:
 792              		.cfi_def_cfa_offset 96
 793 0004 00AF     		add	r7, sp, #0
 794              	.LCFI32:
 795              		.cfi_def_cfa_register 7
 796 0006 7860     		str	r0, [r7, #4]
 329:Drivers/Chip/w25q64/w25q64.c ****     OSPI_RegularCmdTypeDef sCommand; // OSPI´«ÊäÅäÖÃ
 330:Drivers/Chip/w25q64/w25q64.c **** 
 331:Drivers/Chip/w25q64/w25q64.c ****     sCommand.OperationType = HAL_OSPI_OPTYPE_COMMON_CFG;            // Í¨ÓÃÅäÖÃ
 797              		.loc 1 331 28
 798 0008 0023     		movs	r3, #0
 799 000a BB60     		str	r3, [r7, #8]
 332:Drivers/Chip/w25q64/w25q64.c ****     sCommand.FlashId = HAL_OSPI_FLASH_ID_1;                         // flash ID
 800              		.loc 1 332 22
 801 000c 0023     		movs	r3, #0
 802 000e FB60     		str	r3, [r7, #12]
 333:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionMode = HAL_OSPI_INSTRUCTION_1_LINE;         // 1ÏßÖ¸ÁîÄ£Ê½
 803              		.loc 1 333 30
 804 0010 0123     		movs	r3, #1
 805 0012 7B61     		str	r3, [r7, #20]
 334:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionSize = HAL_OSPI_INSTRUCTION_8_BITS;         // Ö¸Áî³¤¶È8Î»
 806              		.loc 1 334 30
 807 0014 0023     		movs	r3, #0
 808 0016 BB61     		str	r3, [r7, #24]
 335:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionDtrMode = HAL_OSPI_INSTRUCTION_DTR_DISABLE; // ½ûÖ¹Ö¸ÁîDTRÄ£Ê½
 809              		.loc 1 335 33
 810 0018 0023     		movs	r3, #0
 811 001a FB61     		str	r3, [r7, #28]
 336:Drivers/Chip/w25q64/w25q64.c ****     sCommand.Address = SectorAddress;                               // µØÖ·
 812              		.loc 1 336 22
 813 001c 7B68     		ldr	r3, [r7, #4]
 814 001e 3B62     		str	r3, [r7, #32]
 337:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressMode = HAL_OSPI_ADDRESS_1_LINE;                 // 1ÏßµØÖ·Ä£Ê½
 815              		.loc 1 337 26
 816 0020 4FF48073 		mov	r3, #256
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 21


 817 0024 7B62     		str	r3, [r7, #36]
 338:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressSize = HAL_OSPI_ADDRESS_24_BITS;                // µØÖ·³¤¶È24Î»
 818              		.loc 1 338 26
 819 0026 4FF40053 		mov	r3, #8192
 820 002a BB62     		str	r3, [r7, #40]
 339:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressDtrMode = HAL_OSPI_ADDRESS_DTR_DISABLE;         // ½ûÖ¹µØÖ·DTRÄ£Ê½
 821              		.loc 1 339 29
 822 002c 0023     		movs	r3, #0
 823 002e FB62     		str	r3, [r7, #44]
 340:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AlternateBytesMode = HAL_OSPI_ALTERNATE_BYTES_NONE;    //	ÎÞ½»Ìæ×Ö½Ú
 824              		.loc 1 340 33
 825 0030 0023     		movs	r3, #0
 826 0032 7B63     		str	r3, [r7, #52]
 341:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DataMode = HAL_OSPI_DATA_NONE;                         // ÎÞÊý¾ÝÄ£Ê½
 827              		.loc 1 341 23
 828 0034 0023     		movs	r3, #0
 829 0036 3B64     		str	r3, [r7, #64]
 342:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DataDtrMode = HAL_OSPI_DATA_DTR_DISABLE;               // ½ûÖ¹Êý¾ÝDTRÄ£Ê½
 830              		.loc 1 342 26
 831 0038 0023     		movs	r3, #0
 832 003a BB64     		str	r3, [r7, #72]
 343:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DummyCycles = 0;                                       // ¿ÕÖÜÆÚ¸öÊý
 833              		.loc 1 343 26
 834 003c 0023     		movs	r3, #0
 835 003e FB64     		str	r3, [r7, #76]
 344:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DQSMode = HAL_OSPI_DQS_DISABLE;                        // ²»Ê¹ÓÃDQS
 836              		.loc 1 344 22
 837 0040 0023     		movs	r3, #0
 838 0042 3B65     		str	r3, [r7, #80]
 345:Drivers/Chip/w25q64/w25q64.c ****     sCommand.SIOOMode = HAL_OSPI_SIOO_INST_EVERY_CMD;               // Ã¿´Î´«ÊäÊý¾Ý¶¼·¢ËÍÖ¸Áî
 839              		.loc 1 345 23
 840 0044 0023     		movs	r3, #0
 841 0046 7B65     		str	r3, [r7, #84]
 346:Drivers/Chip/w25q64/w25q64.c **** 
 347:Drivers/Chip/w25q64/w25q64.c ****     sCommand.Instruction = W25Qxx_CMD_BlockErase_32K; // ¿é²Á³ýÖ¸Áî£¬Ã¿´Î²Á³ý32K×Ö½Ú
 842              		.loc 1 347 26
 843 0048 5223     		movs	r3, #82
 844 004a 3B61     		str	r3, [r7, #16]
 348:Drivers/Chip/w25q64/w25q64.c **** 
 349:Drivers/Chip/w25q64/w25q64.c ****     // ·¢ËÍÐ´Ê¹ÄÜ
 350:Drivers/Chip/w25q64/w25q64.c ****     if (OSPI_W25Qxx_WriteEnable() != OSPI_W25Qxx_OK)
 845              		.loc 1 350 9
 846 004c FFF7FEFF 		bl	OSPI_W25Qxx_WriteEnable
 847 0050 0346     		mov	r3, r0
 848              		.loc 1 350 8 discriminator 1
 849 0052 002B     		cmp	r3, #0
 850 0054 02D0     		beq	.L41
 351:Drivers/Chip/w25q64/w25q64.c ****     {
 352:Drivers/Chip/w25q64/w25q64.c ****         return W25Qxx_ERROR_WriteEnable; // Ð´Ê¹ÄÜÊ§°Ü
 851              		.loc 1 352 16
 852 0056 6FF00103 		mvn	r3, #1
 853 005a 16E0     		b	.L45
 854              	.L41:
 353:Drivers/Chip/w25q64/w25q64.c ****     }
 354:Drivers/Chip/w25q64/w25q64.c ****     // ·¢ËÍ²Á³ýÖ¸Áî
 355:Drivers/Chip/w25q64/w25q64.c ****     if (HAL_OSPI_Command(&hospi2, &sCommand, HAL_OSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK)
 855              		.loc 1 355 9
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 22


 856 005c 07F10803 		add	r3, r7, #8
 857 0060 41F28832 		movw	r2, #5000
 858 0064 1946     		mov	r1, r3
 859 0066 0B48     		ldr	r0, .L46
 860 0068 FFF7FEFF 		bl	HAL_OSPI_Command
 861 006c 0346     		mov	r3, r0
 862              		.loc 1 355 8 discriminator 1
 863 006e 002B     		cmp	r3, #0
 864 0070 02D0     		beq	.L43
 356:Drivers/Chip/w25q64/w25q64.c ****     {
 357:Drivers/Chip/w25q64/w25q64.c ****         return W25Qxx_ERROR_AUTOPOLLING; // ÂÖÑ¯µÈ´ýÎÞÏìÓ¦
 865              		.loc 1 357 16
 866 0072 6FF00203 		mvn	r3, #2
 867 0076 08E0     		b	.L45
 868              	.L43:
 358:Drivers/Chip/w25q64/w25q64.c ****     }
 359:Drivers/Chip/w25q64/w25q64.c ****     // Ê¹ÓÃ×Ô¶¯ÂÖÑ¯±êÖ¾Î»£¬µÈ´ý²Á³ýµÄ½áÊø
 360:Drivers/Chip/w25q64/w25q64.c ****     if (OSPI_W25Qxx_AutoPollingMemReady() != OSPI_W25Qxx_OK)
 869              		.loc 1 360 9
 870 0078 FFF7FEFF 		bl	OSPI_W25Qxx_AutoPollingMemReady
 871 007c 0346     		mov	r3, r0
 872              		.loc 1 360 8 discriminator 1
 873 007e 002B     		cmp	r3, #0
 874 0080 02D0     		beq	.L44
 361:Drivers/Chip/w25q64/w25q64.c ****     {
 362:Drivers/Chip/w25q64/w25q64.c ****         return W25Qxx_ERROR_AUTOPOLLING; // ÂÖÑ¯µÈ´ýÎÞÏìÓ¦
 875              		.loc 1 362 16
 876 0082 6FF00203 		mvn	r3, #2
 877 0086 00E0     		b	.L45
 878              	.L44:
 363:Drivers/Chip/w25q64/w25q64.c ****     }
 364:Drivers/Chip/w25q64/w25q64.c ****     return OSPI_W25Qxx_OK; // ²Á³ý³É¹¦
 879              		.loc 1 364 12
 880 0088 0023     		movs	r3, #0
 881              	.L45:
 365:Drivers/Chip/w25q64/w25q64.c **** }
 882              		.loc 1 365 1
 883 008a 1846     		mov	r0, r3
 884 008c 5837     		adds	r7, r7, #88
 885              	.LCFI33:
 886              		.cfi_def_cfa_offset 8
 887 008e BD46     		mov	sp, r7
 888              	.LCFI34:
 889              		.cfi_def_cfa_register 13
 890              		@ sp needed
 891 0090 80BD     		pop	{r7, pc}
 892              	.L47:
 893 0092 00BF     		.align	2
 894              	.L46:
 895 0094 00000000 		.word	hospi2
 896              		.cfi_endproc
 897              	.LFE150:
 899              		.section	.text.OSPI_W25Qxx_BlockErase_64K,"ax",%progbits
 900              		.align	1
 901              		.global	OSPI_W25Qxx_BlockErase_64K
 902              		.syntax unified
 903              		.thumb
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 23


 904              		.thumb_func
 906              	OSPI_W25Qxx_BlockErase_64K:
 907              	.LFB151:
 366:Drivers/Chip/w25q64/w25q64.c **** 
 367:Drivers/Chip/w25q64/w25q64.c **** /*************************************************************************************************
 368:Drivers/Chip/w25q64/w25q64.c ****  *
 369:Drivers/Chip/w25q64/w25q64.c ****  *	º¯ Êý Ãû: OSPI_W25Qxx_BlockErase_64K
 370:Drivers/Chip/w25q64/w25q64.c ****  *
 371:Drivers/Chip/w25q64/w25q64.c ****  *	Èë¿Ú²ÎÊý: SectorAddress - Òª²Á³ýµÄµØÖ·
 372:Drivers/Chip/w25q64/w25q64.c ****  *
 373:Drivers/Chip/w25q64/w25q64.c ****  *	·µ »Ø Öµ: OSPI_W25Qxx_OK - ²Á³ý³É¹¦
 374:Drivers/Chip/w25q64/w25q64.c ****  *			    W25Qxx_ERROR_Erase - ²Á³ýÊ§°Ü
 375:Drivers/Chip/w25q64/w25q64.c ****  *				 W25Qxx_ERROR_AUTOPOLLING - ÂÖÑ¯µÈ´ýÎÞÏìÓ¦
 376:Drivers/Chip/w25q64/w25q64.c ****  *
 377:Drivers/Chip/w25q64/w25q64.c ****  *	º¯Êý¹¦ÄÜ: ½øÐÐ¿é²Á³ý²Ù×÷£¬Ã¿´Î²Á³ý64K×Ö½Ú
 378:Drivers/Chip/w25q64/w25q64.c ****  *
 379:Drivers/Chip/w25q64/w25q64.c ****  *	Ëµ    Ã÷: 1.°´ÕÕ W25Q64JV Êý¾ÝÊÖ²á¸ø³öµÄ²Á³ý²Î¿¼Ê±¼ä£¬µäÐÍÖµÎª 150ms£¬×î´óÖµÎª2000ms
 380:Drivers/Chip/w25q64/w25q64.c ****  *				 2.Êµ¼ÊµÄ²Á³ýËÙ¶È¿ÉÄÜ´óÓÚ150ms£¬Ò²¿ÉÄÜÐ¡ÓÚ150ms
 381:Drivers/Chip/w25q64/w25q64.c ****  *				 3.flashÊ¹ÓÃµÄÊ±¼äÔ½³¤£¬²Á³ýËùÐèÊ±¼äÒ²»áÔ½³¤
 382:Drivers/Chip/w25q64/w25q64.c ****  *				 4.Êµ¼ÊÊ¹ÓÃ½¨ÒéÊ¹ÓÃ64K²Á³ý£¬²Á³ýµÄÊ±¼ä×î¿ì
 383:Drivers/Chip/w25q64/w25q64.c ****  *
 384:Drivers/Chip/w25q64/w25q64.c ****  **************************************************************************************************
 385:Drivers/Chip/w25q64/w25q64.c **** int8_t OSPI_W25Qxx_BlockErase_64K(uint32_t SectorAddress)
 386:Drivers/Chip/w25q64/w25q64.c **** {
 908              		.loc 1 386 1
 909              		.cfi_startproc
 910              		@ args = 0, pretend = 0, frame = 88
 911              		@ frame_needed = 1, uses_anonymous_args = 0
 912 0000 80B5     		push	{r7, lr}
 913              	.LCFI35:
 914              		.cfi_def_cfa_offset 8
 915              		.cfi_offset 7, -8
 916              		.cfi_offset 14, -4
 917 0002 96B0     		sub	sp, sp, #88
 918              	.LCFI36:
 919              		.cfi_def_cfa_offset 96
 920 0004 00AF     		add	r7, sp, #0
 921              	.LCFI37:
 922              		.cfi_def_cfa_register 7
 923 0006 7860     		str	r0, [r7, #4]
 387:Drivers/Chip/w25q64/w25q64.c ****     OSPI_RegularCmdTypeDef sCommand; // OSPI´«ÊäÅäÖÃ
 388:Drivers/Chip/w25q64/w25q64.c **** 
 389:Drivers/Chip/w25q64/w25q64.c ****     sCommand.OperationType = HAL_OSPI_OPTYPE_COMMON_CFG;            // Í¨ÓÃÅäÖÃ
 924              		.loc 1 389 28
 925 0008 0023     		movs	r3, #0
 926 000a BB60     		str	r3, [r7, #8]
 390:Drivers/Chip/w25q64/w25q64.c ****     sCommand.FlashId = HAL_OSPI_FLASH_ID_1;                         // flash ID
 927              		.loc 1 390 22
 928 000c 0023     		movs	r3, #0
 929 000e FB60     		str	r3, [r7, #12]
 391:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionMode = HAL_OSPI_INSTRUCTION_1_LINE;         // 1ÏßÖ¸ÁîÄ£Ê½
 930              		.loc 1 391 30
 931 0010 0123     		movs	r3, #1
 932 0012 7B61     		str	r3, [r7, #20]
 392:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionSize = HAL_OSPI_INSTRUCTION_8_BITS;         // Ö¸Áî³¤¶È8Î»
 933              		.loc 1 392 30
 934 0014 0023     		movs	r3, #0
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 24


 935 0016 BB61     		str	r3, [r7, #24]
 393:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionDtrMode = HAL_OSPI_INSTRUCTION_DTR_DISABLE; // ½ûÖ¹Ö¸ÁîDTRÄ£Ê½
 936              		.loc 1 393 33
 937 0018 0023     		movs	r3, #0
 938 001a FB61     		str	r3, [r7, #28]
 394:Drivers/Chip/w25q64/w25q64.c ****     sCommand.Address = SectorAddress;                               // µØÖ·
 939              		.loc 1 394 22
 940 001c 7B68     		ldr	r3, [r7, #4]
 941 001e 3B62     		str	r3, [r7, #32]
 395:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressMode = HAL_OSPI_ADDRESS_1_LINE;                 // 1ÏßµØÖ·Ä£Ê½
 942              		.loc 1 395 26
 943 0020 4FF48073 		mov	r3, #256
 944 0024 7B62     		str	r3, [r7, #36]
 396:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressSize = HAL_OSPI_ADDRESS_24_BITS;                // µØÖ·³¤¶È24Î»
 945              		.loc 1 396 26
 946 0026 4FF40053 		mov	r3, #8192
 947 002a BB62     		str	r3, [r7, #40]
 397:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressDtrMode = HAL_OSPI_ADDRESS_DTR_DISABLE;         // ½ûÖ¹µØÖ·DTRÄ£Ê½
 948              		.loc 1 397 29
 949 002c 0023     		movs	r3, #0
 950 002e FB62     		str	r3, [r7, #44]
 398:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AlternateBytesMode = HAL_OSPI_ALTERNATE_BYTES_NONE;    //	ÎÞ½»Ìæ×Ö½Ú
 951              		.loc 1 398 33
 952 0030 0023     		movs	r3, #0
 953 0032 7B63     		str	r3, [r7, #52]
 399:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DataMode = HAL_OSPI_DATA_NONE;                         // ÎÞÊý¾ÝÄ£Ê½
 954              		.loc 1 399 23
 955 0034 0023     		movs	r3, #0
 956 0036 3B64     		str	r3, [r7, #64]
 400:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DataDtrMode = HAL_OSPI_DATA_DTR_DISABLE;               // ½ûÖ¹Êý¾ÝDTRÄ£Ê½
 957              		.loc 1 400 26
 958 0038 0023     		movs	r3, #0
 959 003a BB64     		str	r3, [r7, #72]
 401:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DummyCycles = 0;                                       // ¿ÕÖÜÆÚ¸öÊý
 960              		.loc 1 401 26
 961 003c 0023     		movs	r3, #0
 962 003e FB64     		str	r3, [r7, #76]
 402:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DQSMode = HAL_OSPI_DQS_DISABLE;                        // ²»Ê¹ÓÃDQS
 963              		.loc 1 402 22
 964 0040 0023     		movs	r3, #0
 965 0042 3B65     		str	r3, [r7, #80]
 403:Drivers/Chip/w25q64/w25q64.c ****     sCommand.SIOOMode = HAL_OSPI_SIOO_INST_EVERY_CMD;               // Ã¿´Î´«ÊäÊý¾Ý¶¼·¢ËÍÖ¸Áî
 966              		.loc 1 403 23
 967 0044 0023     		movs	r3, #0
 968 0046 7B65     		str	r3, [r7, #84]
 404:Drivers/Chip/w25q64/w25q64.c **** 
 405:Drivers/Chip/w25q64/w25q64.c ****     sCommand.Instruction = W25Qxx_CMD_BlockErase_64K; // ÉÈÇø²Á³ýÖ¸Áî£¬Ã¿´Î²Á³ý64K×Ö½Ú
 969              		.loc 1 405 26
 970 0048 D823     		movs	r3, #216
 971 004a 3B61     		str	r3, [r7, #16]
 406:Drivers/Chip/w25q64/w25q64.c **** 
 407:Drivers/Chip/w25q64/w25q64.c ****     // ·¢ËÍÐ´Ê¹ÄÜ
 408:Drivers/Chip/w25q64/w25q64.c ****     if (OSPI_W25Qxx_WriteEnable() != OSPI_W25Qxx_OK)
 972              		.loc 1 408 9
 973 004c FFF7FEFF 		bl	OSPI_W25Qxx_WriteEnable
 974 0050 0346     		mov	r3, r0
 975              		.loc 1 408 8 discriminator 1
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 25


 976 0052 002B     		cmp	r3, #0
 977 0054 02D0     		beq	.L49
 409:Drivers/Chip/w25q64/w25q64.c ****     {
 410:Drivers/Chip/w25q64/w25q64.c ****         return W25Qxx_ERROR_WriteEnable; // Ð´Ê¹ÄÜÊ§°Ü
 978              		.loc 1 410 16
 979 0056 6FF00103 		mvn	r3, #1
 980 005a 16E0     		b	.L53
 981              	.L49:
 411:Drivers/Chip/w25q64/w25q64.c ****     }
 412:Drivers/Chip/w25q64/w25q64.c ****     // ·¢ËÍ²Á³ýÖ¸Áî
 413:Drivers/Chip/w25q64/w25q64.c ****     if (HAL_OSPI_Command(&hospi2, &sCommand, HAL_OSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK)
 982              		.loc 1 413 9
 983 005c 07F10803 		add	r3, r7, #8
 984 0060 41F28832 		movw	r2, #5000
 985 0064 1946     		mov	r1, r3
 986 0066 0B48     		ldr	r0, .L54
 987 0068 FFF7FEFF 		bl	HAL_OSPI_Command
 988 006c 0346     		mov	r3, r0
 989              		.loc 1 413 8 discriminator 1
 990 006e 002B     		cmp	r3, #0
 991 0070 02D0     		beq	.L51
 414:Drivers/Chip/w25q64/w25q64.c ****     {
 415:Drivers/Chip/w25q64/w25q64.c ****         return W25Qxx_ERROR_AUTOPOLLING; // ÂÖÑ¯µÈ´ýÎÞÏìÓ¦
 992              		.loc 1 415 16
 993 0072 6FF00203 		mvn	r3, #2
 994 0076 08E0     		b	.L53
 995              	.L51:
 416:Drivers/Chip/w25q64/w25q64.c ****     }
 417:Drivers/Chip/w25q64/w25q64.c ****     // Ê¹ÓÃ×Ô¶¯ÂÖÑ¯±êÖ¾Î»£¬µÈ´ý²Á³ýµÄ½áÊø
 418:Drivers/Chip/w25q64/w25q64.c ****     if (OSPI_W25Qxx_AutoPollingMemReady() != OSPI_W25Qxx_OK)
 996              		.loc 1 418 9
 997 0078 FFF7FEFF 		bl	OSPI_W25Qxx_AutoPollingMemReady
 998 007c 0346     		mov	r3, r0
 999              		.loc 1 418 8 discriminator 1
 1000 007e 002B     		cmp	r3, #0
 1001 0080 02D0     		beq	.L52
 419:Drivers/Chip/w25q64/w25q64.c ****     {
 420:Drivers/Chip/w25q64/w25q64.c ****         return W25Qxx_ERROR_AUTOPOLLING; // ÂÖÑ¯µÈ´ýÎÞÏìÓ¦
 1002              		.loc 1 420 16
 1003 0082 6FF00203 		mvn	r3, #2
 1004 0086 00E0     		b	.L53
 1005              	.L52:
 421:Drivers/Chip/w25q64/w25q64.c ****     }
 422:Drivers/Chip/w25q64/w25q64.c ****     return OSPI_W25Qxx_OK; // ²Á³ý³É¹¦
 1006              		.loc 1 422 12
 1007 0088 0023     		movs	r3, #0
 1008              	.L53:
 423:Drivers/Chip/w25q64/w25q64.c **** }
 1009              		.loc 1 423 1
 1010 008a 1846     		mov	r0, r3
 1011 008c 5837     		adds	r7, r7, #88
 1012              	.LCFI38:
 1013              		.cfi_def_cfa_offset 8
 1014 008e BD46     		mov	sp, r7
 1015              	.LCFI39:
 1016              		.cfi_def_cfa_register 13
 1017              		@ sp needed
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 26


 1018 0090 80BD     		pop	{r7, pc}
 1019              	.L55:
 1020 0092 00BF     		.align	2
 1021              	.L54:
 1022 0094 00000000 		.word	hospi2
 1023              		.cfi_endproc
 1024              	.LFE151:
 1026              		.section	.text.OSPI_W25Qxx_ChipErase,"ax",%progbits
 1027              		.align	1
 1028              		.global	OSPI_W25Qxx_ChipErase
 1029              		.syntax unified
 1030              		.thumb
 1031              		.thumb_func
 1033              	OSPI_W25Qxx_ChipErase:
 1034              	.LFB152:
 424:Drivers/Chip/w25q64/w25q64.c **** 
 425:Drivers/Chip/w25q64/w25q64.c **** /*************************************************************************************************
 426:Drivers/Chip/w25q64/w25q64.c ****  *
 427:Drivers/Chip/w25q64/w25q64.c ****  *	º¯ Êý Ãû: OSPI_W25Qxx_ChipErase
 428:Drivers/Chip/w25q64/w25q64.c ****  *
 429:Drivers/Chip/w25q64/w25q64.c ****  *	Èë¿Ú²ÎÊý: ÎÞ
 430:Drivers/Chip/w25q64/w25q64.c ****  *
 431:Drivers/Chip/w25q64/w25q64.c ****  *	·µ »Ø Öµ: OSPI_W25Qxx_OK - ²Á³ý³É¹¦
 432:Drivers/Chip/w25q64/w25q64.c ****  *			    W25Qxx_ERROR_Erase - ²Á³ýÊ§°Ü
 433:Drivers/Chip/w25q64/w25q64.c ****  *				 W25Qxx_ERROR_AUTOPOLLING - ÂÖÑ¯µÈ´ýÎÞÏìÓ¦
 434:Drivers/Chip/w25q64/w25q64.c ****  *
 435:Drivers/Chip/w25q64/w25q64.c ****  *	º¯Êý¹¦ÄÜ: ½øÐÐÕûÆ¬²Á³ý²Ù×÷
 436:Drivers/Chip/w25q64/w25q64.c ****  *
 437:Drivers/Chip/w25q64/w25q64.c ****  *	Ëµ    Ã÷: 1.°´ÕÕ W25Q64JV Êý¾ÝÊÖ²á¸ø³öµÄ²Á³ý²Î¿¼Ê±¼ä£¬µäÐÍÖµÎª 20s£¬×î´óÖµÎª100s
 438:Drivers/Chip/w25q64/w25q64.c ****  *				 2.Êµ¼ÊµÄ²Á³ýËÙ¶È¿ÉÄÜ´óÓÚ20s£¬Ò²¿ÉÄÜÐ¡ÓÚ20s
 439:Drivers/Chip/w25q64/w25q64.c ****  *				 3.flashÊ¹ÓÃµÄÊ±¼äÔ½³¤£¬²Á³ýËùÐèÊ±¼äÒ²»áÔ½³¤
 440:Drivers/Chip/w25q64/w25q64.c ****  *
 441:Drivers/Chip/w25q64/w25q64.c ****  *************************************************************************************************/
 442:Drivers/Chip/w25q64/w25q64.c **** int8_t OSPI_W25Qxx_ChipErase(void)
 443:Drivers/Chip/w25q64/w25q64.c **** {
 1035              		.loc 1 443 1
 1036              		.cfi_startproc
 1037              		@ args = 0, pretend = 0, frame = 104
 1038              		@ frame_needed = 1, uses_anonymous_args = 0
 1039 0000 80B5     		push	{r7, lr}
 1040              	.LCFI40:
 1041              		.cfi_def_cfa_offset 8
 1042              		.cfi_offset 7, -8
 1043              		.cfi_offset 14, -4
 1044 0002 9AB0     		sub	sp, sp, #104
 1045              	.LCFI41:
 1046              		.cfi_def_cfa_offset 112
 1047 0004 00AF     		add	r7, sp, #0
 1048              	.LCFI42:
 1049              		.cfi_def_cfa_register 7
 444:Drivers/Chip/w25q64/w25q64.c ****     OSPI_RegularCmdTypeDef sCommand; // OSPI´«ÊäÅäÖÃ
 445:Drivers/Chip/w25q64/w25q64.c ****     OSPI_AutoPollingTypeDef sConfig; // ÂÖÑ¯±È½ÏÏà¹ØÅäÖÃ²ÎÊý
 446:Drivers/Chip/w25q64/w25q64.c **** 
 447:Drivers/Chip/w25q64/w25q64.c ****     sCommand.OperationType = HAL_OSPI_OPTYPE_COMMON_CFG;            // Í¨ÓÃÅäÖÃ
 1050              		.loc 1 447 28
 1051 0006 0023     		movs	r3, #0
 1052 0008 BB61     		str	r3, [r7, #24]
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 27


 448:Drivers/Chip/w25q64/w25q64.c ****     sCommand.FlashId = HAL_OSPI_FLASH_ID_1;                         // flash ID
 1053              		.loc 1 448 22
 1054 000a 0023     		movs	r3, #0
 1055 000c FB61     		str	r3, [r7, #28]
 449:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionMode = HAL_OSPI_INSTRUCTION_1_LINE;         // 1ÏßÖ¸ÁîÄ£Ê½
 1056              		.loc 1 449 30
 1057 000e 0123     		movs	r3, #1
 1058 0010 7B62     		str	r3, [r7, #36]
 450:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionSize = HAL_OSPI_INSTRUCTION_8_BITS;         // Ö¸Áî³¤¶È8Î»
 1059              		.loc 1 450 30
 1060 0012 0023     		movs	r3, #0
 1061 0014 BB62     		str	r3, [r7, #40]
 451:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionDtrMode = HAL_OSPI_INSTRUCTION_DTR_DISABLE; // ½ûÖ¹Ö¸ÁîDTRÄ£Ê½
 1062              		.loc 1 451 33
 1063 0016 0023     		movs	r3, #0
 1064 0018 FB62     		str	r3, [r7, #44]
 452:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressMode = HAL_OSPI_ADDRESS_NONE;                   // ÎÞµØÖ·Ä£Ê½
 1065              		.loc 1 452 26
 1066 001a 0023     		movs	r3, #0
 1067 001c 7B63     		str	r3, [r7, #52]
 453:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressDtrMode = HAL_OSPI_ADDRESS_DTR_DISABLE;         // ½ûÖ¹µØÖ·DTRÄ£Ê½
 1068              		.loc 1 453 29
 1069 001e 0023     		movs	r3, #0
 1070 0020 FB63     		str	r3, [r7, #60]
 454:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AlternateBytesMode = HAL_OSPI_ALTERNATE_BYTES_NONE;    //	ÎÞ½»Ìæ×Ö½Ú
 1071              		.loc 1 454 33
 1072 0022 0023     		movs	r3, #0
 1073 0024 7B64     		str	r3, [r7, #68]
 455:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DataMode = HAL_OSPI_DATA_NONE;                         // ÎÞÊý¾ÝÄ£Ê½
 1074              		.loc 1 455 23
 1075 0026 0023     		movs	r3, #0
 1076 0028 3B65     		str	r3, [r7, #80]
 456:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DataDtrMode = HAL_OSPI_DATA_DTR_DISABLE;               // ½ûÖ¹Êý¾ÝDTRÄ£Ê½
 1077              		.loc 1 456 26
 1078 002a 0023     		movs	r3, #0
 1079 002c BB65     		str	r3, [r7, #88]
 457:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DummyCycles = 0;                                       // ¿ÕÖÜÆÚ¸öÊý
 1080              		.loc 1 457 26
 1081 002e 0023     		movs	r3, #0
 1082 0030 FB65     		str	r3, [r7, #92]
 458:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DQSMode = HAL_OSPI_DQS_DISABLE;                        // ²»Ê¹ÓÃDQS
 1083              		.loc 1 458 22
 1084 0032 0023     		movs	r3, #0
 1085 0034 3B66     		str	r3, [r7, #96]
 459:Drivers/Chip/w25q64/w25q64.c ****     sCommand.SIOOMode = HAL_OSPI_SIOO_INST_EVERY_CMD;               // Ã¿´Î´«ÊäÊý¾Ý¶¼·¢ËÍÖ¸Áî
 1086              		.loc 1 459 23
 1087 0036 0023     		movs	r3, #0
 1088 0038 7B66     		str	r3, [r7, #100]
 460:Drivers/Chip/w25q64/w25q64.c **** 
 461:Drivers/Chip/w25q64/w25q64.c ****     sCommand.Instruction = W25Qxx_CMD_ChipErase; // È«Æ¬²Á³ýÖ¸Áî
 1089              		.loc 1 461 26
 1090 003a C723     		movs	r3, #199
 1091 003c 3B62     		str	r3, [r7, #32]
 462:Drivers/Chip/w25q64/w25q64.c **** 
 463:Drivers/Chip/w25q64/w25q64.c ****     // ·¢ËÍÐ´Ê¹ÄÜ
 464:Drivers/Chip/w25q64/w25q64.c ****     if (OSPI_W25Qxx_WriteEnable() != OSPI_W25Qxx_OK)
 1092              		.loc 1 464 9
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 28


 1093 003e FFF7FEFF 		bl	OSPI_W25Qxx_WriteEnable
 1094 0042 0346     		mov	r3, r0
 1095              		.loc 1 464 8 discriminator 1
 1096 0044 002B     		cmp	r3, #0
 1097 0046 02D0     		beq	.L57
 465:Drivers/Chip/w25q64/w25q64.c ****     {
 466:Drivers/Chip/w25q64/w25q64.c ****         return W25Qxx_ERROR_WriteEnable; // Ð´Ê¹ÄÜÊ§°Ü
 1098              		.loc 1 466 16
 1099 0048 6FF00103 		mvn	r3, #1
 1100 004c 3AE0     		b	.L62
 1101              	.L57:
 467:Drivers/Chip/w25q64/w25q64.c ****     }
 468:Drivers/Chip/w25q64/w25q64.c ****     // ·¢ËÍ²Á³ýÖ¸Áî
 469:Drivers/Chip/w25q64/w25q64.c ****     if (HAL_OSPI_Command(&hospi2, &sCommand, HAL_OSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK)
 1102              		.loc 1 469 9
 1103 004e 07F11803 		add	r3, r7, #24
 1104 0052 41F28832 		movw	r2, #5000
 1105 0056 1946     		mov	r1, r3
 1106 0058 1C48     		ldr	r0, .L63
 1107 005a FFF7FEFF 		bl	HAL_OSPI_Command
 1108 005e 0346     		mov	r3, r0
 1109              		.loc 1 469 8 discriminator 1
 1110 0060 002B     		cmp	r3, #0
 1111 0062 02D0     		beq	.L59
 470:Drivers/Chip/w25q64/w25q64.c ****     {
 471:Drivers/Chip/w25q64/w25q64.c ****         return W25Qxx_ERROR_AUTOPOLLING; // ÂÖÑ¯µÈ´ýÎÞÏìÓ¦
 1112              		.loc 1 471 16
 1113 0064 6FF00203 		mvn	r3, #2
 1114 0068 2CE0     		b	.L62
 1115              	.L59:
 472:Drivers/Chip/w25q64/w25q64.c ****     }
 473:Drivers/Chip/w25q64/w25q64.c **** 
 474:Drivers/Chip/w25q64/w25q64.c ****     // ·¢ËÍ²éÑ¯×´Ì¬¼Ä´æÆ÷ÃüÁî
 475:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DataMode = HAL_OSPI_DATA_1_LINE;          // Ò»ÏßÊý¾ÝÄ£Ê½
 1116              		.loc 1 475 23
 1117 006a 4FF08073 		mov	r3, #16777216
 1118 006e 3B65     		str	r3, [r7, #80]
 476:Drivers/Chip/w25q64/w25q64.c ****     sCommand.NbData = 1;                               // Êý¾Ý³¤¶È1
 1119              		.loc 1 476 21
 1120 0070 0123     		movs	r3, #1
 1121 0072 7B65     		str	r3, [r7, #84]
 477:Drivers/Chip/w25q64/w25q64.c ****     sCommand.Instruction = W25Qxx_CMD_ReadStatus_REG1; // ×´Ì¬¼Ä´æÆ÷ÃüÁî
 1122              		.loc 1 477 26
 1123 0074 0523     		movs	r3, #5
 1124 0076 3B62     		str	r3, [r7, #32]
 478:Drivers/Chip/w25q64/w25q64.c **** 
 479:Drivers/Chip/w25q64/w25q64.c ****     if (HAL_OSPI_Command(&hospi2, &sCommand, HAL_OSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK)
 1125              		.loc 1 479 9
 1126 0078 07F11803 		add	r3, r7, #24
 1127 007c 41F28832 		movw	r2, #5000
 1128 0080 1946     		mov	r1, r3
 1129 0082 1248     		ldr	r0, .L63
 1130 0084 FFF7FEFF 		bl	HAL_OSPI_Command
 1131 0088 0346     		mov	r3, r0
 1132              		.loc 1 479 8 discriminator 1
 1133 008a 002B     		cmp	r3, #0
 1134 008c 02D0     		beq	.L60
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 29


 480:Drivers/Chip/w25q64/w25q64.c ****     {
 481:Drivers/Chip/w25q64/w25q64.c ****         return W25Qxx_ERROR_AUTOPOLLING;
 1135              		.loc 1 481 16
 1136 008e 6FF00203 		mvn	r3, #2
 1137 0092 17E0     		b	.L62
 1138              	.L60:
 482:Drivers/Chip/w25q64/w25q64.c ****     }
 483:Drivers/Chip/w25q64/w25q64.c **** 
 484:Drivers/Chip/w25q64/w25q64.c ****     // ²»Í£µÄ²éÑ¯ W25Qxx_CMD_ReadStatus_REG1 ¼Ä´æÆ÷£¬½«¶ÁÈ¡µ½µÄ×´Ì¬×Ö½ÚÖÐµÄ W25Qxx_Status_REG1_BUSY
 485:Drivers/Chip/w25q64/w25q64.c ****     // ¶Á×´Ì¬¼Ä´æÆ÷1µÄµÚ0Î»£¨Ö»¶Á£©£¬Busy±êÖ¾Î»£¬µ±ÕýÔÚ²Á³ý/Ð´ÈëÊý¾Ý/Ð´ÃüÁîÊ±»á±»ÖÃ1£¬¿ÕÏÐ»òÍ¨ÐÅ½áÊ
 486:Drivers/Chip/w25q64/w25q64.c **** 
 487:Drivers/Chip/w25q64/w25q64.c ****     sConfig.Match = 0;                                      //	Æ¥ÅäÖµ
 1139              		.loc 1 487 19
 1140 0094 0023     		movs	r3, #0
 1141 0096 7B60     		str	r3, [r7, #4]
 488:Drivers/Chip/w25q64/w25q64.c ****     sConfig.MatchMode = HAL_OSPI_MATCH_MODE_AND;            //	ÓëÔËËã
 1142              		.loc 1 488 23
 1143 0098 0023     		movs	r3, #0
 1144 009a FB60     		str	r3, [r7, #12]
 489:Drivers/Chip/w25q64/w25q64.c ****     sConfig.Interval = 0x10;                                //	ÂÖÑ¯¼ä¸ô
 1145              		.loc 1 489 22
 1146 009c 1023     		movs	r3, #16
 1147 009e 7B61     		str	r3, [r7, #20]
 490:Drivers/Chip/w25q64/w25q64.c ****     sConfig.AutomaticStop = HAL_OSPI_AUTOMATIC_STOP_ENABLE; // ×Ô¶¯Í£Ö¹Ä£Ê½
 1148              		.loc 1 490 27
 1149 00a0 4FF48003 		mov	r3, #4194304
 1150 00a4 3B61     		str	r3, [r7, #16]
 491:Drivers/Chip/w25q64/w25q64.c ****     sConfig.Mask = W25Qxx_Status_REG1_BUSY;                 // ¶ÔÔÚÂÖÑ¯Ä£Ê½ÏÂ½ÓÊÕµÄ×´Ì¬×Ö½Ú½øÐÐÆÁ±Î
 1151              		.loc 1 491 18
 1152 00a6 0123     		movs	r3, #1
 1153 00a8 BB60     		str	r3, [r7, #8]
 492:Drivers/Chip/w25q64/w25q64.c **** 
 493:Drivers/Chip/w25q64/w25q64.c ****     // W25Q64ÕûÆ¬²Á³ýµÄµäÐÍ²Î¿¼Ê±¼äÎª20s£¬×î´óÊ±¼äÎª100s£¬ÕâÀïµÄ³¬Ê±µÈ´ýÖµ W25Qxx_ChipErase_TIMEOUT
 494:Drivers/Chip/w25q64/w25q64.c ****     if (HAL_OSPI_AutoPolling(&hospi2, &sConfig, W25Qxx_ChipErase_TIMEOUT_MAX) != HAL_OK)
 1154              		.loc 1 494 9
 1155 00aa 3B1D     		adds	r3, r7, #4
 1156 00ac 084A     		ldr	r2, .L63+4
 1157 00ae 1946     		mov	r1, r3
 1158 00b0 0648     		ldr	r0, .L63
 1159 00b2 FFF7FEFF 		bl	HAL_OSPI_AutoPolling
 1160 00b6 0346     		mov	r3, r0
 1161              		.loc 1 494 8 discriminator 1
 1162 00b8 002B     		cmp	r3, #0
 1163 00ba 02D0     		beq	.L61
 495:Drivers/Chip/w25q64/w25q64.c ****     {
 496:Drivers/Chip/w25q64/w25q64.c ****         return W25Qxx_ERROR_AUTOPOLLING; // ÂÖÑ¯µÈ´ýÎÞÏìÓ¦
 1164              		.loc 1 496 16
 1165 00bc 6FF00203 		mvn	r3, #2
 1166 00c0 00E0     		b	.L62
 1167              	.L61:
 497:Drivers/Chip/w25q64/w25q64.c ****     }
 498:Drivers/Chip/w25q64/w25q64.c ****     return OSPI_W25Qxx_OK; // ²Á³ý³É¹¦
 1168              		.loc 1 498 12
 1169 00c2 0023     		movs	r3, #0
 1170              	.L62:
 499:Drivers/Chip/w25q64/w25q64.c **** }
 1171              		.loc 1 499 1
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 30


 1172 00c4 1846     		mov	r0, r3
 1173 00c6 6837     		adds	r7, r7, #104
 1174              	.LCFI43:
 1175              		.cfi_def_cfa_offset 8
 1176 00c8 BD46     		mov	sp, r7
 1177              	.LCFI44:
 1178              		.cfi_def_cfa_register 13
 1179              		@ sp needed
 1180 00ca 80BD     		pop	{r7, pc}
 1181              	.L64:
 1182              		.align	2
 1183              	.L63:
 1184 00cc 00000000 		.word	hospi2
 1185 00d0 A0860100 		.word	100000
 1186              		.cfi_endproc
 1187              	.LFE152:
 1189              		.section	.text.OSPI_W25Qxx_WritePage,"ax",%progbits
 1190              		.align	1
 1191              		.global	OSPI_W25Qxx_WritePage
 1192              		.syntax unified
 1193              		.thumb
 1194              		.thumb_func
 1196              	OSPI_W25Qxx_WritePage:
 1197              	.LFB153:
 500:Drivers/Chip/w25q64/w25q64.c **** 
 501:Drivers/Chip/w25q64/w25q64.c **** /**************************************************************************************************
 502:Drivers/Chip/w25q64/w25q64.c ****  *
 503:Drivers/Chip/w25q64/w25q64.c ****  *	º¯ Êý Ãû: OSPI_W25Qxx_WritePage
 504:Drivers/Chip/w25q64/w25q64.c ****  *
 505:Drivers/Chip/w25q64/w25q64.c ****  *	Èë¿Ú²ÎÊý: pBuffer 		 - ÒªÐ´ÈëµÄÊý¾Ý
 506:Drivers/Chip/w25q64/w25q64.c ****  *				 WriteAddr 		 - ÒªÐ´Èë W25Qxx µÄµØÖ·
 507:Drivers/Chip/w25q64/w25q64.c ****  *				 NumByteToWrite - Êý¾Ý³¤¶È£¬×î´óÖ»ÄÜ256×Ö½Ú
 508:Drivers/Chip/w25q64/w25q64.c ****  *
 509:Drivers/Chip/w25q64/w25q64.c ****  *	·µ »Ø Öµ: OSPI_W25Qxx_OK 		     - Ð´Êý¾Ý³É¹¦
 510:Drivers/Chip/w25q64/w25q64.c ****  *			    W25Qxx_ERROR_WriteEnable - Ð´Ê¹ÄÜÊ§°Ü
 511:Drivers/Chip/w25q64/w25q64.c ****  *				 W25Qxx_ERROR_TRANSMIT	  - ´«ÊäÊ§°Ü
 512:Drivers/Chip/w25q64/w25q64.c ****  *				 W25Qxx_ERROR_AUTOPOLLING - ÂÖÑ¯µÈ´ýÎÞÏìÓ¦
 513:Drivers/Chip/w25q64/w25q64.c ****  *
 514:Drivers/Chip/w25q64/w25q64.c ****  *	º¯Êý¹¦ÄÜ: °´Ò³Ð´Èë£¬×î´óÖ»ÄÜ256×Ö½Ú£¬ÔÚÊý¾ÝÐ´ÈëÖ®Ç°£¬ÇëÎñ±ØÍê³É²Á³ý²Ù×÷
 515:Drivers/Chip/w25q64/w25q64.c ****  *
 516:Drivers/Chip/w25q64/w25q64.c ****  *	Ëµ    Ã÷: 1.FlashµÄÐ´ÈëÊ±¼äºÍ²Á³ýÊ±¼äÒ»Ñù£¬ÊÇÏÞ¶¨µÄ£¬²¢²»ÊÇËµOSPIÇý¶¯Ê±ÖÓ133M¾Í¿ÉÒÔÒÔÕâ¸öËÙ¶È½øÐ
 517:Drivers/Chip/w25q64/w25q64.c ****  *				 2.°´ÕÕ W25Q64JV Êý¾ÝÊÖ²á¸ø³öµÄ Ò³(256×Ö½Ú) Ð´Èë²Î¿¼Ê±¼ä£¬µäÐÍÖµÎª 0.4ms£¬×î´óÖµÎª3ms
 518:Drivers/Chip/w25q64/w25q64.c ****  *				 3.Êµ¼ÊµÄÐ´ÈëËÙ¶È¿ÉÄÜ´óÓÚ0.4ms£¬Ò²¿ÉÄÜÐ¡ÓÚ0.4ms
 519:Drivers/Chip/w25q64/w25q64.c ****  *				 4.FlashÊ¹ÓÃµÄÊ±¼äÔ½³¤£¬Ð´ÈëËùÐèÊ±¼äÒ²»áÔ½³¤
 520:Drivers/Chip/w25q64/w25q64.c ****  *				 5.ÔÚÊý¾ÝÐ´ÈëÖ®Ç°£¬ÇëÎñ±ØÍê³É²Á³ý²Ù×÷
 521:Drivers/Chip/w25q64/w25q64.c ****  *
 522:Drivers/Chip/w25q64/w25q64.c ****  **************************************************************************************************
 523:Drivers/Chip/w25q64/w25q64.c **** int8_t OSPI_W25Qxx_WritePage(uint8_t *pBuffer, uint32_t WriteAddr, uint16_t NumByteToWrite)
 524:Drivers/Chip/w25q64/w25q64.c **** {
 1198              		.loc 1 524 1
 1199              		.cfi_startproc
 1200              		@ args = 0, pretend = 0, frame = 96
 1201              		@ frame_needed = 1, uses_anonymous_args = 0
 1202 0000 80B5     		push	{r7, lr}
 1203              	.LCFI45:
 1204              		.cfi_def_cfa_offset 8
 1205              		.cfi_offset 7, -8
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 31


 1206              		.cfi_offset 14, -4
 1207 0002 98B0     		sub	sp, sp, #96
 1208              	.LCFI46:
 1209              		.cfi_def_cfa_offset 104
 1210 0004 00AF     		add	r7, sp, #0
 1211              	.LCFI47:
 1212              		.cfi_def_cfa_register 7
 1213 0006 F860     		str	r0, [r7, #12]
 1214 0008 B960     		str	r1, [r7, #8]
 1215 000a 1346     		mov	r3, r2
 1216 000c FB80     		strh	r3, [r7, #6]	@ movhi
 525:Drivers/Chip/w25q64/w25q64.c ****     OSPI_RegularCmdTypeDef sCommand; // OSPI´«ÊäÅäÖÃ
 526:Drivers/Chip/w25q64/w25q64.c **** 
 527:Drivers/Chip/w25q64/w25q64.c ****     sCommand.OperationType = HAL_OSPI_OPTYPE_COMMON_CFG; // Í¨ÓÃÅäÖÃ
 1217              		.loc 1 527 28
 1218 000e 0023     		movs	r3, #0
 1219 0010 3B61     		str	r3, [r7, #16]
 528:Drivers/Chip/w25q64/w25q64.c ****     sCommand.FlashId = HAL_OSPI_FLASH_ID_1;              // flash ID
 1220              		.loc 1 528 22
 1221 0012 0023     		movs	r3, #0
 1222 0014 7B61     		str	r3, [r7, #20]
 529:Drivers/Chip/w25q64/w25q64.c **** 
 530:Drivers/Chip/w25q64/w25q64.c ****     sCommand.Instruction = W25Qxx_CMD_QuadInputPageProgram;         // 1-1-4Ä£Ê½ÏÂ(1ÏßÖ¸Áî1ÏßµØÖ·4Ï
 1223              		.loc 1 530 26
 1224 0016 3223     		movs	r3, #50
 1225 0018 BB61     		str	r3, [r7, #24]
 531:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionMode = HAL_OSPI_INSTRUCTION_1_LINE;         // 1ÏßÖ¸ÁîÄ£Ê½
 1226              		.loc 1 531 30
 1227 001a 0123     		movs	r3, #1
 1228 001c FB61     		str	r3, [r7, #28]
 532:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionSize = HAL_OSPI_INSTRUCTION_8_BITS;         // Ö¸Áî³¤¶È8Î»
 1229              		.loc 1 532 30
 1230 001e 0023     		movs	r3, #0
 1231 0020 3B62     		str	r3, [r7, #32]
 533:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionDtrMode = HAL_OSPI_INSTRUCTION_DTR_DISABLE; // ½ûÖ¹Ö¸ÁîDTRÄ£Ê½
 1232              		.loc 1 533 33
 1233 0022 0023     		movs	r3, #0
 1234 0024 7B62     		str	r3, [r7, #36]
 534:Drivers/Chip/w25q64/w25q64.c **** 
 535:Drivers/Chip/w25q64/w25q64.c ****     sCommand.Address = WriteAddr;                           // µØÖ·
 1235              		.loc 1 535 22
 1236 0026 BB68     		ldr	r3, [r7, #8]
 1237 0028 BB62     		str	r3, [r7, #40]
 536:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressMode = HAL_OSPI_ADDRESS_1_LINE;         // 1ÏßµØÖ·Ä£Ê½
 1238              		.loc 1 536 26
 1239 002a 4FF48073 		mov	r3, #256
 1240 002e FB62     		str	r3, [r7, #44]
 537:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressSize = HAL_OSPI_ADDRESS_24_BITS;        // µØÖ·³¤¶È24Î»
 1241              		.loc 1 537 26
 1242 0030 4FF40053 		mov	r3, #8192
 1243 0034 3B63     		str	r3, [r7, #48]
 538:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressDtrMode = HAL_OSPI_ADDRESS_DTR_DISABLE; // ½ûÖ¹µØÖ·DTRÄ£Ê½
 1244              		.loc 1 538 29
 1245 0036 0023     		movs	r3, #0
 1246 0038 7B63     		str	r3, [r7, #52]
 539:Drivers/Chip/w25q64/w25q64.c **** 
 540:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AlternateBytesMode = HAL_OSPI_ALTERNATE_BYTES_NONE;           // ÎÞ½»Ìæ×Ö½Ú
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 32


 1247              		.loc 1 540 33
 1248 003a 0023     		movs	r3, #0
 1249 003c FB63     		str	r3, [r7, #60]
 541:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AlternateBytesDtrMode = HAL_OSPI_ALTERNATE_BYTES_DTR_DISABLE; // ½ûÖ¹Ìæ×Ö½ÚDTRÄ£Ê½
 1250              		.loc 1 541 36
 1251 003e 0023     		movs	r3, #0
 1252 0040 7B64     		str	r3, [r7, #68]
 542:Drivers/Chip/w25q64/w25q64.c **** 
 543:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DataMode = HAL_OSPI_DATA_4_LINES;        // 4ÏßÊý¾ÝÄ£Ê½
 1253              		.loc 1 543 23
 1254 0042 4FF04073 		mov	r3, #50331648
 1255 0046 BB64     		str	r3, [r7, #72]
 544:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DataDtrMode = HAL_OSPI_DATA_DTR_DISABLE; // ½ûÖ¹Êý¾ÝDTRÄ£Ê½
 1256              		.loc 1 544 26
 1257 0048 0023     		movs	r3, #0
 1258 004a 3B65     		str	r3, [r7, #80]
 545:Drivers/Chip/w25q64/w25q64.c ****     sCommand.NbData = NumByteToWrite;                 // Êý¾Ý³¤¶È
 1259              		.loc 1 545 21
 1260 004c FB88     		ldrh	r3, [r7, #6]
 1261 004e FB64     		str	r3, [r7, #76]
 546:Drivers/Chip/w25q64/w25q64.c **** 
 547:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DummyCycles = 0;                         // ¿ÕÖÜÆÚ¸öÊý
 1262              		.loc 1 547 26
 1263 0050 0023     		movs	r3, #0
 1264 0052 7B65     		str	r3, [r7, #84]
 548:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DQSMode = HAL_OSPI_DQS_DISABLE;          // ²»Ê¹ÓÃDQS
 1265              		.loc 1 548 22
 1266 0054 0023     		movs	r3, #0
 1267 0056 BB65     		str	r3, [r7, #88]
 549:Drivers/Chip/w25q64/w25q64.c ****     sCommand.SIOOMode = HAL_OSPI_SIOO_INST_EVERY_CMD; // Ã¿´Î´«ÊäÊý¾Ý¶¼·¢ËÍÖ¸Áî
 1268              		.loc 1 549 23
 1269 0058 0023     		movs	r3, #0
 1270 005a FB65     		str	r3, [r7, #92]
 550:Drivers/Chip/w25q64/w25q64.c **** 
 551:Drivers/Chip/w25q64/w25q64.c ****     // Ð´Ê¹ÄÜ
 552:Drivers/Chip/w25q64/w25q64.c ****     if (OSPI_W25Qxx_WriteEnable() != OSPI_W25Qxx_OK)
 1271              		.loc 1 552 9
 1272 005c FFF7FEFF 		bl	OSPI_W25Qxx_WriteEnable
 1273 0060 0346     		mov	r3, r0
 1274              		.loc 1 552 8 discriminator 1
 1275 0062 002B     		cmp	r3, #0
 1276 0064 02D0     		beq	.L66
 553:Drivers/Chip/w25q64/w25q64.c ****     {
 554:Drivers/Chip/w25q64/w25q64.c ****         return W25Qxx_ERROR_WriteEnable; // Ð´Ê¹ÄÜÊ§°Ü
 1277              		.loc 1 554 16
 1278 0066 6FF00103 		mvn	r3, #1
 1279 006a 22E0     		b	.L71
 1280              	.L66:
 555:Drivers/Chip/w25q64/w25q64.c ****     }
 556:Drivers/Chip/w25q64/w25q64.c ****     // Ð´ÃüÁî
 557:Drivers/Chip/w25q64/w25q64.c ****     if (HAL_OSPI_Command(&hospi2, &sCommand, HAL_OSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK)
 1281              		.loc 1 557 9
 1282 006c 07F11003 		add	r3, r7, #16
 1283 0070 41F28832 		movw	r2, #5000
 1284 0074 1946     		mov	r1, r3
 1285 0076 1148     		ldr	r0, .L72
 1286 0078 FFF7FEFF 		bl	HAL_OSPI_Command
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 33


 1287 007c 0346     		mov	r3, r0
 1288              		.loc 1 557 8 discriminator 1
 1289 007e 002B     		cmp	r3, #0
 1290 0080 02D0     		beq	.L68
 558:Drivers/Chip/w25q64/w25q64.c ****     {
 559:Drivers/Chip/w25q64/w25q64.c ****         return W25Qxx_ERROR_TRANSMIT; // ´«ÊäÊý¾Ý´íÎó
 1291              		.loc 1 559 16
 1292 0082 6FF00403 		mvn	r3, #4
 1293 0086 14E0     		b	.L71
 1294              	.L68:
 560:Drivers/Chip/w25q64/w25q64.c ****     }
 561:Drivers/Chip/w25q64/w25q64.c ****     // ¿ªÊ¼´«ÊäÊý¾Ý
 562:Drivers/Chip/w25q64/w25q64.c ****     if (HAL_OSPI_Transmit(&hospi2, pBuffer, HAL_OSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK)
 1295              		.loc 1 562 9
 1296 0088 41F28832 		movw	r2, #5000
 1297 008c F968     		ldr	r1, [r7, #12]
 1298 008e 0B48     		ldr	r0, .L72
 1299 0090 FFF7FEFF 		bl	HAL_OSPI_Transmit
 1300 0094 0346     		mov	r3, r0
 1301              		.loc 1 562 8 discriminator 1
 1302 0096 002B     		cmp	r3, #0
 1303 0098 02D0     		beq	.L69
 563:Drivers/Chip/w25q64/w25q64.c ****     {
 564:Drivers/Chip/w25q64/w25q64.c ****         return W25Qxx_ERROR_TRANSMIT; // ´«ÊäÊý¾Ý´íÎó
 1304              		.loc 1 564 16
 1305 009a 6FF00403 		mvn	r3, #4
 1306 009e 08E0     		b	.L71
 1307              	.L69:
 565:Drivers/Chip/w25q64/w25q64.c ****     }
 566:Drivers/Chip/w25q64/w25q64.c ****     // Ê¹ÓÃ×Ô¶¯ÂÖÑ¯±êÖ¾Î»£¬µÈ´ýÐ´ÈëµÄ½áÊø
 567:Drivers/Chip/w25q64/w25q64.c ****     if (OSPI_W25Qxx_AutoPollingMemReady() != OSPI_W25Qxx_OK)
 1308              		.loc 1 567 9
 1309 00a0 FFF7FEFF 		bl	OSPI_W25Qxx_AutoPollingMemReady
 1310 00a4 0346     		mov	r3, r0
 1311              		.loc 1 567 8 discriminator 1
 1312 00a6 002B     		cmp	r3, #0
 1313 00a8 02D0     		beq	.L70
 568:Drivers/Chip/w25q64/w25q64.c ****     {
 569:Drivers/Chip/w25q64/w25q64.c ****         return W25Qxx_ERROR_AUTOPOLLING; // ÂÖÑ¯µÈ´ýÎÞÏìÓ¦
 1314              		.loc 1 569 16
 1315 00aa 6FF00203 		mvn	r3, #2
 1316 00ae 00E0     		b	.L71
 1317              	.L70:
 570:Drivers/Chip/w25q64/w25q64.c ****     }
 571:Drivers/Chip/w25q64/w25q64.c ****     return OSPI_W25Qxx_OK; // Ð´Êý¾Ý³É¹¦
 1318              		.loc 1 571 12
 1319 00b0 0023     		movs	r3, #0
 1320              	.L71:
 572:Drivers/Chip/w25q64/w25q64.c **** }
 1321              		.loc 1 572 1
 1322 00b2 1846     		mov	r0, r3
 1323 00b4 6037     		adds	r7, r7, #96
 1324              	.LCFI48:
 1325              		.cfi_def_cfa_offset 8
 1326 00b6 BD46     		mov	sp, r7
 1327              	.LCFI49:
 1328              		.cfi_def_cfa_register 13
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 34


 1329              		@ sp needed
 1330 00b8 80BD     		pop	{r7, pc}
 1331              	.L73:
 1332 00ba 00BF     		.align	2
 1333              	.L72:
 1334 00bc 00000000 		.word	hospi2
 1335              		.cfi_endproc
 1336              	.LFE153:
 1338              		.section	.text.OSPI_W25Qxx_WriteBuffer,"ax",%progbits
 1339              		.align	1
 1340              		.global	OSPI_W25Qxx_WriteBuffer
 1341              		.syntax unified
 1342              		.thumb
 1343              		.thumb_func
 1345              	OSPI_W25Qxx_WriteBuffer:
 1346              	.LFB154:
 573:Drivers/Chip/w25q64/w25q64.c **** 
 574:Drivers/Chip/w25q64/w25q64.c **** /**************************************************************************************************
 575:Drivers/Chip/w25q64/w25q64.c ****  *
 576:Drivers/Chip/w25q64/w25q64.c ****  *	º¯ Êý Ãû: OSPI_W25Qxx_WriteBuffer
 577:Drivers/Chip/w25q64/w25q64.c ****  *
 578:Drivers/Chip/w25q64/w25q64.c ****  *	Èë¿Ú²ÎÊý: pBuffer 		 - ÒªÐ´ÈëµÄÊý¾Ý
 579:Drivers/Chip/w25q64/w25q64.c ****  *				 WriteAddr 		 - ÒªÐ´Èë W25Qxx µÄµØÖ·
 580:Drivers/Chip/w25q64/w25q64.c ****  *				 NumByteToWrite - Êý¾Ý³¤¶È£¬×î´ó²»ÄÜ³¬¹ýflashÐ¾Æ¬µÄ´óÐ¡
 581:Drivers/Chip/w25q64/w25q64.c ****  *
 582:Drivers/Chip/w25q64/w25q64.c ****  *	·µ »Ø Öµ: OSPI_W25Qxx_OK 		     - Ð´Êý¾Ý³É¹¦
 583:Drivers/Chip/w25q64/w25q64.c ****  *			    W25Qxx_ERROR_WriteEnable - Ð´Ê¹ÄÜÊ§°Ü
 584:Drivers/Chip/w25q64/w25q64.c ****  *				 W25Qxx_ERROR_TRANSMIT	  - ´«ÊäÊ§°Ü
 585:Drivers/Chip/w25q64/w25q64.c ****  *				 W25Qxx_ERROR_AUTOPOLLING - ÂÖÑ¯µÈ´ýÎÞÏìÓ¦
 586:Drivers/Chip/w25q64/w25q64.c ****  *
 587:Drivers/Chip/w25q64/w25q64.c ****  *	º¯Êý¹¦ÄÜ: Ð´ÈëÊý¾Ý£¬×î´ó²»ÄÜ³¬¹ýflashÐ¾Æ¬µÄ´óÐ¡£¬ÇëÎñ±ØÍê³É²Á³ý²Ù×÷
 588:Drivers/Chip/w25q64/w25q64.c ****  *
 589:Drivers/Chip/w25q64/w25q64.c ****  *	Ëµ    Ã÷: 1.FlashµÄÐ´ÈëÊ±¼äºÍ²Á³ýÊ±¼äÒ»Ñù£¬ÊÇÓÐÏÞ¶¨µÄ£¬²¢²»ÊÇËµOSPIÇý¶¯Ê±ÖÓ133M¾Í¿ÉÒÔÒÔÕâ¸öËÙ¶È½
 590:Drivers/Chip/w25q64/w25q64.c ****  *				 2.°´ÕÕ W25Q64JV Êý¾ÝÊÖ²á¸ø³öµÄ Ò³ Ð´Èë²Î¿¼Ê±¼ä£¬µäÐÍÖµÎª 0.4ms£¬×î´óÖµÎª3ms
 591:Drivers/Chip/w25q64/w25q64.c ****  *				 3.Êµ¼ÊµÄÐ´ÈëËÙ¶È¿ÉÄÜ´óÓÚ0.4ms£¬Ò²¿ÉÄÜÐ¡ÓÚ0.4ms
 592:Drivers/Chip/w25q64/w25q64.c ****  *				 4.FlashÊ¹ÓÃµÄÊ±¼äÔ½³¤£¬Ð´ÈëËùÐèÊ±¼äÒ²»áÔ½³¤
 593:Drivers/Chip/w25q64/w25q64.c ****  *				 5.ÔÚÊý¾ÝÐ´ÈëÖ®Ç°£¬ÇëÎñ±ØÍê³É²Á³ý²Ù×÷
 594:Drivers/Chip/w25q64/w25q64.c ****  *				 6.¸Ãº¯ÊýÒÆÖ²ÓÚ stm32h743i_eval_qspi.c
 595:Drivers/Chip/w25q64/w25q64.c ****  *
 596:Drivers/Chip/w25q64/w25q64.c ****  **************************************************************************************************
 597:Drivers/Chip/w25q64/w25q64.c **** 
 598:Drivers/Chip/w25q64/w25q64.c **** int8_t OSPI_W25Qxx_WriteBuffer(uint8_t *pBuffer, uint32_t WriteAddr, uint32_t Size)
 599:Drivers/Chip/w25q64/w25q64.c **** {
 1347              		.loc 1 599 1
 1348              		.cfi_startproc
 1349              		@ args = 0, pretend = 0, frame = 32
 1350              		@ frame_needed = 1, uses_anonymous_args = 0
 1351 0000 80B5     		push	{r7, lr}
 1352              	.LCFI50:
 1353              		.cfi_def_cfa_offset 8
 1354              		.cfi_offset 7, -8
 1355              		.cfi_offset 14, -4
 1356 0002 88B0     		sub	sp, sp, #32
 1357              	.LCFI51:
 1358              		.cfi_def_cfa_offset 40
 1359 0004 00AF     		add	r7, sp, #0
 1360              	.LCFI52:
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 35


 1361              		.cfi_def_cfa_register 7
 1362 0006 F860     		str	r0, [r7, #12]
 1363 0008 B960     		str	r1, [r7, #8]
 1364 000a 7A60     		str	r2, [r7, #4]
 600:Drivers/Chip/w25q64/w25q64.c ****     uint32_t end_addr, current_size, current_addr;
 601:Drivers/Chip/w25q64/w25q64.c ****     uint8_t *write_data; // ÒªÐ´ÈëµÄÊý¾Ý
 602:Drivers/Chip/w25q64/w25q64.c **** 
 603:Drivers/Chip/w25q64/w25q64.c ****     current_size = W25Qxx_PageSize - (WriteAddr % W25Qxx_PageSize); // ¼ÆËãµ±Ç°Ò³»¹Ê£ÓàµÄ¿Õ¼ä
 1365              		.loc 1 603 49
 1366 000c BB68     		ldr	r3, [r7, #8]
 1367 000e DBB2     		uxtb	r3, r3
 1368              		.loc 1 603 18
 1369 0010 C3F58073 		rsb	r3, r3, #256
 1370 0014 FB61     		str	r3, [r7, #28]
 604:Drivers/Chip/w25q64/w25q64.c **** 
 605:Drivers/Chip/w25q64/w25q64.c ****     if (current_size > Size) // ÅÐ¶Ïµ±Ç°Ò³Ê£ÓàµÄ¿Õ¼äÊÇ·ñ×ã¹»Ð´ÈëËùÓÐÊý¾Ý
 1371              		.loc 1 605 8
 1372 0016 FA69     		ldr	r2, [r7, #28]
 1373 0018 7B68     		ldr	r3, [r7, #4]
 1374 001a 9A42     		cmp	r2, r3
 1375 001c 01D9     		bls	.L75
 606:Drivers/Chip/w25q64/w25q64.c ****     {
 607:Drivers/Chip/w25q64/w25q64.c ****         current_size = Size; // Èç¹û×ã¹»£¬ÔòÖ±½Ó»ñÈ¡µ±Ç°³¤¶È
 1376              		.loc 1 607 22
 1377 001e 7B68     		ldr	r3, [r7, #4]
 1378 0020 FB61     		str	r3, [r7, #28]
 1379              	.L75:
 608:Drivers/Chip/w25q64/w25q64.c ****     }
 609:Drivers/Chip/w25q64/w25q64.c **** 
 610:Drivers/Chip/w25q64/w25q64.c ****     current_addr = WriteAddr;    // »ñÈ¡ÒªÐ´ÈëµÄµØÖ·
 1380              		.loc 1 610 18
 1381 0022 BB68     		ldr	r3, [r7, #8]
 1382 0024 BB61     		str	r3, [r7, #24]
 611:Drivers/Chip/w25q64/w25q64.c ****     end_addr = WriteAddr + Size; // ¼ÆËã½áÊøµØÖ·
 1383              		.loc 1 611 14
 1384 0026 BA68     		ldr	r2, [r7, #8]
 1385 0028 7B68     		ldr	r3, [r7, #4]
 1386 002a 1344     		add	r3, r3, r2
 1387 002c 3B61     		str	r3, [r7, #16]
 612:Drivers/Chip/w25q64/w25q64.c ****     write_data = pBuffer;        // »ñÈ¡ÒªÐ´ÈëµÄÊý¾Ý
 1388              		.loc 1 612 16
 1389 002e FB68     		ldr	r3, [r7, #12]
 1390 0030 7B61     		str	r3, [r7, #20]
 1391              	.L80:
 613:Drivers/Chip/w25q64/w25q64.c **** 
 614:Drivers/Chip/w25q64/w25q64.c ****     do
 615:Drivers/Chip/w25q64/w25q64.c ****     {
 616:Drivers/Chip/w25q64/w25q64.c ****         // °´Ò³Ð´ÈëÊý¾Ý
 617:Drivers/Chip/w25q64/w25q64.c ****         if (OSPI_W25Qxx_WritePage(write_data, current_addr, current_size) != OSPI_W25Qxx_OK)
 1392              		.loc 1 617 13
 1393 0032 FB69     		ldr	r3, [r7, #28]
 1394 0034 9BB2     		uxth	r3, r3
 1395 0036 1A46     		mov	r2, r3
 1396 0038 B969     		ldr	r1, [r7, #24]
 1397 003a 7869     		ldr	r0, [r7, #20]
 1398 003c FFF7FEFF 		bl	OSPI_W25Qxx_WritePage
 1399 0040 0346     		mov	r3, r0
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 36


 1400              		.loc 1 617 12 discriminator 1
 1401 0042 002B     		cmp	r3, #0
 1402 0044 02D0     		beq	.L76
 618:Drivers/Chip/w25q64/w25q64.c ****         {
 619:Drivers/Chip/w25q64/w25q64.c ****             return W25Qxx_ERROR_TRANSMIT;
 1403              		.loc 1 619 20
 1404 0046 6FF00403 		mvn	r3, #4
 1405 004a 19E0     		b	.L77
 1406              	.L76:
 620:Drivers/Chip/w25q64/w25q64.c ****         }
 621:Drivers/Chip/w25q64/w25q64.c **** 
 622:Drivers/Chip/w25q64/w25q64.c ****         else // °´Ò³Ð´ÈëÊý¾Ý³É¹¦£¬½øÐÐÏÂÒ»´ÎÐ´Êý¾ÝµÄ×¼±¸¹¤×÷
 623:Drivers/Chip/w25q64/w25q64.c ****         {
 624:Drivers/Chip/w25q64/w25q64.c ****             current_addr += current_size; // ¼ÆËãÏÂÒ»´ÎÒªÐ´ÈëµÄµØÖ·
 1407              		.loc 1 624 26
 1408 004c BA69     		ldr	r2, [r7, #24]
 1409 004e FB69     		ldr	r3, [r7, #28]
 1410 0050 1344     		add	r3, r3, r2
 1411 0052 BB61     		str	r3, [r7, #24]
 625:Drivers/Chip/w25q64/w25q64.c ****             write_data += current_size;   // »ñÈ¡ÏÂÒ»´ÎÒªÐ´ÈëµÄÊý¾Ý´æ´¢ÇøµØÖ·
 1412              		.loc 1 625 24
 1413 0054 7A69     		ldr	r2, [r7, #20]
 1414 0056 FB69     		ldr	r3, [r7, #28]
 1415 0058 1344     		add	r3, r3, r2
 1416 005a 7B61     		str	r3, [r7, #20]
 626:Drivers/Chip/w25q64/w25q64.c ****             // ¼ÆËãÏÂÒ»´ÎÐ´Êý¾ÝµÄ³¤¶È
 627:Drivers/Chip/w25q64/w25q64.c ****             current_size = ((current_addr + W25Qxx_PageSize) > end_addr) ? (end_addr - current_addr
 1417              		.loc 1 627 43
 1418 005c BB69     		ldr	r3, [r7, #24]
 1419 005e 03F58073 		add	r3, r3, #256
 1420              		.loc 1 627 102
 1421 0062 3A69     		ldr	r2, [r7, #16]
 1422 0064 9A42     		cmp	r2, r3
 1423 0066 03D2     		bcs	.L78
 1424              		.loc 1 627 102 is_stmt 0 discriminator 1
 1425 0068 3A69     		ldr	r2, [r7, #16]
 1426 006a BB69     		ldr	r3, [r7, #24]
 1427 006c D31A     		subs	r3, r2, r3
 1428 006e 01E0     		b	.L79
 1429              	.L78:
 1430              		.loc 1 627 102 discriminator 2
 1431 0070 4FF48073 		mov	r3, #256
 1432              	.L79:
 1433              		.loc 1 627 26 is_stmt 1 discriminator 4
 1434 0074 FB61     		str	r3, [r7, #28]
 628:Drivers/Chip/w25q64/w25q64.c ****         }
 629:Drivers/Chip/w25q64/w25q64.c ****     } while (current_addr < end_addr); // ÅÐ¶ÏÊý¾ÝÊÇ·ñÈ«²¿Ð´ÈëÍê±Ï
 1435              		.loc 1 629 27
 1436 0076 BA69     		ldr	r2, [r7, #24]
 1437 0078 3B69     		ldr	r3, [r7, #16]
 1438 007a 9A42     		cmp	r2, r3
 1439 007c D9D3     		bcc	.L80
 630:Drivers/Chip/w25q64/w25q64.c **** 
 631:Drivers/Chip/w25q64/w25q64.c ****     return OSPI_W25Qxx_OK; // Ð´ÈëÊý¾Ý³É¹¦
 1440              		.loc 1 631 12
 1441 007e 0023     		movs	r3, #0
 1442              	.L77:
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 37


 632:Drivers/Chip/w25q64/w25q64.c **** }
 1443              		.loc 1 632 1
 1444 0080 1846     		mov	r0, r3
 1445 0082 2037     		adds	r7, r7, #32
 1446              	.LCFI53:
 1447              		.cfi_def_cfa_offset 8
 1448 0084 BD46     		mov	sp, r7
 1449              	.LCFI54:
 1450              		.cfi_def_cfa_register 13
 1451              		@ sp needed
 1452 0086 80BD     		pop	{r7, pc}
 1453              		.cfi_endproc
 1454              	.LFE154:
 1456              		.section	.text.OSPI_W25Qxx_ReadBuffer,"ax",%progbits
 1457              		.align	1
 1458              		.global	OSPI_W25Qxx_ReadBuffer
 1459              		.syntax unified
 1460              		.thumb
 1461              		.thumb_func
 1463              	OSPI_W25Qxx_ReadBuffer:
 1464              	.LFB155:
 633:Drivers/Chip/w25q64/w25q64.c **** 
 634:Drivers/Chip/w25q64/w25q64.c **** /**************************************************************************************************
 635:Drivers/Chip/w25q64/w25q64.c ****  *
 636:Drivers/Chip/w25q64/w25q64.c ****  *	º¯ Êý Ãû: OSPI_W25Qxx_ReadBuffer
 637:Drivers/Chip/w25q64/w25q64.c ****  *
 638:Drivers/Chip/w25q64/w25q64.c ****  *	Èë¿Ú²ÎÊý: pBuffer 		 - Òª¶ÁÈ¡µÄÊý¾Ý
 639:Drivers/Chip/w25q64/w25q64.c ****  *				 ReadAddr 		 - Òª¶ÁÈ¡ W25Qxx µÄµØÖ·
 640:Drivers/Chip/w25q64/w25q64.c ****  *				 NumByteToRead  - Êý¾Ý³¤¶È£¬×î´ó²»ÄÜ³¬¹ýflashÐ¾Æ¬µÄ´óÐ¡
 641:Drivers/Chip/w25q64/w25q64.c ****  *
 642:Drivers/Chip/w25q64/w25q64.c ****  *	·µ »Ø Öµ: OSPI_W25Qxx_OK 		     - ¶ÁÊý¾Ý³É¹¦
 643:Drivers/Chip/w25q64/w25q64.c ****  *				 W25Qxx_ERROR_TRANSMIT	  - ´«ÊäÊ§°Ü
 644:Drivers/Chip/w25q64/w25q64.c ****  *				 W25Qxx_ERROR_AUTOPOLLING - ÂÖÑ¯µÈ´ýÎÞÏìÓ¦
 645:Drivers/Chip/w25q64/w25q64.c ****  *
 646:Drivers/Chip/w25q64/w25q64.c ****  *	º¯Êý¹¦ÄÜ: ¶ÁÈ¡Êý¾Ý£¬×î´ó²»ÄÜ³¬¹ýflashÐ¾Æ¬µÄ´óÐ¡
 647:Drivers/Chip/w25q64/w25q64.c ****  *
 648:Drivers/Chip/w25q64/w25q64.c ****  *	Ëµ    Ã÷: 1.FlashµÄ¶ÁÈ¡ËÙ¶ÈÈ¡¾öÓÚOSPIµÄÍ¨ÐÅÊ±ÖÓ£¬×î´ó²»ÄÜ³¬¹ý133M
 649:Drivers/Chip/w25q64/w25q64.c ****  *				 2.ÕâÀïÊ¹ÓÃµÄÊÇ1-4-4Ä£Ê½ÏÂ(1ÏßÖ¸Áî4ÏßµØÖ·4ÏßÊý¾Ý)£¬¿ìËÙ¶ÁÈ¡Ö¸Áî Fast Read Quad I/O
 650:Drivers/Chip/w25q64/w25q64.c ****  *				 3.Ê¹ÓÃ¿ìËÙ¶ÁÈ¡Ö¸ÁîÊÇÓÐ¿ÕÖÜÆÚµÄ£¬¾ßÌå²Î¿¼W25Q64JVµÄÊÖ²á  Fast Read Quad I/O  £¨0xEB£©Ö¸Áî
 651:Drivers/Chip/w25q64/w25q64.c ****  *				 4.Êµ¼ÊÊ¹ÓÃÖÐ£¬ÊÇ·ñÊ¹ÓÃDMA¡¢±àÒëÆ÷µÄÓÅ»¯µÈ¼¶ÒÔ¼°Êý¾Ý´æ´¢ÇøµÄÎ»ÖÃ(ÄÚ²¿ TCM SRAM »òÕß AXI SRAM)
 652:Drivers/Chip/w25q64/w25q64.c ****  *  FANKE
 653:Drivers/Chip/w25q64/w25q64.c ****  **************************************************************************************************
 654:Drivers/Chip/w25q64/w25q64.c **** 
 655:Drivers/Chip/w25q64/w25q64.c **** int8_t OSPI_W25Qxx_ReadBuffer(uint8_t *pBuffer, uint32_t ReadAddr, uint32_t NumByteToRead)
 656:Drivers/Chip/w25q64/w25q64.c **** {
 1465              		.loc 1 656 1
 1466              		.cfi_startproc
 1467              		@ args = 0, pretend = 0, frame = 96
 1468              		@ frame_needed = 1, uses_anonymous_args = 0
 1469 0000 80B5     		push	{r7, lr}
 1470              	.LCFI55:
 1471              		.cfi_def_cfa_offset 8
 1472              		.cfi_offset 7, -8
 1473              		.cfi_offset 14, -4
 1474 0002 98B0     		sub	sp, sp, #96
 1475              	.LCFI56:
 1476              		.cfi_def_cfa_offset 104
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 38


 1477 0004 00AF     		add	r7, sp, #0
 1478              	.LCFI57:
 1479              		.cfi_def_cfa_register 7
 1480 0006 F860     		str	r0, [r7, #12]
 1481 0008 B960     		str	r1, [r7, #8]
 1482 000a 7A60     		str	r2, [r7, #4]
 657:Drivers/Chip/w25q64/w25q64.c ****     OSPI_RegularCmdTypeDef sCommand; // OSPI´«ÊäÅäÖÃ
 658:Drivers/Chip/w25q64/w25q64.c **** 
 659:Drivers/Chip/w25q64/w25q64.c ****     sCommand.OperationType = HAL_OSPI_OPTYPE_COMMON_CFG; // Í¨ÓÃÅäÖÃ
 1483              		.loc 1 659 28
 1484 000c 0023     		movs	r3, #0
 1485 000e 3B61     		str	r3, [r7, #16]
 660:Drivers/Chip/w25q64/w25q64.c ****     sCommand.FlashId = HAL_OSPI_FLASH_ID_1;              // flash ID
 1486              		.loc 1 660 22
 1487 0010 0023     		movs	r3, #0
 1488 0012 7B61     		str	r3, [r7, #20]
 661:Drivers/Chip/w25q64/w25q64.c **** 
 662:Drivers/Chip/w25q64/w25q64.c ****     sCommand.Instruction = W25Qxx_CMD_FastReadQuad_IO;              // 1-4-4Ä£Ê½ÏÂ(1ÏßÖ¸Áî4ÏßµØÖ·4Ï
 1489              		.loc 1 662 26
 1490 0014 EB23     		movs	r3, #235
 1491 0016 BB61     		str	r3, [r7, #24]
 663:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionMode = HAL_OSPI_INSTRUCTION_1_LINE;         // 1ÏßÖ¸ÁîÄ£Ê½
 1492              		.loc 1 663 30
 1493 0018 0123     		movs	r3, #1
 1494 001a FB61     		str	r3, [r7, #28]
 664:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionSize = HAL_OSPI_INSTRUCTION_8_BITS;         // Ö¸Áî³¤¶È8Î»
 1495              		.loc 1 664 30
 1496 001c 0023     		movs	r3, #0
 1497 001e 3B62     		str	r3, [r7, #32]
 665:Drivers/Chip/w25q64/w25q64.c ****     sCommand.InstructionDtrMode = HAL_OSPI_INSTRUCTION_DTR_DISABLE; // ½ûÖ¹Ö¸ÁîDTRÄ£Ê½
 1498              		.loc 1 665 33
 1499 0020 0023     		movs	r3, #0
 1500 0022 7B62     		str	r3, [r7, #36]
 666:Drivers/Chip/w25q64/w25q64.c **** 
 667:Drivers/Chip/w25q64/w25q64.c ****     sCommand.Address = ReadAddr;                            // µØÖ·
 1501              		.loc 1 667 22
 1502 0024 BB68     		ldr	r3, [r7, #8]
 1503 0026 BB62     		str	r3, [r7, #40]
 668:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressMode = HAL_OSPI_ADDRESS_4_LINES;        // 4ÏßµØÖ·Ä£Ê½
 1504              		.loc 1 668 26
 1505 0028 4FF44073 		mov	r3, #768
 1506 002c FB62     		str	r3, [r7, #44]
 669:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressSize = HAL_OSPI_ADDRESS_24_BITS;        // µØÖ·³¤¶È24Î»
 1507              		.loc 1 669 26
 1508 002e 4FF40053 		mov	r3, #8192
 1509 0032 3B63     		str	r3, [r7, #48]
 670:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AddressDtrMode = HAL_OSPI_ADDRESS_DTR_DISABLE; // ½ûÖ¹µØÖ·DTRÄ£Ê½
 1510              		.loc 1 670 29
 1511 0034 0023     		movs	r3, #0
 1512 0036 7B63     		str	r3, [r7, #52]
 671:Drivers/Chip/w25q64/w25q64.c **** 
 672:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AlternateBytesMode = HAL_OSPI_ALTERNATE_BYTES_NONE;           // ÎÞ½»Ìæ×Ö½Ú
 1513              		.loc 1 672 33
 1514 0038 0023     		movs	r3, #0
 1515 003a FB63     		str	r3, [r7, #60]
 673:Drivers/Chip/w25q64/w25q64.c ****     sCommand.AlternateBytesDtrMode = HAL_OSPI_ALTERNATE_BYTES_DTR_DISABLE; // ½ûÖ¹Ìæ×Ö½ÚDTRÄ£Ê½
 1516              		.loc 1 673 36
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 39


 1517 003c 0023     		movs	r3, #0
 1518 003e 7B64     		str	r3, [r7, #68]
 674:Drivers/Chip/w25q64/w25q64.c **** 
 675:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DataMode = HAL_OSPI_DATA_4_LINES;        // 4ÏßÊý¾ÝÄ£Ê½
 1519              		.loc 1 675 23
 1520 0040 4FF04073 		mov	r3, #50331648
 1521 0044 BB64     		str	r3, [r7, #72]
 676:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DataDtrMode = HAL_OSPI_DATA_DTR_DISABLE; // ½ûÖ¹Êý¾ÝDTRÄ£Ê½
 1522              		.loc 1 676 26
 1523 0046 0023     		movs	r3, #0
 1524 0048 3B65     		str	r3, [r7, #80]
 677:Drivers/Chip/w25q64/w25q64.c ****     sCommand.NbData = NumByteToRead;                  // Êý¾Ý³¤¶È
 1525              		.loc 1 677 21
 1526 004a 7B68     		ldr	r3, [r7, #4]
 1527 004c FB64     		str	r3, [r7, #76]
 678:Drivers/Chip/w25q64/w25q64.c **** 
 679:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DummyCycles = 6;                         // ¿ÕÖÜÆÚ¸öÊý
 1528              		.loc 1 679 26
 1529 004e 0623     		movs	r3, #6
 1530 0050 7B65     		str	r3, [r7, #84]
 680:Drivers/Chip/w25q64/w25q64.c ****     sCommand.DQSMode = HAL_OSPI_DQS_DISABLE;          // ²»Ê¹ÓÃDQS
 1531              		.loc 1 680 22
 1532 0052 0023     		movs	r3, #0
 1533 0054 BB65     		str	r3, [r7, #88]
 681:Drivers/Chip/w25q64/w25q64.c ****     sCommand.SIOOMode = HAL_OSPI_SIOO_INST_EVERY_CMD; // Ã¿´Î´«ÊäÊý¾Ý¶¼·¢ËÍÖ¸Áî
 1534              		.loc 1 681 23
 1535 0056 0023     		movs	r3, #0
 1536 0058 FB65     		str	r3, [r7, #92]
 682:Drivers/Chip/w25q64/w25q64.c **** 
 683:Drivers/Chip/w25q64/w25q64.c ****     // Ð´ÃüÁî
 684:Drivers/Chip/w25q64/w25q64.c ****     if (HAL_OSPI_Command(&hospi2, &sCommand, HAL_OSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK)
 1537              		.loc 1 684 9
 1538 005a 07F11003 		add	r3, r7, #16
 1539 005e 41F28832 		movw	r2, #5000
 1540 0062 1946     		mov	r1, r3
 1541 0064 1048     		ldr	r0, .L87
 1542 0066 FFF7FEFF 		bl	HAL_OSPI_Command
 1543 006a 0346     		mov	r3, r0
 1544              		.loc 1 684 8 discriminator 1
 1545 006c 002B     		cmp	r3, #0
 1546 006e 02D0     		beq	.L82
 685:Drivers/Chip/w25q64/w25q64.c ****     {
 686:Drivers/Chip/w25q64/w25q64.c ****         return W25Qxx_ERROR_TRANSMIT; // ´«ÊäÊý¾Ý´íÎó
 1547              		.loc 1 686 16
 1548 0070 6FF00403 		mvn	r3, #4
 1549 0074 14E0     		b	.L86
 1550              	.L82:
 687:Drivers/Chip/w25q64/w25q64.c ****     }
 688:Drivers/Chip/w25q64/w25q64.c ****     //	½ÓÊÕÊý¾Ý
 689:Drivers/Chip/w25q64/w25q64.c ****     if (HAL_OSPI_Receive(&hospi2, pBuffer, HAL_OSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK)
 1551              		.loc 1 689 9
 1552 0076 41F28832 		movw	r2, #5000
 1553 007a F968     		ldr	r1, [r7, #12]
 1554 007c 0A48     		ldr	r0, .L87
 1555 007e FFF7FEFF 		bl	HAL_OSPI_Receive
 1556 0082 0346     		mov	r3, r0
 1557              		.loc 1 689 8 discriminator 1
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 40


 1558 0084 002B     		cmp	r3, #0
 1559 0086 02D0     		beq	.L84
 690:Drivers/Chip/w25q64/w25q64.c ****     {
 691:Drivers/Chip/w25q64/w25q64.c ****         return W25Qxx_ERROR_TRANSMIT; // ´«ÊäÊý¾Ý´íÎó
 1560              		.loc 1 691 16
 1561 0088 6FF00403 		mvn	r3, #4
 1562 008c 08E0     		b	.L86
 1563              	.L84:
 692:Drivers/Chip/w25q64/w25q64.c ****     }
 693:Drivers/Chip/w25q64/w25q64.c ****     // Ê¹ÓÃ×Ô¶¯ÂÖÑ¯±êÖ¾Î»£¬µÈ´ý½ÓÊÕµÄ½áÊø
 694:Drivers/Chip/w25q64/w25q64.c ****     if (OSPI_W25Qxx_AutoPollingMemReady() != OSPI_W25Qxx_OK)
 1564              		.loc 1 694 9
 1565 008e FFF7FEFF 		bl	OSPI_W25Qxx_AutoPollingMemReady
 1566 0092 0346     		mov	r3, r0
 1567              		.loc 1 694 8 discriminator 1
 1568 0094 002B     		cmp	r3, #0
 1569 0096 02D0     		beq	.L85
 695:Drivers/Chip/w25q64/w25q64.c ****     {
 696:Drivers/Chip/w25q64/w25q64.c ****         return W25Qxx_ERROR_AUTOPOLLING; // ÂÖÑ¯µÈ´ýÎÞÏìÓ¦
 1570              		.loc 1 696 16
 1571 0098 6FF00203 		mvn	r3, #2
 1572 009c 00E0     		b	.L86
 1573              	.L85:
 697:Drivers/Chip/w25q64/w25q64.c ****     }
 698:Drivers/Chip/w25q64/w25q64.c ****     return OSPI_W25Qxx_OK; // ¶ÁÈ¡Êý¾Ý³É¹¦
 1574              		.loc 1 698 12
 1575 009e 0023     		movs	r3, #0
 1576              	.L86:
 699:Drivers/Chip/w25q64/w25q64.c **** }
 1577              		.loc 1 699 1
 1578 00a0 1846     		mov	r0, r3
 1579 00a2 6037     		adds	r7, r7, #96
 1580              	.LCFI58:
 1581              		.cfi_def_cfa_offset 8
 1582 00a4 BD46     		mov	sp, r7
 1583              	.LCFI59:
 1584              		.cfi_def_cfa_register 13
 1585              		@ sp needed
 1586 00a6 80BD     		pop	{r7, pc}
 1587              	.L88:
 1588              		.align	2
 1589              	.L87:
 1590 00a8 00000000 		.word	hospi2
 1591              		.cfi_endproc
 1592              	.LFE155:
 1594              		.global	OSPI_Status
 1595              		.section	.bss.OSPI_Status,"aw",%nobits
 1596              		.align	2
 1599              	OSPI_Status:
 1600 0000 00000000 		.space	4
 1601              		.global	W25Qxx_WriteBuffer
 1602              		.section	.bss.W25Qxx_WriteBuffer,"aw",%nobits
 1603              		.align	2
 1606              	W25Qxx_WriteBuffer:
 1607 0000 00000000 		.space	32768
 1607      00000000 
 1607      00000000 
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 41


 1607      00000000 
 1607      00000000 
 1608              		.global	W25Qxx_ReadBuffer
 1609              		.section	.bss.W25Qxx_ReadBuffer,"aw",%nobits
 1610              		.align	2
 1613              	W25Qxx_ReadBuffer:
 1614 0000 00000000 		.space	32768
 1614      00000000 
 1614      00000000 
 1614      00000000 
 1614      00000000 
 1615              		.text
 1616              	.Letext0:
 1617              		.file 2 "C:/msys64/mingw64/arm-none-eabi/include/machine/_default_types.h"
 1618              		.file 3 "C:/msys64/mingw64/arm-none-eabi/include/sys/_stdint.h"
 1619              		.file 4 "Drivers/CMSIS/Device/ST/STM32H7xx/Include/stm32h723xx.h"
 1620              		.file 5 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_def.h"
 1621              		.file 6 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_mdma.h"
 1622              		.file 7 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_ospi.h"
ARM GAS  C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s 			page 42


DEFINED SYMBOLS
                            *ABS*:00000000 w25q64.c
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:20     .text.OSPI_W25Qxx_Init:00000000 $t
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:26     .text.OSPI_W25Qxx_Init:00000000 OSPI_W25Qxx_Init
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:220    .text.OSPI_W25Qxx_ReadID:00000000 OSPI_W25Qxx_ReadID
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:71     .text.OSPI_W25Qxx_Init:00000024 $d
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:76     .text.OSPI_W25Qxx_AutoPollingMemReady:00000000 $t
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:82     .text.OSPI_W25Qxx_AutoPollingMemReady:00000000 OSPI_W25Qxx_AutoPollingMemReady
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:209    .text.OSPI_W25Qxx_AutoPollingMemReady:000000a4 $d
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:214    .text.OSPI_W25Qxx_ReadID:00000000 $t
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:325    .text.OSPI_W25Qxx_ReadID:0000007c $d
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:330    .text.OSPI_W25Qxx_MemoryMappedMode:00000000 $t
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:336    .text.OSPI_W25Qxx_MemoryMappedMode:00000000 OSPI_W25Qxx_MemoryMappedMode
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:450    .text.OSPI_W25Qxx_MemoryMappedMode:00000090 $d
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:455    .text.OSPI_W25Qxx_WriteEnable:00000000 $t
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:461    .text.OSPI_W25Qxx_WriteEnable:00000000 OSPI_W25Qxx_WriteEnable
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:641    .text.OSPI_W25Qxx_WriteEnable:000000f4 $d
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:646    .text.OSPI_W25Qxx_SectorErase:00000000 $t
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:652    .text.OSPI_W25Qxx_SectorErase:00000000 OSPI_W25Qxx_SectorErase
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:768    .text.OSPI_W25Qxx_SectorErase:00000094 $d
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:773    .text.OSPI_W25Qxx_BlockErase_32K:00000000 $t
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:779    .text.OSPI_W25Qxx_BlockErase_32K:00000000 OSPI_W25Qxx_BlockErase_32K
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:895    .text.OSPI_W25Qxx_BlockErase_32K:00000094 $d
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:900    .text.OSPI_W25Qxx_BlockErase_64K:00000000 $t
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:906    .text.OSPI_W25Qxx_BlockErase_64K:00000000 OSPI_W25Qxx_BlockErase_64K
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:1022   .text.OSPI_W25Qxx_BlockErase_64K:00000094 $d
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:1027   .text.OSPI_W25Qxx_ChipErase:00000000 $t
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:1033   .text.OSPI_W25Qxx_ChipErase:00000000 OSPI_W25Qxx_ChipErase
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:1184   .text.OSPI_W25Qxx_ChipErase:000000cc $d
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:1190   .text.OSPI_W25Qxx_WritePage:00000000 $t
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:1196   .text.OSPI_W25Qxx_WritePage:00000000 OSPI_W25Qxx_WritePage
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:1334   .text.OSPI_W25Qxx_WritePage:000000bc $d
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:1339   .text.OSPI_W25Qxx_WriteBuffer:00000000 $t
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:1345   .text.OSPI_W25Qxx_WriteBuffer:00000000 OSPI_W25Qxx_WriteBuffer
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:1457   .text.OSPI_W25Qxx_ReadBuffer:00000000 $t
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:1463   .text.OSPI_W25Qxx_ReadBuffer:00000000 OSPI_W25Qxx_ReadBuffer
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:1590   .text.OSPI_W25Qxx_ReadBuffer:000000a8 $d
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:1599   .bss.OSPI_Status:00000000 OSPI_Status
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:1596   .bss.OSPI_Status:00000000 $d
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:1606   .bss.W25Qxx_WriteBuffer:00000000 W25Qxx_WriteBuffer
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:1603   .bss.W25Qxx_WriteBuffer:00000000 $d
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:1613   .bss.W25Qxx_ReadBuffer:00000000 W25Qxx_ReadBuffer
C:\Users\fffff\AppData\Local\Temp\ccRcG0wg.s:1610   .bss.W25Qxx_ReadBuffer:00000000 $d

UNDEFINED SYMBOLS
HAL_OSPI_Command
HAL_OSPI_AutoPolling
hospi2
HAL_OSPI_Receive
HAL_OSPI_MemoryMapped
HAL_OSPI_Transmit
